"use strict";(this["webpackChunktyphon"]=this["webpackChunktyphon"]||[]).push([[487],{45798:function(e,t,a){a.r(t),a.d(t,{default:function(){return Wt}});var l=a(20641),s=a(90033);const n={class:"flex flex-col"},o={class:"flex justify-between border-y divideBorderColor py-3"},i={class:"flex items-center space-x-6"},r={class:"flex flex-col"},d={class:"page-title labelColor3"},c={class:"mt-1 labelColor2 text-sm"},u={class:"py-3"},p={class:"ml-5 mt-10 flex flex-col"},m={class:"flex flex-col items-start"},v={class:"flex w-full"},f={class:"ml-3 mr-6 flex flex-col items-center"},x={class:"shrink-0 h-7 w-7 bg-primary rounded-full flex items-center justify-center"},k={class:"text-sm font-medium font-mono text-white"},b=(0,l.Lk)("div",{class:"h-full border-l-2 border-primary"},null,-1),g={class:"relative -mt-2 mb-5 card flex flex-col w-full p-5",style:{"max-width":"700px"}},y={class:"ml-2 mb-4 text-sm font-semibold labelColor3"},C={class:"mt-2 w-full flex justify-start"},h={class:"flex border border-primary-9 bg-primary-1 dark:bg-dark-3 dark:border-none items-center rounded-lg space-x-2"},L={class:"flex-none"},w=["onClick","disabled"],A={class:"flex-none flex items-center justify-center"},E=["onClick"],_=(0,l.Lk)("span",{class:"mr-1 text-sm"},"+",-1),F=["onClick","innerHTML"],T=["onClick"],D={class:"flex w-full"},M=(0,l.Fv)('<div class="ml-3 mr-6 flex flex-col items-center"><div class="grow border-l-2 border-primary"></div><div class="shrink-0 h-7 w-7 bg-primary rounded-full flex items-center justify-center"><span class="text-xl font-medium font-mono text-white">+</span></div><div class="grow border-l-2 border-primary"></div></div>',1),$={class:"py-10 w-full"},R={class:"text-primary font-medium"},W={class:"flex"},S={class:"ml-3 mr-6 flex flex-col items-center"},I=(0,l.Lk)("div",{class:"grow border-l-2 border-primary"},null,-1),B={class:"shrink-0 h-7 w-7 bg-primary rounded-full flex items-center justify-center"},N=(0,l.Lk)("div",{class:"grow border-l-2 border-primary"},null,-1),j={class:"py-3"},X={class:"flex border border-primary-9 bg-white dark:bg-dark-3 dark:border-none items-center rounded-lg space-x-2"},K={class:"flex-none"},z=["disabled"],O={class:"flex-none flex items-center justify-center"},V={class:"flex"},H={class:"ml-3 mr-6 flex flex-col items-center"},U=(0,l.Lk)("div",{class:"grow border-l-2 border-primary"},null,-1),P={class:"shrink-0 h-7 w-7 bg-primary rounded-full flex items-center justify-center"},q=(0,l.Lk)("div",{class:"grow"},null,-1),G={class:"py-3"},Q={key:0,class:"ml-16 text-xs mb-1"},J=["innerHTML"];function Y(e,t,a,Y,Z,ee){const te=(0,l.g2)("md-icon"),ae=(0,l.g2)("AppButton"),le=(0,l.g2)("address-field"),se=(0,l.g2)("AssetInput");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",o,[(0,l.Lk)("div",i,[(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.onBack&&e.onBack(...t)),class:"shrink-0 h-9 w-9 bg-white hover:border hover:borderColor dark:bg-dark-3 rounded-full flex items-center justify-center"},[(0,l.bF)(te,{class:"labelColor3",icon:e.mdiArrowLeft,size:20},null,8,["icon"])]),(0,l.Lk)("div",r,[(0,l.Lk)("span",d,(0,s.v_)(e.$t("multiTransaction")),1),(0,l.Lk)("span",c,(0,s.v_)(e.$t("multipleTransactionMessage")),1)])]),(0,l.Lk)("div",u,[(0,l.bF)(ae,{class:"text-xs btn btn-primary tracking-wide px-10 py-2",onClick:e.openImportRecipientsModal,disabled:!1,isLoading:!1},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("importRecipients")),1)])),_:1},8,["onClick"])])]),(0,l.Lk)("div",p,[(0,l.Lk)("div",m,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.localOutputs,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"w-full",key:a},[(0,l.Lk)("div",v,[(0,l.Lk)("div",f,[(0,l.Lk)("div",x,[(0,l.Lk)("span",k,(0,s.v_)(a+1),1)]),b]),(0,l.Lk)("div",g,[(0,l.Lk)("span",y,(0,s.v_)(e.$t("recipient"))+" "+(0,s.v_)(a+1),1),(0,l.bF)(le,{address:t.address,"onUpdate:address":e=>t.address=e,adaHandle:e.adaHandleLocalOutputMap[a]?.adaHandle,showLoader:e.adaHandleLocalOutputMap[a]?.isResolving},null,8,["address","onUpdate:address","adaHandle","showLoader"]),(0,l.bF)(se,{class:"mt-2 px-4 py-3 border border-primary-8 dark:border-none rounded-md",ref_for:!0,ref:"adaInput",decimals:6,assetValue:t.amount,"onUpdate:assetValue":e=>t.amount=e},null,8,["assetValue","onUpdate:assetValue"]),(0,l.Lk)("div",C,[(0,l.Lk)("div",h,[(0,l.Lk)("div",L,[(0,l.Lk)("button",{onClick:()=>e.openViewTokensModal(a),disabled:!t.tokens.length,class:(0,s.C4)(["m-1 px-3 py-1.5 w-full text-sm capitalize focus:outline-none rounded-lg labelColor3 font-medium bg-primary-5 hover:bg-primary-8 dark:bg-dark-1",[(t.tokens.length,"")]])},(0,s.v_)(t.tokens.length),11,w)]),(0,l.Lk)("div",A,[(0,l.Lk)("button",{onClick:()=>e.openAddTokensModal(a),class:"flex items-center mr-1 btn px-4 py-1.5 w-full text-xs font-medium capitalize focus:outline-none text-primary hover:bg-primary-5 dark:hover:bg-dark-2"},[_,(0,l.Lk)("span",null,(0,s.v_)(e.$t("addTokens")),1)],8,E)])])]),e.outputsErrorsMeta[a].isError?((0,l.uX)(),(0,l.CE)("span",{key:0,class:(0,s.C4)(["mt-3 ml-2 text-red-600 text-xs font-medium",[e.outputsErrorsMeta[a].isError?`${e.outputsErrorsMeta[a].styleClass}`:""]]),onClick:e.outputsErrorsMeta[a].onClick,innerHTML:e.outputsErrorsMeta[a].isError?e.outputsErrorsMeta[a].message:"â€‹"},null,10,F)):(0,l.Q3)("",!0),0!==a?((0,l.uX)(),(0,l.CE)("button",{key:1,onClick:t=>e.removeRecipient(a),class:"absolute bottom-2 right-2 ml-2 flex-none h-10 w-10 bg-red-50 dark:bg-dark hover:border-2 hover:border-red-300 dark:hover:bg-opacity-60 rounded-full flex justify-center items-center focus:outline-none"},[(0,l.bF)(te,{icon:e.mdiTrashCanOutline,class:"text-red-500",size:20},null,8,["icon"])],8,T)):(0,l.Q3)("",!0)])])])))),128)),(0,l.Lk)("div",D,[M,(0,l.Lk)("div",$,[(0,l.Lk)("button",{style:{"max-width":"700px"},onClick:t[1]||(t[1]=(...t)=>e.addRecipient&&e.addRecipient(...t)),class:"w-full btn py-5 px-7 text-sm border border-primary border-dashed bg-white dark:bg-dark-1 rounded-lg hover:bg-primary-1 dark:hover:bg-dark-2"},[(0,l.Lk)("span",R,(0,s.v_)(e.$t("addRecipient")),1)])])])]),(0,l.Lk)("div",W,[(0,l.Lk)("div",S,[I,(0,l.Lk)("div",B,[(0,l.bF)(te,{class:"text-white",icon:e.mdiAndroidMessages,size:16},null,8,["icon"])]),N]),(0,l.Lk)("div",j,[(0,l.Lk)("div",X,[(0,l.Lk)("div",K,[(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.openViewMetadataModal&&e.openViewMetadataModal(...t)),disabled:!e.metadataList.length,class:(0,s.C4)(["m-1 px-3 py-1.5 w-full text-sm capitalize focus:outline-none rounded-lg labelColor3 font-medium bg-primary-5 hover:bg-primary-8 dark:bg-dark-1",[e.metadataList.length?"":"cursor-default"]])},(0,s.v_)(e.metadataList.length),11,z)]),(0,l.Lk)("div",O,[(0,l.Lk)("button",{onClick:t[3]||(t[3]=(...t)=>e.openAddMetadataModal&&e.openAddMetadataModal(...t)),class:"flex items-center btn mr-1 px-3 py-2 w-full text-xs font-medium capitalize focus:outline-none text-primary hover:bg-primary-2 dark:hover:bg-dark-2"},[(0,l.Lk)("span",null,(0,s.v_)(e.$t("addMetadata")),1)])])])])]),(0,l.Lk)("div",V,[(0,l.Lk)("div",H,[U,(0,l.Lk)("div",P,[(0,l.bF)(te,{class:"text-white",icon:e.mdiCheck,size:18},null,8,["icon"])]),q]),(0,l.Lk)("div",G,[(0,l.bF)(ae,{class:"text-sm btn btn-md btn-primary tracking-wide px-16",onClick:e.buildTransaction,disabled:!e.enableSendButton,"is-loading":e.isBuildingTransaction},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("send")),1)])),_:1},8,["onClick","disabled","is-loading"])])]),e.transactionErrorMessage?((0,l.uX)(),(0,l.CE)("div",Q,[(0,l.Lk)("span",{class:"rounded-full px-4 py-1 text-red-600 font-medium",innerHTML:e.transactionErrorMessage},null,8,J)])):(0,l.Q3)("",!0)])])}a(44114);var Z=a(50953),ee=a(36327),te=a(25734),ae=a(94107),le=a(93328),se=a(18731),ne=a(45890),oe=a(7283),ie=a(89318),re=a(48156),de=a(36643),ce=a(25426),ue=a(27066),pe=a(15376),me=a(29815),ve=a(99962);const fe={class:"text-sm"},xe={class:"flex flex-col"},ke={class:"flex flex-col space-y-4"},be={class:"ml-4 text-sm font-semibold text-primary-100"},ge={class:"card2 mt-1"},ye={class:"px-4 divide-y divideColor"},Ce={class:"py-3 flex flex-col space-y-1"},he={class:"text-xs font-semibold labelColor2"},Le={key:0,class:"flex flex-col space-y-2"},we={class:"text-xs max-w-max break-all"},Ae={class:"max-w-max break-all labelColor2 font-mono"},Ee={key:1,class:"text-sm max-w-max break-all labelColor3 font-mono"},_e={class:"py-3 flex space-x-10"},Fe={class:"flex flex-col"},Te={class:"text-xs font-semibold labelColor2"},De={class:"mt-1 flex items-baseline space-x-2 labelColor3"},Me={key:0,class:"py-3"},$e={class:"text-xs font-semibold labelColor2"},Re={class:"mt-2 flex flex-wrap gap-x-2 gap-y-1"},We={class:"mt-6 flex space-x-2"},Se={class:"card2 py-2 px-3"},Ie={class:"text-xs font-semibold labelColor2"},Be={class:"mt-1 flex items-baseline space-x-2 labelColor3"},Ne={class:"card2 py-2 px-3 flex flex-col"},je={class:"text-xs font-semibold labelColor2"},Xe={class:"mt-1 flex items-baseline space-x-2 labelColor3"},Ke={key:0,class:"mt-2 space-y-2 card2 py-2 px-3"},ze={class:"text-xs font-semibold labelColor2"},Oe={class:"labelColor3 w-1/5 card3 px-4 py-1"},Ve={class:"labelColor3 w-4/5 card3 px-4 py-1 flex flex-grow"},He={class:"font-mono truncate"};function Ue(e,t,a,n,o,i){const r=(0,l.g2)("ScamAddressWarningVue"),d=(0,l.g2)("ContactAndAdahandleLabel"),c=(0,l.g2)("DecimalNumberVue"),u=(0,l.g2)("ada"),p=(0,l.g2)("TokenBadge"),m=(0,l.g2)("ConfirmTransaction");return(0,l.uX)(),(0,l.CE)("div",fe,[(0,l.bF)(m,{transaction:e.transaction,onFailure:e.onFailure,onSuccess:e.onSuccess,callback:()=>{}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",xe,[(0,l.Lk)("div",ke,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.recipients,((t,a)=>((0,l.uX)(),(0,l.CE)("div",{class:"",key:t.address},[(0,l.Lk)("span",be,"Recipient "+(0,s.v_)(a+1),1),(0,l.Lk)("div",ge,[e.possibleScamAddresses[t.address.getBech32()]?((0,l.uX)(),(0,l.Wv)(r,{key:0})):(0,l.Q3)("",!0),(0,l.Lk)("div",ye,[(0,l.Lk)("div",Ce,[(0,l.Lk)("span",he,(0,s.v_)(e.$t("toAddress")),1),e.getAdaHandle(t.address)||e.getContactName(t.address)?((0,l.uX)(),(0,l.CE)("div",Le,[(0,l.bF)(d,{adaHandle:e.getAdaHandle(t.address),contactName:e.getContactName(t.address)},null,8,["adaHandle","contactName"]),(0,l.Lk)("p",we,[(0,l.Lk)("span",Ae,(0,s.v_)(t.address.getBech32()),1)])])):((0,l.uX)(),(0,l.CE)("span",Ee,(0,s.v_)(t.address.getBech32()),1))]),(0,l.Lk)("div",_e,[(0,l.Lk)("div",Fe,[(0,l.Lk)("span",Te,(0,s.v_)(e.$t("amount")),1),(0,l.Lk)("div",De,[(0,l.bF)(c,{value:e.$filters.formatADA(t.amount),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,l.bF)(u,{class:"h-3.5 w-3.5"})])])]),t.tokens.length?((0,l.uX)(),(0,l.CE)("div",Me,[(0,l.Lk)("div",$e,(0,s.v_)(e.$t("tokens")),1),(0,l.Lk)("div",Re,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(t.tokens,((e,t)=>((0,l.uX)(),(0,l.Wv)(p,{key:t,token:e},null,8,["token"])))),128))])])):(0,l.Q3)("",!0)])])])))),128))]),(0,l.Lk)("div",We,[(0,l.Lk)("div",Se,[(0,l.Lk)("div",Ie,(0,s.v_)(e.$t("totalAdaToBeSpent")),1),(0,l.Lk)("div",Be,[(0,l.bF)(c,{value:e.$filters.formatADA(e.totalTransactionAmount),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,l.bF)(u,{class:"h-3.5 w-3.5"})])]),(0,l.Lk)("div",Ne,[(0,l.Lk)("span",je,(0,s.v_)(e.$t("fees")),1),(0,l.Lk)("div",Xe,[(0,l.bF)(c,{value:e.$filters.formatADA(e.transactionFee),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,l.bF)(u,{class:"h-3.5 w-3.5"})])])]),e.metadataList.length?((0,l.uX)(),(0,l.CE)("div",Ke,[(0,l.Lk)("div",ze,(0,s.v_)(e.$t("metadata")),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.metadataList,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.label,class:"flex gap-2"},[(0,l.Lk)("div",Oe,[(0,l.Lk)("div",null,(0,s.v_)(e.label),1)]),(0,l.Lk)("div",Ve,[(0,l.Lk)("div",He,(0,s.v_)(e.data),1)])])))),128))])):(0,l.Q3)("",!0)])])),_:1},8,["transaction","onFailure","onSuccess"])])}var Pe=a(83761),qe=a(13657),Ge=a(74946),Qe=a(83031),Je=a(24045),Ye=a(59061),Ze=a(55361),et=a(42738),tt=a(97484),at=a(31947),lt=a(2543),st=a(14615),nt=a(63723),ot=(0,l.pM)({name:"ConfirmTransactionModal",components:{TokenBadge:Pe.A,ConfirmTransaction:qe.A,DecimalNumberVue:Je.A,ScamAddressWarningVue:Ze.A,ContactAndAdahandleLabel:et.A},props:{onClose:{type:Function,required:!0},transaction:{type:de.Transaction,required:!0}},setup(e){const t=(0,pe.G)(),a=(0,st.f)(),{t:s}=(0,re.s9)(),n=(0,Z.KR)(!1),o=(0,Z.KR)([]),i=(0,l.EW)((()=>t.activeAccount)),r=(0,nt.getAccountCredentialMetaByKey)(i.value);(0,l.sV)((()=>{d()}));const d=async()=>{const e=await(0,tt.kK)();o.value=e.filter((e=>e.network==ce.A.value.NETWORK))},c=e=>a.addressAdahandleBidirectionalMap[e.getBech32()],u=e=>o.value.find((t=>t.address===e.getBech32()))?.name,p=()=>{ie._g.openDialog({component:Qe.A,props:{title:s("trxSubmitted"),description:`${s("trxSubmittedDescriptionWithAmount",{amount:`${Ye.N.formatADA(g.value)} ada`})}`,alertType:Ge.vT.INFO},size:ie.sD.lg}),setTimeout((()=>{e.onClose&&e.onClose()}),2e3)},m=()=>{ie._g.openDialog({component:Qe.A,props:{title:s("failedToSubmitTrx"),description:s("somethingWentWrong"),alertType:Ge.vT.ERROR},size:ie.sD.lg}),setTimeout((()=>{e.onClose&&e.onClose()}),2e3)},v=(0,l.EW)((()=>e.transaction.getAuxiliaryData()?.metadata??[])),f=(0,l.EW)((()=>e.transaction.getOutputs())),x=(0,l.EW)((()=>f.value.filter((e=>!k(e.address))))),k=e=>{if(e instanceof de.address.BaseAddress||e instanceof de.address.EnterpriseAddress||e instanceof de.address.PointerAddress)return e.paymentCredential.type===de.types.HashType.ADDRESS&&void 0!==r[e.paymentCredential.hash.toString("hex")]},b=(0,l.EW)((()=>e.transaction.getFee())),g=(0,l.EW)((()=>(0,at.getAccountChange)(e.transaction,(0,lt.keyBy)([...i.value.externalCredentials,...i.value.internalCredentials],(e=>e.hash))).ada)),y=(0,l.EW)((()=>a.possibleScamAddressesMap));return{transactionFee:b,totalTransactionAmount:g,metadataList:v,recipients:x,transactionSubmitting:n,possibleScamAddresses:y,onFailure:m,onSuccess:p,getContactName:u,getAdaHandle:c}}}),it=a(66262);const rt=(0,it.A)(ot,[["render",Ue]]);var dt=rt,ct=a(53751);const ut={class:"flex flex-col items-center"},pt={class:"labelColor1 mb-5 text-center text-sm"},mt=["href"],vt={id:"overlay",class:"w-full h-full absolute top-0 left-0 pointer-events-none z-50 flex flex-col items-center justify-center rounded-md bg-gray-200 dark:bg-dark-3 opacity-95"},ft={class:"text-lg labelColor1"},xt={class:"h-full overflow-auto w-full h-full flex flex-col"},kt={class:"text-red-500 text-center mb-4"},bt={class:"labelColor2 flex flex-col flex-wrap justify-center items-center space-y-4"},gt={key:0,class:"mt-2 mb-4 text-sm text-red-400"},yt={key:1,class:"mt-2 mb-4 text-sm labelColor1"},Ct={class:"flex justify-end space-x-4"};function ht(e,t,a,n,o,i){const r=(0,l.g2)("md-icon"),d=(0,l.g2)("AppButtonVue");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("div",ut,[(0,l.bF)(r,{icon:e.mdiInformation,size:25,class:"labelColor1"},null,8,["icon"]),(0,l.Lk)("div",pt,[(0,l.eW)((0,s.v_)(e.$t("importRecipientsInfoMessage"))+" ",1),(0,l.Lk)("a",{target:"_blank",download:"sampleRecipientsFile.csv",href:"data:text/csv;charset=utf-8,"+e.sampleFileData,class:"text-primary"},(0,s.v_)(e.$t("downloadSampleFile")),9,mt)])]),(0,l.Lk)("article",{"aria-label":"Import Recipients Modal",class:"relative h-full flex flex-col card2 rounded-md p-8 pb-6",onDrop:t[2]||(t[2]=(0,ct.D$)(((...t)=>e.dropHandler&&e.dropHandler(...t)),["prevent"])),onDragover:t[3]||(t[3]=(0,ct.D$)((t=>e.showOverlay=!0),["prevent"])),onDragleave:t[4]||(t[4]=(0,ct.D$)((t=>e.showOverlay=!1),["prevent"])),onDragenter:t[5]||(t[5]=(0,ct.D$)((t=>e.showOverlay=!0),["prevent"]))},[(0,l.bo)((0,l.Lk)("div",vt,[(0,l.bF)(r,{icon:e.mdiCloudUpload,size:55,class:"labelColor1"},null,8,["icon"]),(0,l.Lk)("p",ft,(0,s.v_)(e.$t("dropFile")),1)],512),[[ct.aG,e.showOverlay]]),(0,l.Lk)("section",xt,[(0,l.Lk)("div",kt,(0,s.v_)(e.$t("importRecipientsOverrideMessage")),1),(0,l.Lk)("header",{class:"border-dashed border-2 dark:border-gray-700 rounded-md py-10 flex flex-col justify-center items-center cursor-pointer",onClick:t[1]||(t[1]=t=>e.$refs.file.click())},[(0,l.Lk)("div",bt,[(0,l.Lk)("span",null,(0,s.v_)(e.$t("dragAndDropFile")),1),(0,l.bF)(r,{icon:e.mdiCloudUpload,size:55,class:"labelColor2"},null,8,["icon"])]),(0,l.Lk)("input",{type:"file",ref:"file",accept:".csv",class:"hidden",onChange:t[0]||(t[0]=(...t)=>e.fileInputChange&&e.fileInputChange(...t))},null,544)]),e.fileError?((0,l.uX)(),(0,l.CE)("span",gt,(0,s.v_)(e.fileError),1)):((0,l.uX)(),(0,l.CE)("span",yt,(0,s.v_)(e.uploadedFileData&&e.uploadedFileData.fileName?e.uploadedFileData.fileName:"â€‹"),1))]),(0,l.Lk)("footer",Ct,[(0,l.bF)(d,{disabled:null===e.uploadedFileData,onClick:e.onFileImport,class:"btn btn-primary btn-md bg-primary hover:bg-opacity-95",style:{"min-width":"120px"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("import")),1)])),_:1},8,["disabled","onClick"]),(0,l.bF)(d,{class:"btn btn-md btn-secondary-outline tracking-wide",style:{"min-width":"120px"},onClick:e.closeModal},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("cancel")),1)])),_:1},8,["onClick"])])],32)],64)}var Lt=a(9165),wt=(0,l.pM)({components:{AppButtonVue:se.A},props:{onImport:{type:Function,required:!0}},setup(e){const{t:t}=(0,re.s9)(),a=(0,Z.KR)(!1),l=(0,Z.KR)(""),s=(0,Z.KR)(null),n=async()=>{ie._g.closeDialog()},o=e=>{e.preventDefault(),a.value=!1;const t=e.dataTransfer?.files?e.dataTransfer?.files[0]:null;t&&r(t)},i=e=>{const t=e.target.files?e.target.files[0]:null;t&&r(t)},r=e=>{if(s.value=null,l.value="","text/csv"!==e.type)return void(l.value=t("invalidCsvFileError"));let a=new FileReader;a.addEventListener("load",(async()=>{if(a.result&&"string"===typeof a.result)try{const t=a.result.split("\n"),l=[];return t.forEach((e=>{const t=e.split(",");if(t.length>=2){const[e,a,s,n]=t;e&&a&&l.push({address:e,amount:a,assetId:s,assetAmount:n})}})),void(s.value={recipients:l,fileName:e.name})}catch(n){return s.value=null,void(l.value=t("invalidContentInFileError"))}})),a.readAsText(e)},d=async()=>{e.onImport(s.value),ie._g.closeDialog()},c=encodeURIComponent("addr1q8mgw8geggkl2hs0m6rq3pgt69uxttpqcgu6euxje5tt6plxjtjrnskhhtt03g6l3sr98p9t8mtlajr26vmwjzep77pqxn8cms,10000000,8daefa391220bd0d8d007f3748d870f7f3c106040314c8515ccc35a5464c4143,1\naddr1q8mgw8geggkl2hs0m6rq3pgt69uxttpqcgu6euxje5tt6plxjtjrnskhhtt03g6l3sr98p9t8mtlajr26vmwjzep77pqxn8cms,10000000\n");return{mdiCloudUpload:Lt.PHP,mdiInformation:Lt.Rjk,showOverlay:a,uploadedFileData:s,fileError:l,closeModal:n,dropHandler:o,fileInputChange:i,onFileImport:d,sampleFileData:c}}});const At=(0,it.A)(wt,[["render",ht]]);var Et=At,_t=a(46166),Ft=a(60346),Tt=a(10488),Dt=a(38993),Mt=a(48287)["Buffer"],$t=(0,l.pM)({components:{AddressField:ee.A,AssetInput:te.A,AppButton:se.A},setup(){const e=(0,_t.rd)(),{t:t}=(0,re.s9)(),a=(0,Z.KR)(""),s=(0,Z.KR)([]),n=(0,Z.KR)(!1),o=(0,pe.G)(),i=(0,l.EW)((()=>o.activeAccount)),r=(0,st.f)(),d=(0,Z.KR)({}),c=(0,Z.KR)([{amount:"",address:"",tokens:[]}]);(0,l.sV)((()=>{const e=(0,_t.lq)(),t=e.params.tokens?JSON.parse(e.params.tokens).map((e=>({...e,amount:new Ft.A(e.amount)}))):[];s.value=e.params.metadata?JSON.parse(e.params.metadata):[],c.value[0].address=e.params.address??"",c.value[0].tokens=t,c.value[0].amount=e.params.amount??""}));const u=()=>{ie._g.openDialog({title:t("addMetadataModalTitle"),component:ne.A,size:ie.sD["2xl"],props:{addMetadata:e=>s.value.push(e),metadataList:s.value}})},p=()=>{ie._g.openDialog({title:t("viewMetadataModalTitle"),component:le.A,size:ie.sD["2xl"],props:{metadataList:s.value,deleteMetadata:e=>s.value.splice(e,1)}})},m=async e=>{d.value[e]||(d.value[e]={adaHandle:"",isInvalid:!1,isResolving:!1}),d.value[e].isResolving=!0,d.value[e].isInvalid=!1;const t=c.value[e].address;r.addressAdahandleBidirectionalMap[t]||await r.resolveAndSetAdahandle([t]),r.addressAdahandleBidirectionalMap[t]?(c.value[e].address=r.addressAdahandleBidirectionalMap[t],d.value[e].adaHandle=t):d.value[e].isInvalid=!0,d.value[e].isResolving=!1};let v={};(0,l.wB)(c,(()=>{c.value.forEach(((e,t)=>{e.address.startsWith("$")&&"$"!=e.address?(clearTimeout(v[t]),v[t]=setTimeout((()=>{m(t)}),1e3)):""==e.address&&d.value[t]&&(d.value[t].adaHandle="")}))}),{deep:!0});const f=(0,l.EW)((()=>c.value.map(((e,a)=>{if(e.address)if(e.address.startsWith("$")){if(d.value[a]?.isInvalid)return{isError:!0,message:"Invalid adahandle",styleClass:"",onClick:()=>{}}}else if(!(0,ve.Vh)(e.address,ce.A.value.NETWORK))return{isError:!0,message:t("invalidAddress"),styleClass:"",onClick:()=>{}};const l=L(e.tokens);return e.amount&&l.gt(e.amount)?{isError:!0,message:t("minUtxoError",{amount:(0,ue.NM)(l).toString()}),styleClass:"cursor-pointer underline",onClick:()=>{c.value[a].amount=l.toString()}}:{isError:!1,message:"",styleClass:"",onClick:()=>{}}})))),x=(0,l.EW)((()=>{let e=f.value.map(((e,t)=>!(!c.value[t].address||!c.value[t].amount)&&!e.isError));return!e.some((e=>0==e))})),k=()=>{e.back()},b=()=>{c.value.push({amount:"",address:"",tokens:[]})},g=e=>{c.value=[...c.value.slice(0,e),...c.value.slice(e+1)]},y=e=>{ie._g.openDialog({title:t("viewTokensModalTitle"),component:ae.A,size:ie.sD["2xl"],props:{getAddedTokens:()=>c.value[e].tokens,removeToken:w(e)}})},C=(0,l.EW)((()=>i.value.tokenBalance)),h=e=>t=>{c.value=c.value.map(((a,l)=>{if(l===e){const e=L([...a.tokens,t]);let l=a.amount;return a.amount&&!new Ft.A(a.amount).isLessThan(e)||(l=e.toString()),{...a,amount:l,tokens:[...a.tokens,t]}}return a}))},L=e=>de.utils.calculateMinUtxoAmountBabbage({address:de.utils.getAddressFromHex(Mt.from("000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000","hex")),tokens:e,amount:Dt.K4},new Ft.A(Tt.E.UTXO_COST_PER_BYTE)),w=e=>t=>{c.value[e].tokens=c.value[e].tokens.filter(((e,a)=>t!==a))},A=e=>{const a={};c.value.forEach(((t,l)=>{l!==e&&t.tokens.forEach((e=>{const t=e.policyId+e.assetName;a[t]?a[t]=a[t].plus(e.amount):a[t]=new Ft.A(e.amount)}))}));const l=C.value.map((e=>({...e,amount:e.amount.minus(a[(0,ue.Gc)(e)]?a[(0,ue.Gc)(e)]:"0")})));ie._g.openDialog({title:t("addTokenModalTitle"),component:oe.A,size:ie.sD["2xl"],props:{addToken:h(e),tokenBalance:l,getAddedTokens:()=>c.value[e].tokens}})},E=async()=>{n.value=!0;const e=[];c.value.forEach((t=>{const a={address:t.address,amount:new Ft.A(t.amount),tokens:t.tokens.map((e=>({...e,amount:new Ft.A(e.amount)})))};e.push(a)}));const l={type:"GenericTransaction",outputs:e.map((e=>({address:e.address,amount:e.amount,tokens:e.tokens}))),auxiliaryData:{metadata:s.value}},o=await(0,me.getTransactionStatus)(i.value,l);n.value=!1,"ERROR"!==o.status?(a.value="",r.checkForPossibleScamAddresses(e.map((e=>e.address))),ie._g.openDialog({component:dt,title:t("transactionConfirmModalTitle"),size:ie.sD["2xl"],props:{onClose:()=>{c.value.splice(1),c.value[0].address="",c.value[0].amount=""},transaction:o.unsignedTx}})):"NotEnoughAda"!==o.errors.amount.name&&"NotEnoughBalance"!==o.errors.amount.name||(a.value="not enough ada or tokens to make this transaction")},_=e=>{const t=[];e.recipients.forEach(((e,a)=>{let l=new Ft.A(e.amount);l.isNaN()&&(l=new Ft.A("0"));let s=new Ft.A(e.assetAmount?e.assetAmount:"0");s.isNaN()&&(s=new Ft.A("0")),t[a]={amount:l.toFixed(),address:e.address,tokens:[]},e.assetId&&e.assetId.length>=56&&(t[a].tokens=[{amount:s,policyId:e.assetId.slice(0,56),assetName:e.assetId.slice(56)}])})),c.value=t},F=()=>{ie._g.openDialog({component:Et,size:ie.sD["2xl"],props:{onImport:_}})};return{localOutputs:c,outputsErrorsMeta:f,enableSendButton:x,metadataList:s,transactionErrorMessage:a,mdiAndroidMessages:Lt.QYb,mdiCheck:Lt.Tfj,mdiTrashCanOutline:Lt.FhF,mdiArrowLeft:Lt.NSe,openViewTokensModal:y,openAddTokensModal:A,addRecipient:b,removeRecipient:g,buildTransaction:E,openViewMetadataModal:p,openAddMetadataModal:u,onBack:k,openImportRecipientsModal:F,adaHandleLocalOutputMap:d,isBuildingTransaction:n}}});const Rt=(0,it.A)($t,[["render",Y]]);var Wt=Rt},81618:function(e,t,a){a.r(t),a.d(t,{default:function(){return xa}});var l=a(20641),s=a(90033);const n={class:"card pb"},o={class:"page-title labelColor3 mb-6"},i={key:0,class:"py-4 flex items-center justify-between"},r={class:"flex flex-col"},d={class:"text-sm font-medium labelColor3"},c={class:"mt-1 text-xs text-gray-500"},u={key:1,class:"py-4 flex items-center justify-between"},p={class:"flex flex-col"},m={class:"text-sm font-medium labelColor3"},v={class:"mt-1 text-xs text-gray-500"},f={class:"py-4 flex items-center justify-between"},x={class:"flex flex-col"},k={class:"text-sm font-medium labelColor3"},b={class:"mt-1 text-xs text-gray-500"},g={class:"text-right"},y={class:"py-4 flex items-center justify-between"},C={class:"flex flex-col"},h={class:"text-sm font-medium labelColor3"},L={class:"mt-1 text-xs text-gray-500"},w={class:"flex items-center space-x-2.5"},A={class:"text-sm font-medium rounded-md text-white"},E={class:"py-4 flex items-center justify-between"},_={class:"flex flex-col"},F={class:"text-sm font-medium labelColor3"},T={class:"mt-1 text-xs text-gray-500"},D={class:"flex items-center space-x-2.5"},M={class:"text-sm font-medium rounded-md text-white"},$={class:"py-4 flex items-center justify-between"},R={class:"flex flex-col"},W={class:"text-sm font-medium labelColor3"},S={class:"mt-1 text-xs text-gray-500"},I={class:"text-sm font-medium rounded-md text-white"},B={class:"py-4 flex items-center justify-between"},N={class:"flex flex-col"},j=(0,l.Lk)("p",{class:"text-sm font-medium labelColor3"},"About",-1),X={class:"mt-1 text-xs text-gray-500"};function K(e,t,a,K,z,O){const V=(0,l.g2)("AppButtonVue"),H=(0,l.g2)("language-selection"),U=(0,l.g2)("md-icon"),P=(0,l.gN)("tippy");return(0,l.uX)(),(0,l.CE)("div",n,[(0,l.Lk)("div",o,(0,s.v_)(e.$t("settings")),1),e.isExtension?((0,l.uX)(),(0,l.CE)("li",i,[(0,l.Lk)("div",r,[(0,l.Lk)("span",d,(0,s.v_)(e.$t("collateral")),1),(0,l.Lk)("p",c,(0,s.v_)(e.$t("manageCollateral")),1)]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",null,[(0,l.bF)(V,{onClick:e.manageCollateral,disabled:e.isTransactionPending,class:"btn btn-primary btn-md bg-primary hover:bg-opacity-95"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("manage")),1)])),_:1},8,["onClick","disabled"])])),[[P,{content:e.isTransactionPending?"Please wait for pending transactions":""}]])])):(0,l.Q3)("",!0),e.isExtension?((0,l.uX)(),(0,l.CE)("li",u,[(0,l.Lk)("div",p,[(0,l.Lk)("span",m,(0,s.v_)(e.$t("customNodeEndpoint")),1),(0,l.Lk)("p",v,(0,s.v_)(e.$t("customNodeEndpointDescription")),1)]),(0,l.Lk)("div",null,[(0,l.bF)(V,{onClick:e.manageCustomNodeEndpoint,class:"btn btn-primary btn-md bg-primary hover:bg-opacity-95"},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("manage")),1)])),_:1},8,["onClick"])])])):(0,l.Q3)("",!0),(0,l.Lk)("li",f,[(0,l.Lk)("div",x,[(0,l.Lk)("p",k,(0,s.v_)(e.$t("setLanguage")),1),(0,l.Lk)("p",b,(0,s.v_)(e.$t("selectLanguage")),1)]),(0,l.Lk)("div",g,[(0,l.bF)(H)])]),(0,l.Lk)("li",y,[(0,l.Lk)("div",C,[(0,l.Lk)("p",h,(0,s.v_)(e.$t("importWalletSettings")),1),(0,l.Lk)("p",L,(0,s.v_)(e.$t("importWalletSettingsDescription")),1)]),(0,l.bF)(V,{onClick:e.openImportSettingsModal,class:"btn btn-primary btn-md capitalize bg-primary hover:bg-opacity-95 pl-3"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",w,[(0,l.bF)(U,{icon:e.mdiImport,size:18,class:"text-white"},null,8,["icon"]),(0,l.Lk)("span",A,(0,s.v_)(e.$t("import")),1)])])),_:1},8,["onClick"])]),(0,l.Lk)("li",E,[(0,l.Lk)("div",_,[(0,l.Lk)("p",F,(0,s.v_)(e.$t("exportWalletSettings")),1),(0,l.Lk)("p",T,(0,s.v_)(e.$t("exportWalletSettingsDescription")),1)]),(0,l.bF)(V,{onClick:e.openExportSettingsModal,class:"btn btn-primary btn-md capitalize bg-primary hover:bg-opacity-95 pl-3"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",D,[(0,l.bF)(U,{icon:e.mdiDownload,size:18,class:"text-white"},null,8,["icon"]),(0,l.Lk)("span",M,(0,s.v_)(e.$t("export")),1)])])),_:1},8,["onClick"])]),(0,l.Lk)("li",$,[(0,l.Lk)("div",R,[(0,l.Lk)("p",W,(0,s.v_)(e.$t("exportExtendedPublicKey")),1),(0,l.Lk)("p",S,(0,s.v_)(e.$t("exportExtendedPublicKeyDescription")),1)]),(0,l.bF)(V,{onClick:e.copyAccountXPub,class:"btn btn-primary btn-md capitalize bg-primary hover:bg-opacity-95"},{default:(0,l.k6)((()=>[(0,l.Lk)("span",I,(0,s.v_)(e.$t("export")),1)])),_:1},8,["onClick"])]),(0,l.Lk)("li",B,[(0,l.Lk)("div",N,[j,(0,l.Lk)("p",X," https://typhonwallet.io - Version "+(0,s.v_)(e.walletVersion),1)])])])}var z=a(50953),O=a(18731);const V={class:"flex flex-col h-full"},H={class:"flex-grow flex flex-col"},U={class:"flex flex-col cardColor items-center pt-5 pb-10"},P={class:"h-14 w-14 rounded-full flex items-center justify-center bg-primary text-white"},q={class:"mt-2 flex flex-col items-center space-y-2"},G={class:"text-xs font-bold labelColor3"},Q={class:"flex items-baseline labelColor3"},J={class:"mt-5 text-xs labelColor3 text-center px-7"},Y={class:"w-full flex-grow flex flex-col justify-between items-center"},Z={class:"w-full flex flex-col items-center px-5"},ee={class:"text-xs mt-3"},te=["innerHTML"],ae={class:"w-full flex gap-2 p-2 cardColor"},le={class:"w-1/2"};function se(e,t,a,n,o,i){const r=(0,l.g2)("AppBarVue"),d=(0,l.g2)("md-icon"),c=(0,l.g2)("DecimalNumberVue"),u=(0,l.g2)("ada"),p=(0,l.g2)("AssetInputVue"),m=(0,l.g2)("AppButton"),v=(0,l.gN)("tippy");return(0,l.uX)(),(0,l.CE)("div",V,[e.isForWeb?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(r,{key:0,title:e.$t("collateral")},null,8,["title"])),(0,l.Lk)("div",H,[(0,l.Lk)("div",U,[(0,l.Lk)("div",P,[(0,l.bF)(d,{icon:e.collateralIcon,size:35},null,8,["icon"])]),(0,l.Lk)("div",q,[(0,l.Lk)("span",G,(0,s.v_)(e.$t("collateral")),1),(0,l.Lk)("div",Q,[(0,l.bF)(c,{value:e.$filters.formatADA(e.collateralBalance),integralClasses:"font-semibold text-xl",fractionalClasses:"font-medium text-sm"},null,8,["value"]),(0,l.bF)(u,{class:"h-3.5 w-3.5 ml-2"})]),e.collateralBalance&&!e.collateralBalance.isEqualTo(0)?((0,l.uX)(),(0,l.CE)("button",{key:0,onClick:t[0]||(t[0]=(...t)=>e.openWithdrawModal&&e.openWithdrawModal(...t)),class:"bg-primary hover:bg-opacity-90 rounded-md px-2 py-1 shadow text-xs text-white"},(0,s.v_)(e.$t("withdraw")),1)):(0,l.Q3)("",!0)]),(0,l.Lk)("span",J,(0,s.v_)(e.$t("collateralDescription")),1)]),(0,l.Lk)("div",Y,[(0,l.Lk)("div",Z,[(0,l.Lk)("div",{class:(0,s.C4)(["mt-4 border border-primary-8 dark:border-none overflow-hidden rounded-md w-full",[e.isAdaInputFocus?"border-primary shadow":""]])},[(0,l.bF)(p,{class:"w-full px-4 py-3",ref:"adaInput",decimals:6,assetValue:e.amount,"onUpdate:assetValue":t[1]||(t[1]=t=>e.amount=t),onFocus:t[2]||(t[2]=t=>e.isAdaInputFocus=!0),onBlur:t[3]||(t[3]=t=>e.isAdaInputFocus=!1)},null,8,["assetValue"])],2),(0,l.Lk)("div",ee,[(0,l.Lk)("div",{class:(0,s.C4)(["rounded-full px-4 py-1 text-white",[e.validationResult.isError?`bg-red-400 ${e.validationResult.styleClass}`:""]]),onClick:t[4]||(t[4]=(...t)=>e.validationResult.onClick&&e.validationResult.onClick(...t)),innerHTML:e.validationResult.isError?e.validationResult.message:"â€‹"},null,10,te)])]),(0,l.Lk)("div",ae,[(0,l.bF)(m,{class:"btn btn-md btn-secondary-outline uppercase tracking-wide w-1/2",onClick:e.clearTransaction,isLoading:!1},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("clear")),1)])),_:1},8,["onClick"]),(0,l.bo)(((0,l.uX)(),(0,l.CE)("div",le,[(0,l.bF)(m,{class:"btn btn-md btn-primary uppercase tracking-wide w-full",onClick:e.openConfirmationPage,disabled:e.disableSendButton,"is-loading":e.isBuildingTransaction},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("add")),1)])),_:1},8,["onClick","disabled","is-loading"])])),[[v,{content:e.isCollateralAlreadyAdded?e.$t("withdrawBeforeAddingCollateral"):""}]])])])])])}a(44114);var ne=a(67582),oe=a(9165),ie=a(24045),re=a(60346),de=a(25734),ce=a(48156),ue=a(46166),pe=a(89318);const me={class:"flex flex-col"},ve={class:"px-3 mt-2"},fe={class:"text-sm labelColor2"},xe={class:"text-xs mt-3 flex justify-center"},ke={class:"mt-2 w-full flex gap-2 p-2 cardColor"};function be(e,t,a,n,o,i){const r=(0,l.g2)("AppButton");return(0,l.uX)(),(0,l.CE)("div",me,[(0,l.Lk)("div",ve,[(0,l.Lk)("p",fe,(0,s.v_)(e.$t("withdrawMessage")),1)]),(0,l.Lk)("div",xe,[(0,l.Lk)("div",{class:(0,s.C4)(["rounded-full px-4 py-1 text-white",e.validationResult.isError?"bg-red-400":""])},[(0,l.Lk)("span",null,(0,s.v_)(e.validationResult.isError?e.validationResult.message:"â€‹"),1)],2)]),(0,l.Lk)("div",ke,[(0,l.bF)(r,{class:"btn btn-md btn-secondary-outline uppercase tracking-wide w-1/2",onClick:e.closeModal,isLoading:!1,disabled:e.isBuildingTransaction},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("cancel")),1)])),_:1},8,["onClick","disabled"]),(0,l.bF)(r,{class:"btn btn-md btn-primary uppercase tracking-wide w-1/2",onClick:e.buildTransaction,disabled:!e.enableWithdrawButton,isLoading:e.isBuildingTransaction},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("withdraw")),1)])),_:1},8,["onClick","disabled","isLoading"])])])}var ge=a(4037),ye=a(83031),Ce=a(74946),he=a(27066),Le=a(15376),we=a(31947),Ae=(0,l.pM)({props:{isForWeb:{type:Boolean,default:!1}},components:{AppButton:O.A},setup(){const{t:e}=(0,ce.s9)(),t=(0,Le.G)(),a=(0,z.KR)(!1),s=(0,z.KR)(""),n=(0,l.EW)((()=>t.activeAccount)),o=(0,l.EW)((()=>t.activeAccount?n.value?.collateralUtxo?.amount??new re.A(0):new re.A(0))),i=(0,l.EW)((()=>!r.value.isError&&!a.value)),r=(0,l.EW)((()=>s.value?{isError:!0,message:s.value}:{isError:!1,message:""})),d=()=>new Promise((e=>{const a=setInterval((()=>{t.isAccountSyncing||(clearInterval(a),e())}),1e3)})),c=async()=>{a.value=!0,await d();try{const a=o.value,l=(0,we.removeCollateralUtxo)(n.value);t.patchAccount(l.index,l),t.saveStoreState(),pe._g.openDialog({component:ye.A,props:{alertType:Ce.vT.SUCCESS,title:e("collateralWithdrawSuccess"),description:e("collateralWithdrawSuccessDescription",{amount:(0,he.NM)(a).toString()})},size:pe.sD.lg})}catch(l){ge.v.error(l),s.value=l.message}finally{a.value=!1}},u=async()=>{pe._g.closeDialog()};return{isBuildingTransaction:a,enableWithdrawButton:i,validationResult:r,buildTransaction:c,closeModal:u}}}),Ee=a(66262);const _e=(0,Ee.A)(Ae,[["render",be]]);var Fe=_e;const Te={class:"text-sm"},De={class:"space-y-3"},Me={class:"flex flex-col space-y-1 card2 py-2 px-3"},$e={class:"text-xs font-semibold labelColor2"},Re={class:"text-sm max-w-max break-all labelColor3 font-mono"},We={class:"flex space-x-10 card2 py-2 px-3"},Se={class:"flex flex-col"},Ie={class:"text-xs font-semibold labelColor2"},Be={class:"mt-1 flex items-baseline space-x-2 labelColor3"},Ne={class:"flex flex-col"},je={class:"text-xs font-semibold labelColor2"},Xe={class:"mt-1 flex items-baseline space-x-2 labelColor3"};function Ke(e,t,a,n,o,i){const r=(0,l.g2)("DecimalNumberVue"),d=(0,l.g2)("ada"),c=(0,l.g2)("ConfirmTransaction");return(0,l.uX)(),(0,l.CE)("div",Te,[(0,l.bF)(c,{transaction:e.transaction,onFailure:e.onFailure,onSuccess:e.onSuccess,callback:()=>{}},{default:(0,l.k6)((()=>[(0,l.Lk)("div",De,[(0,l.Lk)("div",Me,[(0,l.Lk)("span",$e,(0,s.v_)(e.$t("collateralAddress")),1),(0,l.Lk)("span",Re,(0,s.v_)(e.address),1)]),(0,l.Lk)("div",We,[(0,l.Lk)("div",Se,[(0,l.Lk)("span",Ie,(0,s.v_)(e.$t("collateralAmount")),1),(0,l.Lk)("div",Be,[(0,l.bF)(r,{value:e.$filters.formatADA(e.depositAmount),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,l.bF)(d,{class:"h-3.5 w-3.5"})])]),(0,l.Lk)("div",Ne,[(0,l.Lk)("span",je,(0,s.v_)(e.$t("fees")),1),(0,l.Lk)("div",Xe,[(0,l.bF)(r,{value:e.$filters.formatADA(e.transactionFee),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,l.bF)(d,{class:"h-3.5 w-3.5"})])])])])])),_:1},8,["transaction","onFailure","onSuccess"])])}var ze=a(13657),Oe=a(14615);const Ve=()=>{const e=(0,Oe.f)(),t=(0,Le.G)(),a=(0,l.EW)((()=>e.transaction)),s=(0,l.EW)((()=>a.value?.getOutputs()[0].address.getBech32())),n=(0,l.EW)((()=>t.activeAccount)),o=(0,l.EW)((()=>e.transaction?.getOutputs()[0].amount)),i=(0,l.EW)((()=>e.transaction?.getFee())),r=()=>new Promise((e=>{const a=setInterval((()=>{t.isAccountSyncing||(clearInterval(a),e())}),1e3)})),d=async e=>{await r();const a=0,l=e.outputs[a];if(!l.paymentCredential)throw new Error("Error saving collateral");{const s={txId:e.hash,index:a,address:l.address,amount:l.amount,tokens:l.tokens,paymentCredential:l.paymentCredential,stakeCredential:l.stakeCredential},o=(0,we.addCollateralUtxo)(n.value,s);t.patchAccount(o.index,o),t.saveStoreState()}};return{address:s,confirm:confirm,collateralAmount:o,transactionFees:i,onSuccess:d,unsignedTransaction:a}};var He=(0,l.pM)({name:"ConfirmTransactionModal",components:{ConfirmTransaction:ze.A,DecimalNumberVue:ie.A},setup(){const{t:e}=(0,ce.s9)(),t=Ve(),a=async a=>{await t.onSuccess(a),pe._g.openDialog({component:ye.A,props:{title:e("trxSubmitted"),description:`${e("trxSubmittedDescription")}`,alertType:Ce.vT.INFO},size:pe.sD.lg})},l=()=>{pe._g.openDialog({component:ye.A,props:{title:e("failedToSubmitTrx"),description:e("somethingWentWrong"),alertType:Ce.vT.ERROR},size:pe.sD.lg})};return{address:t.address,depositAmount:t.collateralAmount,transactionFee:t.transactionFees,onSuccess:a,onFailure:l,transaction:t.unsignedTransaction}}});const Ue=(0,Ee.A)(He,[["render",Ke]]);var Pe=Ue,qe=a(99962),Ge=a(59061),Qe=(0,l.pM)({props:{isForWeb:{type:Boolean,default:!1}},components:{AppBarVue:ne.A,DecimalNumberVue:ie.A,AssetInputVue:de.A,AppButton:O.A},setup(e){const t=(0,ue.rd)(),{t:a}=(0,ce.s9)(),s=(0,Oe.f)(),n=(0,Le.G)(),o=(0,l.EW)((()=>n.activeAccount)),i=oe.Ivc,r=(0,z.KR)(!1),d=(0,z.KR)(!1),c=(0,z.KR)({isError:!1,message:"",styleClass:"",onClick:null}),u=(0,z.KR)(""),p=(0,z.KR)(null),m=(0,z.KR)({}),v=(0,l.EW)((()=>o.value.collateralUtxo?o.value.collateralUtxo?.amount:new re.A(0))),f=(0,l.EW)((()=>!v.value.isZero()));(0,l.wB)(m,(()=>{c.value={isError:!1,message:"",styleClass:"",onClick:null},m.value&&Object.keys(m.value).length>0?"InvalidAddress"===m.value.recipient?.name?c.value={isError:!0,message:"Address is invalid",styleClass:"",onClick:()=>({})}:"MinAmountError"===m.value.amount?.name?c.value={isError:!0,message:`minimum <u>${Ge.N.formatADA(m.value.amount?.amount)} ADA</u> is required`,styleClass:"cursor-pointer",onClick:()=>{u.value=m.value.amount.amount}}:"NotEnoughAda"!==m.value.amount?.name&&"NotEnoughBalance"!==m.value.amount?.name||(c.value={isError:!0,message:"Insufficient balance",styleClass:"",onClick:()=>({})}):c.value={isError:!1,message:"",styleClass:"",onClick:null}}));const x=(0,l.EW)((()=>!u.value||new re.A(u.value).lte(0)||f.value)),k=async()=>{d.value=!0;let l={type:"PaymentTransaction",amount:u.value,recipient:o.value.receiveAddress,metadata:[],tokens:[],useMaxAmount:!1,useMinAmount:!1};const n=await(0,qe.d9)(o.value,l);d.value=!1,"OK"===n.status?(u.value=n.totalSpent.minus(n.estimatedFee).toString(),p.value=n.unsignedTx,m.value={}):(p.value=null,m.value=n.errors),p.value&&(s.setUnsignedTransaction(p.value),e.isForWeb?pe._g.openDialog({component:Pe,title:a("transactionConfirmModalTitle"),size:pe.sD["2xl"]}):t.push("/transaction/collateral/confirm"))},b=()=>{c.value={isError:!1,message:"",styleClass:"",onClick:null}},g=()=>pe._g.openDialog({title:a("withdrawCollateral"),props:{isForWeb:e.isForWeb},component:Fe,size:pe.sD.lg,style:"padding-left: 5px; padding-right: 5px; padding-bottom: 5px;"});return{collateralIcon:i,isAdaInputFocus:r,amount:u,collateralBalance:v,disableSendButton:x,validationResult:c,openConfirmationPage:k,clearTransaction:b,openWithdrawModal:g,isCollateralAlreadyAdded:f,isBuildingTransaction:d}}});const Je=(0,Ee.A)(Qe,[["render",se]]);var Ye=Je,Ze=a(53751);const et={class:"flex flex-col"},tt={class:"text-xs text-gray-500 text-center -mt-3"},at={class:"divide-y divideBorderColor divideColor mt-5"},lt=["onClick"],st={class:"text-sm labelColor3"},nt=(0,l.Lk)("div",{class:"flex-grow"},null,-1),ot={key:0,class:"h-5 w-5 rounded-full flex justify-center items-center focus:outline-none bg-green-500"},it={key:1,class:"invisible group-hover:visible h-5 w-5 bg-white rounded-full flex justify-center items-center focus:outline-none bg-green-50 dark:bg-dark-3 dark:bg-opacity-50"},rt={class:"flex mt-5"},dt={class:"w-full bg-gray-100 rounded-l dark:bg-dark-3"},ct={class:"flex-none"};function ut(e,t,a,n,o,i){const r=(0,l.g2)("md-icon");return(0,l.uX)(),(0,l.CE)("div",et,[(0,l.Lk)("span",tt,(0,s.v_)(e.$t("customNodeEndpointDescription")),1),(0,l.Lk)("div",at,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.endpoints,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t,onClick:a=>e.setEndpoint(t),class:"flex items-center space-x-4 w-full py-2 group cursor-pointer px-2"},[(0,l.Lk)("span",st,(0,s.v_)(""==t?"Typhon Wallet (Default)":t),1),nt,e.activeEndpoint==t?((0,l.uX)(),(0,l.CE)("div",ot,[(0,l.bF)(r,{icon:e.mdiCheck,class:"text-white",size:18},null,8,["icon"])])):((0,l.uX)(),(0,l.CE)("div",it,[(0,l.bF)(r,{icon:e.mdiCheck,class:"text-green-500",size:18},null,8,["icon"])]))],8,lt)))),128))]),(0,l.Lk)("div",rt,[(0,l.Lk)("div",dt,[(0,l.bo)((0,l.Lk)("input",{type:"text",placeholder:"Endpoint URL","onUpdate:modelValue":t[0]||(t[0]=t=>e.newEndpointURL=t),onKeydown:t[1]||(t[1]=(0,Ze.jR)(((...t)=>e.onAddNewEndpoint&&e.onAddNewEndpoint(...t)),["enter"])),class:"w-full bg-transparent py-2 px-2 text-sm font-normal focus:outline-none rounded-l dark:text-white"},null,544),[[Ze.Jo,e.newEndpointURL]])]),(0,l.Lk)("div",ct,[(0,l.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.onAddNewEndpoint&&e.onAddNewEndpoint(...t)),class:"rounded-r rounded-l-none btn btn-primary btn-md"},(0,s.v_)(e.$t("add")),1)])])])}var pt=a(47443),mt=a(25426),vt=(0,l.pM)({setup(){const e=(0,z.KR)([]),t=(0,z.KR)(""),a=(0,z.KR)(""),s=async()=>{e.value=await(0,pt.Ew)(mt.A.value.NETWORK),t.value=await(0,pt.ip)(mt.A.value.NETWORK),e.value.unshift("")},n=async()=>{const e=a.value?.trim();e.startsWith("http")&&(await(0,pt._R)(e,mt.A.value.NETWORK),await(0,pt.Uq)(e,mt.A.value.NETWORK),a.value="",s())},o=async e=>{await(0,pt.Uq)(e,mt.A.value.NETWORK),s()};return(0,l.sV)((()=>{s()})),{mdiCheck:oe.Tfj,endpoints:e,activeEndpoint:t,newEndpointURL:a,onAddNewEndpoint:n,setEndpoint:o}}});const ft=(0,Ee.A)(vt,[["render",ut]]);var xt=ft,kt=a(67323);const bt={id:"overlay",class:"w-full h-full absolute top-0 left-0 pointer-events-none z-50 flex flex-col items-center justify-center rounded-md bg-gray-200 dark:bg-dark-3 opacity-95"},gt={class:"text-lg labelColor1"},yt={class:"h-full overflow-auto w-full h-full flex flex-col"},Ct={class:"text-red-500 text-center mb-4"},ht={class:"labelColor2 flex flex-col flex-wrap justify-center items-center space-y-4"},Lt={key:0,class:"mt-2 mb-4 text-sm text-red-400"},wt={key:1,class:"mt-2 mb-4 text-sm labelColor1"},At={class:"flex justify-end space-x-4"};function Et(e,t,a,n,o,i){const r=(0,l.g2)("md-icon"),d=(0,l.g2)("AppButtonVue");return(0,l.uX)(),(0,l.CE)("article",{"aria-label":"Import Wallet Settings Modal",class:"relative h-full flex flex-col card2 rounded-md p-8 pb-6",onDrop:t[2]||(t[2]=(0,Ze.D$)(((...t)=>e.dropHandler&&e.dropHandler(...t)),["prevent"])),onDragover:t[3]||(t[3]=(0,Ze.D$)((t=>e.showOverlay=!0),["prevent"])),onDragleave:t[4]||(t[4]=(0,Ze.D$)((t=>e.showOverlay=!1),["prevent"])),onDragenter:t[5]||(t[5]=(0,Ze.D$)((t=>e.showOverlay=!0),["prevent"]))},[(0,l.bo)((0,l.Lk)("div",bt,[(0,l.bF)(r,{icon:e.mdiCloudUpload,size:55,class:"labelColor1"},null,8,["icon"]),(0,l.Lk)("p",gt,(0,s.v_)(e.$t("dropFile")),1)],512),[[Ze.aG,e.showOverlay]]),(0,l.Lk)("section",yt,[(0,l.Lk)("div",Ct,(0,s.v_)(e.$t("importSettingsOverrideMessage")),1),(0,l.Lk)("header",{class:"border-dashed border-2 dark:border-gray-700 rounded-md py-10 flex flex-col justify-center items-center cursor-pointer",onClick:t[1]||(t[1]=t=>e.$refs.file.click())},[(0,l.Lk)("div",ht,[(0,l.Lk)("span",null,(0,s.v_)(e.$t("dragAndDropFile")),1),(0,l.bF)(r,{icon:e.mdiCloudUpload,size:55,class:"labelColor2"},null,8,["icon"])]),(0,l.Lk)("input",{type:"file",ref:"file",accept:".json",class:"hidden",onChange:t[0]||(t[0]=(...t)=>e.fileInputChange&&e.fileInputChange(...t))},null,544)]),e.fileError?((0,l.uX)(),(0,l.CE)("span",Lt,(0,s.v_)(e.fileError),1)):((0,l.uX)(),(0,l.CE)("span",wt,(0,s.v_)(e.uploadedFileData&&e.uploadedFileData.fileName?e.uploadedFileData.fileName:"â€‹"),1))]),(0,l.Lk)("footer",At,[(0,l.bF)(d,{disabled:null===e.uploadedFileData,onClick:e.onImport,class:"btn btn-primary btn-md bg-primary hover:bg-opacity-95",style:{"min-width":"120px"}},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("import")),1)])),_:1},8,["disabled","onClick"]),(0,l.bF)(d,{class:"btn btn-md btn-secondary-outline tracking-wide",style:{"min-width":"120px"},onClick:e.closeModal},{default:(0,l.k6)((()=>[(0,l.eW)((0,s.v_)(e.$t("cancel")),1)])),_:1},8,["onClick"])])],32)}var _t=a(16075),Ft=a.n(_t);const Tt=Ft().object({contacts:Ft().array().required().items({address:Ft().string().required(),name:Ft().string().required(),network:Ft().number().required()}),locale:Ft().string().required()});var Dt=Tt;const Mt=async(e,t)=>{try{return await e.validateAsync(t),""}catch(a){const e=a;return e.details[0].message}};var $t=Mt,Rt=a(97484),Wt=a(92277),St=a(60008),It=(0,l.pM)({components:{AppButtonVue:O.A},setup(){const{t:e}=(0,ce.s9)(),t=(0,St.C)(),a=(0,z.KR)(!1),l=(0,z.KR)(""),s=(0,z.KR)(null),n=async()=>{pe._g.closeDialog()},o=e=>{e.preventDefault(),a.value=!1;const t=e.dataTransfer?.files?e.dataTransfer?.files[0]:null;t&&r(t)},i=e=>{const t=e.target.files?e.target.files[0]:null;t&&r(t)},r=t=>{if(s.value=null,l.value="","application/json"!==t.type)return void(l.value=e("invalidFileTypeError"));let a=new FileReader;a.addEventListener("load",(async()=>{if(a.result&&"string"===typeof a.result)try{const n=JSON.parse(a.result),o=await $t(Dt,n);if(o)return s.value=null,void(l.value=e("invalidContentInFileError"));s.value={...n,fileName:t.name}}catch(n){return s.value=null,void(l.value=e("invalidContentInFileError"))}})),a.readAsText(t)},d=async()=>{s.value&&(s.value.contacts.length>0&&await(0,Rt._R)(s.value.contacts.map((e=>e))),Object.keys(Wt.dI).includes(s.value.locale)&&t.changeLocale({locale:s.value.locale})),pe._g.closeDialog()};return{mdiCloudUpload:oe.PHP,showOverlay:a,uploadedFileData:s,fileError:l,closeModal:n,dropHandler:o,fileInputChange:i,onImport:d}}});const Bt=(0,Ee.A)(It,[["render",Et]]);var Nt=Bt;const jt={class:"flex flex-col justify-center items-center p-5 space-y-10"},Xt={class:"flex flex-col space-y-3"},Kt={class:"text-sm"},zt={class:"flex gap-x-2"},Ot={class:"labelColor4"},Vt={class:"text-sm"},Ht={class:"flex gap-x-2"},Ut={class:"labelColor4"},Pt={class:"text-sm"},qt={class:"flex gap-x-2"},Gt={class:"labelColor4"},Qt={class:"flex items-center space-x-2.5"},Jt={class:"text-sm font-medium rounded-md text-white"};function Yt(e,t,a,n,o,i){const r=(0,l.g2)("md-icon"),d=(0,l.g2)("font-awesome-icon"),c=(0,l.g2)("app-button");return(0,l.uX)(),(0,l.CE)("div",jt,[(0,l.bF)(r,{icon:e.mdiInformation,class:"text-primary",size:70},null,8,["icon"]),(0,l.Lk)("div",Xt,[(0,l.Lk)("div",Kt,[(0,l.Lk)("div",zt,[(0,l.Lk)("div",null,[(0,l.bF)(d,{icon:"circle",class:"h-3 w-3 text-primary","aria-hidden":"true"})]),(0,l.Lk)("div",Ot,(0,s.v_)(e.$t("exportSettingsMessage1")),1)])]),(0,l.Lk)("div",Vt,[(0,l.Lk)("div",Ht,[(0,l.Lk)("div",null,[(0,l.bF)(d,{icon:"circle",class:"h-3 w-3 text-primary","aria-hidden":"true"})]),(0,l.Lk)("div",Ut,(0,s.v_)(e.$t("exportSettingsMessage2")),1)])]),(0,l.Lk)("div",Pt,[(0,l.Lk)("div",qt,[(0,l.Lk)("div",null,[(0,l.bF)(d,{icon:"circle",class:"h-3 w-3 text-primary","aria-hidden":"true"})]),(0,l.Lk)("div",Gt,(0,s.v_)(e.$t("exportSettingsMessage3")),1)])])]),(0,l.bF)(c,{onClick:e.exportSettings,class:"btn btn-primary btn-md capitalize bg-primary hover:bg-opacity-95"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",Qt,[(0,l.bF)(r,{icon:e.mdiDownload,size:15,class:"text-white"},null,8,["icon"]),(0,l.Lk)("span",Jt,(0,s.v_)(e.$t("download")),1)])])),_:1},8,["onClick"])])}var Zt=(0,l.pM)({components:{AppButton:O.A},setup(){const e=(0,St.C)(),t=async()=>{const t={contacts:[],locale:e.locale||""},a=await(0,Rt.kK)();a.forEach((e=>{t.contacts.push(e)}));let l=JSON.stringify(t),s="typhonWalletSettings.json",n=document.createElement("a");n.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(l)),n.setAttribute("download",s),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)};return{mdiInformation:oe.Rjk,mdiDownload:oe.XCd,exportSettings:t}}});const ea=(0,Ee.A)(Zt,[["render",Yt]]);var ta=ea;const aa={class:"flex flex-col justify-center items-center p-5 space-y-7"},la={class:"flex flex-col space-y-3"},sa={class:"labelColor4 text-sm text-center"},na={class:"flex flex-wrap gap-y-2 gap-x-4 justify-center"},oa={class:"sm:flex-1 flex flex-col items-stretch order-2 sm:order-none space-y-2"},ia={id:"receiveAddress",class:"p-2 card2 flex-grow flex flex-col items-center justify-between"},ra={class:"break-all tracking-wide text-sm font-mono labelColor4"};function da(e,t,a,n,o,i){const r=(0,l.g2)("md-icon");return(0,l.uX)(),(0,l.CE)("div",aa,[(0,l.bF)(r,{icon:e.mdiInformation,class:"text-primary",size:70},null,8,["icon"]),(0,l.Lk)("div",la,[(0,l.Lk)("div",sa,(0,s.v_)(e.$t("exportXPubWarningMessage")),1)]),(0,l.Lk)("div",na,[(0,l.Lk)("div",oa,[(0,l.Lk)("div",ia,[(0,l.Lk)("span",ra,(0,s.v_)(e.activeAccountXPub),1),(0,l.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.copyXPub&&e.copyXPub(...t)),class:"mt-3 text-xs py-2 btn bg-white dark:bg-dark dark:border-none hover:bg-opacity-10 dark:hover:bg-opacity-80 border border-primary-10 w-full uppercase text-primary font-medium"},(0,s.v_)(e.xpubCopied?e.$t("copied"):e.$t("copy")),1)])])])])}var ca=(0,l.pM)({setup(){const e=(0,z.KR)(!1),t=(0,Le.G)(),a=(0,l.EW)((()=>t.activeAccount?.xpub.toBytes().toString("hex")??"")),s=async()=>{e.value=!0,(0,he.eM)(a.value),setTimeout((()=>{e.value=!1}),1e3)};return{mdiInformation:oe.Rjk,copyXPub:s,activeAccountXPub:a,xpubCopied:e}}});const ua=(0,Ee.A)(ca,[["render",da]]);var pa=ua,ma={rE:"3.2.0"},va=(0,l.pM)({components:{AppButtonVue:O.A,LanguageSelection:kt.A},setup(){const{t:e}=(0,ce.s9)(),t=(0,z.KR)(!1),a=(0,z.KR)(mt.A.value.IS_EXTENSION),s=(0,Le.G)(),n=(0,l.EW)((()=>s.activeAccount)),o=(0,l.EW)((()=>n.value.pendingOperations.length>0)),i=async()=>{pe._g.openDialog({component:Ye,size:pe.sD.lg,title:"",titleStyle:"margin:0px",style:"padding:0px;overflow: auto;",props:{isForWeb:!0}})},r=async()=>{pe._g.openDialog({component:xt,size:pe.sD.lg,title:e("customNodeEndpoint")})},d=()=>{pe._g.openDialog({component:ta,size:pe.sD["2xl"]})},c=()=>{pe._g.openDialog({component:Nt,title:e("importWalletSettings"),size:pe.sD["2xl"]})},u=()=>{pe._g.openDialog({component:pa,size:pe.sD.lg})},p=ma.rE;return{isTransactionLoading:t,manageCollateral:i,openImportSettingsModal:c,openExportSettingsModal:d,manageCustomNodeEndpoint:r,isExtension:a,isTransactionPending:o,mdiDownload:oe.XCd,mdiImport:oe.gAK,walletVersion:p,copyAccountXPub:u}}});const fa=(0,Ee.A)(va,[["render",K]]);var xa=fa}}]);