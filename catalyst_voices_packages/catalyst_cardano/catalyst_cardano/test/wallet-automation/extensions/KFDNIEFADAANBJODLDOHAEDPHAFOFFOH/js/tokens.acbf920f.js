"use strict";(this["webpackChunktyphon"]=this["webpackChunktyphon"]||[]).push([[729],{71208:function(e,t,s){s.r(t),s.d(t,{default:function(){return It}});var a=s(20641),l=s(90033);const n={class:"card flex flex-col p-0"},o={class:"relative rounded-lg flex divide-x divideColor","aria-label":"Tabs"},r=["onClick","aria-current"],c={class:"bg-primary-10 dark:bg-dark-3 hidden ml-3 py-0.5 px-2.5 rounded-full text-xs font-medium md:inline-block"},i={class:"p-2"};function d(e,t,s,d,u,p){const m=(0,a.g2)("TokensTab"),k=(0,a.g2)("NFTsTab");return(0,a.uX)(),(0,a.CE)("div",n,[(0,a.Lk)("nav",o,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.tabs,((t,s)=>((0,a.uX)(),(0,a.CE)("button",{key:t.name,onClick:()=>{e.changeTab(t.value)},class:(0,l.C4)([[0===s?"rounded-l-lg":"",s===e.tabs.length-1?"rounded-r-lg":""],"group relative overflow-hidden labelColor3 py-4 px-4 text-sm font-medium text-center hover:bg-primary-2 dark:hover:bg-opacity-5 focus:z-10 focus:outline-none"]),style:{"min-width":"200px"},"aria-current":e.currentTab==t.value?"page":void 0},[(0,a.Lk)("span",null,(0,l.v_)(t.name),1),(0,a.Lk)("span",c,(0,l.v_)(t.count),1),(0,a.Lk)("span",{"aria-hidden":"true",class:(0,l.C4)([e.currentTab==t.value?"bg-primary":"bg-transparent","absolute inset-x-0 bottom-0 h-0.5"])},null,2)],10,r)))),128))]),(0,a.Lk)("div",i,["tokens"==e.currentTab?((0,a.uX)(),(0,a.Wv)(m,{key:0})):((0,a.uX)(),(0,a.Wv)(k,{key:1}))])])}var u=s(53751);const p={key:0,class:"flex flex-col items-center justify-center py-40"},m={class:"mt-3 font-medium text-primary-30 text-xl"},k={key:1,class:"flex flex-col pt-2"},g={class:"flex items-center justify-between w-full"},v={class:"flex rounded-md bg-primary-3 dark:bg-dark-3"},f={class:"pl-3 flex items-center pointer-events-none"},x=["placeholder"],b=["disabled"],y={class:"flex items-center justify-between space-x-3"},h={class:"font-medium"},w={class:"mt-6 pb-56 flex-grow flex overflow-x-auto card2"},L={class:"min-w-full table-auto divide-y divideColor"},C={class:"sticky top-0 bg-primary-6 dark:bg-dark z-10 shadow-sm text-xs labelColor3"},T={scope:"col",class:"w-full px-6 py-3 text-left font-medium uppercase tracking-wider"},A={scope:"col",class:"px-6 py-3 text-center font-medium uppercase tracking-wider"},I={scope:"col",class:"px-6 py-3 text-center font-medium uppercase tracking-wider"},E={scope:"col",class:"px-6 py-3 text-center font-medium uppercase tracking-wider"},F={class:"text-sm divide-y divideColor dark:divide-dark-2"},N={class:"p-2 w-full"},$={class:"flex items-center space-x-2"},S={class:"w-9 h-9 rounded-full flex items-center justify-center bg-primary-10 dark:bg-dark"},M=["src"],_={key:1},X={class:"p-2"},W={class:"bg-primary-10 dark:bg-dark py-1 px-3 rounded-md text-center"},j={class:"text-center p-2"},B={class:"text-center p-2"},G=["onClick"],V={class:"font-medium"};function z(e,t,s,n,o,r){const c=(0,a.g2)("md-icon"),i=(0,a.g2)("SearchIcon"),d=(0,a.g2)("token-details"),z=(0,a.g2)("AppPopover"),D=(0,a.gN)("middle-truncate");return 0==e.filteredTokens.length&&""==e.search?((0,a.uX)(),(0,a.CE)("div",p,[(0,a.bF)(c,{icon:e.circleIcon,size:75,class:"text-primary-30"},null,8,["icon"]),(0,a.Lk)("span",m,(0,l.v_)(e.$t("noTokens")),1)])):((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("div",g,[(0,a.Lk)("div",v,[(0,a.Lk)("div",f,[(0,a.bF)(i,{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})]),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"placeholder-gray-500 focus:outline-none p-3 text-xs w-full bg-white bg-opacity-0 dark:text-white w-[600px] max-w-full",placeholder:e.$t("tokensSearch"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t)},null,8,x),[[u.Jo,e.search]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.sendSelectedTokens&&e.sendSelectedTokens(...t)),class:(0,l.C4)(["rounded-xl py-3 shadow-sm text-center text-xs text-white pl-4 pr-2",e.isAnyTokenSelected?"bg-primary hover:bg-opacity-90":"bg-gray-400"]),disabled:!e.isAnyTokenSelected},[(0,a.Lk)("div",y,[(0,a.Lk)("span",h,(0,l.v_)(e.$t("sendSelectedTokens")),1),(0,a.bF)(c,{icon:e.mdiSend,size:20},null,8,["icon"])])],10,b)]),(0,a.Lk)("div",w,[(0,a.Lk)("table",L,[(0,a.Lk)("thead",null,[(0,a.Lk)("tr",C,[(0,a.Lk)("th",T,(0,l.v_)(e.$t("assetId")),1),(0,a.Lk)("th",A,(0,l.v_)(e.$t("token")),1),(0,a.Lk)("th",I,(0,l.v_)(e.$t("balance")),1),(0,a.Lk)("th",E,(0,l.v_)(e.$t("action")),1)])]),(0,a.Lk)("tbody",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.filteredTokens,((t,s)=>((0,a.uX)(),(0,a.CE)("tr",{key:s,class:"text-xs labelColor3 dark:bg-dark-3"},[(0,a.Lk)("td",N,[(0,a.bF)(z,{class:"max-w-lg"},{button:(0,a.k6)((()=>[(0,a.Lk)("div",$,[(0,a.Lk)("div",S,[e.getAssetLogo(t)?((0,a.uX)(),(0,a.CE)("img",{key:0,class:"object-contain m-1",src:e.getAssetLogo(t),alt:""},null,8,M)):((0,a.uX)(),(0,a.CE)("span",_,"T"))]),(0,a.Lk)("div",null,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("span",null,[(0,a.eW)((0,l.v_)(e.$filters.getAssetId(t)),1)])),[[D,50]])])])])),popup:(0,a.k6)((()=>[(0,a.bF)(d,{token:t},null,8,["token"])])),_:2},1024)]),(0,a.Lk)("td",null,[(0,a.bF)(z,{class:"max-w-lg",placement:"right"},{button:(0,a.k6)((()=>[(0,a.Lk)("div",X,[(0,a.Lk)("span",W,(0,l.v_)(e.getBadgeTitle(t)),1)])])),popup:(0,a.k6)((()=>[(0,a.bF)(d,{token:t},null,8,["token"])])),_:2},1024)]),(0,a.Lk)("td",j,(0,l.v_)(e.getFormattedAssetValue(t)),1),(0,a.Lk)("td",B,[(0,a.Lk)("button",{onClick:s=>e.toggleSelection(t),class:(0,l.C4)(["w-full rounded py-1.5 shadow-sm text-center text-xs flex items-center justify-between pl-2.5 pr-1 rounded-md",e.selectedTokens[t.assetId]?"bg-primary text-white hover:bg-opacity-90":"border border-primary text-primary hover:bg-white dark:hover:bg-dark-2"])},[(0,a.Lk)("span",V,(0,l.v_)(e.$t("select")),1),(0,a.bF)(c,{icon:e.selectIcon,size:20},null,8,["icon"])],10,G)])])))),128))])])])]))}function D(e,t){return(0,a.uX)(),(0,a.Wv)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,a.bF)("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])}var K=s(85278),R=s(28686),U=(s(44114),s(50953)),q=s(27066),H=s(9165),P=s(46166),O=s(15376);const J=()=>{const e=(0,P.rd)(),t=(0,O.G)(),s=(0,a.EW)((()=>t.activeAccount)),l=(0,U.KR)(""),n=(0,a.EW)((()=>t.activeAccount?.tokenRegistry??{})),o=(0,a.EW)((()=>t.activeAccount?.nftMetadata??{})),r=(0,a.EW)((()=>s.value.tokenBalance.map((e=>({...e,assetId:(0,q.Gc)(e)}))))),c=(0,a.EW)((()=>{const e=r.value.filter((e=>void 0===o.value[(0,q.Gc)(e)]||e.amount.gt(1)));return e.filter((e=>e.policyId.includes(l.value)||(0,q.Gc)(e).includes(l.value)||(0,q.ei)(e).includes(l.value)||(0,q.$m)(e.assetName).toLowerCase().includes(l.value.toLowerCase())||e.assetName.toLowerCase().includes(l.value.toLowerCase())))})),i=t=>{e.push({path:"/wallet",query:{action:"addToken",assetId:(0,q.Gc)(t)}})},d=e=>(0,q.GM)(e,n.value),u=e=>{const t=n.value[(0,q.Gc)(e)];return t&&t.logo?`data:image/png;base64,${t.logo}`:""},p=e=>{if(e.assetName)return(0,q.$m)(e.assetName);const t=(0,q.ei)(e);return`${t.slice(0,14)}...${t.slice(t.length-5)}`};return{circleIcon:H.h$D,search:l,filteredTokens:c,addToken:i,getFormattedAssetValue:d,getAssetLogo:u,getBadgeTitle:p}};var Q=s(89318);const Y={class:"flex flex-col"},Z={class:"pl-2 mb-1"},ee={class:"text-xs labelColor2"},te={key:0,class:"flex flex-col mt-5 space-y-3"},se={class:"flex p-2 justify-between"},ae={class:"flex flex-col space-y-1"},le={class:"text-xs labelColor2"},ne={class:"text-xs font-medium labelColor3"},oe={class:"flex flex-col space-y-1 items-end"},re={class:"text-xs labelColor2 capitalize"},ce={class:"text-xs font-medium labelColor3"},ie={class:"w-full flex"},de={class:"px-2 py-1 flex items-center bg-primary-1 dark:bg-dark-3"},ue=["onClick"],pe={class:"pl-2 mt-2 mb-1"},me={class:"text-xs labelColor2"},ke={class:"flex border border-primary-8 dark:border-none rounded-md overflow-hidden"},ge={class:"text-xs my-3"},ve=["innerHTML"],fe={class:"flex mt-5"};function xe(e,t,s,n,o,r){const c=(0,a.g2)("addressFieldVue"),i=(0,a.g2)("AssetInputVue"),d=(0,a.g2)("AppButtonVue");return(0,a.uX)(),(0,a.CE)("div",Y,[(0,a.Lk)("div",Z,[(0,a.Lk)("span",ee,(0,l.v_)(e.$t("enterAddress")),1)]),(0,a.bF)(c,{address:e.sendAddr,"onUpdate:address":t[0]||(t[0]=t=>e.sendAddr=t),adaHandle:e.adaHandle,showLoader:e.isAdahandleResolving},null,8,["address","adaHandle","showLoader"]),e.tokens.length?((0,a.uX)(),(0,a.CE)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.assetIdToTokensMapWithAmount,((t,s)=>((0,a.uX)(),(0,a.CE)("div",{key:s,class:"w-full flex flex-col bg-primary-1 dark:bg-dark-3 border border-primary-8 dark:border-none divide-y divideColor rounded-md overflow-hidden"},[(0,a.Lk)("div",se,[(0,a.Lk)("div",ae,[(0,a.Lk)("span",le,(0,l.v_)(e.$t("asset")),1),(0,a.Lk)("span",ne,(0,l.v_)(e.getBadgeTitle(t)),1)]),(0,a.Lk)("div",oe,[(0,a.Lk)("span",re,(0,l.v_)(e.$t("totalBalance")),1),(0,a.Lk)("span",ce,(0,l.v_)(e.getTokenBalance(t)),1)])]),(0,a.Lk)("div",ie,[(0,a.bF)(i,{class:"px-4 py-1",ref_for:!0,ref:"assetInput",decimals:e.getAssetDecimals(t),assetValue:t.amount.toString(),"onUpdate:assetValue":t=>{e.onUpdateTokenAmount(t,s)}},null,8,["decimals","assetValue","onUpdate:assetValue"]),(0,a.Lk)("div",de,[(0,a.Lk)("button",{onClick:t=>e.setMaxTokenAmount(s),class:"py-2 px-3 bg-primary-10 hover:bg-primary-9 dark:bg-dark-2 labelColor3 text-xs rounded-md capitalize focus:outline-none"},(0,l.v_)(e.$t("setMax")),9,ue)])])])))),128))])):(0,a.Q3)("",!0),(0,a.Lk)("div",pe,[(0,a.Lk)("span",me,"ADA "+(0,l.v_)(e.$t("amount")),1)]),(0,a.Lk)("div",ke,[(0,a.bF)(i,{class:"px-4 py-3",ref:"adaInput",decimals:6,assetValue:e.amount,"onUpdate:assetValue":t[1]||(t[1]=t=>e.amount=t)},null,8,["assetValue"])]),(0,a.Lk)("div",ge,[(0,a.Lk)("span",{class:(0,l.C4)(["rounded-full px-4 py-1 text-white",[e.errorMeta?`bg-red-400 ${e.errorMeta.styleClass}`:"",e.errorMeta?.onClick?"cursor-pointer":""]]),onClick:t[2]||(t[2]=(...t)=>e.errorMeta?.onClick&&e.errorMeta?.onClick(...t)),innerHTML:e.errorMeta?.message??"â€‹"},null,10,ve)]),(0,a.Lk)("div",fe,[(0,a.bF)(d,{class:"text-sm btn btn-md border border-primary bg-primary text-white hover:bg-opacity-90 disabled:hover:bg-opacity-100 dark:disabled:bg-dark-4 dark:border-none tracking-wide w-full",onClick:e.buildTransaction,disabled:!e.enableSendButton,isLoading:e.isTransactionBuilding},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)(e.$t("continue")),1)])),_:1},8,["onClick","disabled","isLoading"])])])}var be=s(18731),ye=s(25734),he=s(36327),we=s(61212),Le=s(60346),Ce=s(63723),Te=(0,a.pM)({props:{nfts:{type:Object,default:[]},tokens:{type:Object,default:[]}},components:{addressFieldVue:he.A,AssetInputVue:ye.A,AppButtonVue:be.A},setup(e){const t=(0,we.X)(),s=(0,O.G)(),l=(0,a.EW)((()=>s.activeAccount)),n=(0,a.EW)((()=>l.value.tokenRegistry)),o=(0,U.KR)([]);o.value=e.tokens.map((e=>({...e,amount:new Le.A(0)})));const r=e.tokens.reduce(((e,t)=>(e[(0,Ce.getAssetId)(t)]=t,e)),{});(0,a.wB)(o,(()=>{t.setAllTokens(o.value.filter((e=>new Le.A(e.amount).isGreaterThan("0"))).map((e=>({...e,amount:new Le.A(e.amount)}))))}),{deep:!0}),(0,a.sV)((()=>{e.nfts.forEach((e=>{t.addToken({policyId:e.policyId,assetName:e.assetName,amount:new Le.A(1)})}))}));const c=e=>{const t=n.value[(0,Ce.getAssetId)(e)],s=t&&t.decimals?t.decimals:0;return(0,q.tj)(r[(0,Ce.getAssetId)(e)].amount,s).toFixed(s)},i=e=>{const t=n.value[(0,Ce.getAssetId)(e)];return t&&t.decimals?t.decimals:0},d=e=>{if(e.assetName)return(0,q.$m)(e.assetName);const t=(0,q.ei)({assetName:e.assetName,policyId:e.policyId,amount:e.amount});return`${t.slice(0,14)}...${t.slice(t.length-5)}`},u=e=>{const t=o.value[e];o.value[e].amount=r[(0,Ce.getAssetId)(t)].amount},p=(e,t)=>{new Le.A(e).isNaN()?o.value[t].amount=new Le.A("0"):o.value[t].amount=new Le.A(e)};return{...t,getTokenBalance:c,getAssetDecimals:i,getBadgeTitle:d,assetIdToTokensMapWithAmount:o,assetIdToTokensMap:r,setMaxTokenAmount:u,onUpdateTokenAmount:p}}}),Ae=s(66262);const Ie=(0,Ae.A)(Te,[["render",xe]]);var Ee=Ie,Fe=s(48156),Ne=(0,a.pM)({name:"TokensTab",components:{TokenDetails:K.A,AppPopover:R.A,SearchIcon:D},setup(){const e=J(),t=(0,U.KR)({}),{t:s}=(0,Fe.s9)(),l=e=>{t.value[e.assetId]?t.value[e.assetId]=!1:t.value[e.assetId]=!0},n=(0,a.EW)((()=>{const e=Object.values(t.value);return e.some((e=>!!e))})),o=()=>{const a=e.filteredTokens.value.filter((e=>!!t.value[e.assetId]));Q._g.openDialog({title:s("transaction"),component:Ee,size:Q.sD.lg,props:{tokens:a}})};return{...e,selectedTokens:t,selectIcon:H.rvk,toggleSelection:l,sendSelectedTokens:o,isAnyTokenSelected:n,mdiSend:H.hI8}}});const $e=(0,Ae.A)(Ne,[["render",z]]);var Se=$e;const Me={key:0,class:"flex flex-col items-center justify-center py-40"},_e={class:"mt-3 font-medium text-primary-30 text-xl"},Xe={key:1,class:"flex flex-col pt-1 items-start"},We={class:"flex items-center justify-between w-full"},je={class:"flex rounded-md bg-primary-3 dark:bg-dark-3"},Be={class:"pl-3 flex items-center pointer-events-none"},Ge=["placeholder"],Ve=["disabled"],ze={class:"flex items-center justify-between space-x-3"},De={class:"font-medium"},Ke={class:"mt-6 flex flex-col w-full"},Re={class:"rounded-lg flex items-center justify-between rounded-md px-3 py-2 bg-gray-100 dark:bg-dark-1"},Ue={class:"flex items-center"},qe=(0,a.Lk)("span",{class:"text-xs font-medium labelColor3"},"Policy",-1),He={class:"text-xs font-medium labelColor2 ml-3"},Pe=["onClick"],Oe={class:"flex items-center justify-between pl-2.5 pr-1 space-x-3"},Je={class:"font-medium"},Qe={class:"flex flex-row items-stretch flex-wrap gap-y-2 gap-x-2 p-3"},Ye=["onClick"],Ze=["src","alt","onerror"],et=["src","alt","onerror"],tt=["href"],st={class:"mt-3 flex flex-col w-48 items-start labelColor3"},at={class:"text-xs font-medium"},lt=(0,a.Lk)("div",{class:"flex-grow"},null,-1),nt={class:"mt-4 w-48 flex space-x-1"},ot={class:"w-full"},rt={class:"w-full border border-primary rounded py-1.5 shadow-sm text-primary text-center text-xs hover:bg-white dark:hover:bg-dark-2 flex items-center justify-between pl-2.5 pr-1 rounded-md"},ct={class:"font-medium"},it={class:"w-full"},dt=["onClick"],ut={class:"font-medium"};function pt(e,t,s,n,o,r){const c=(0,a.g2)("md-icon"),i=(0,a.g2)("SearchIcon"),d=(0,a.g2)("token-details"),p=(0,a.g2)("AppPopover"),m=(0,a.gN)("end-truncate"),k=(0,a.gN)("tippy");return 0==e.filteredTokens.length&&""==e.search?((0,a.uX)(),(0,a.CE)("div",Me,[(0,a.bF)(c,{icon:e.squareIcon,size:75,class:"text-primary-30"},null,8,["icon"]),(0,a.Lk)("span",_e,(0,l.v_)(e.$t("noNFTS")),1)])):((0,a.uX)(),(0,a.CE)("div",Xe,[(0,a.Lk)("div",We,[(0,a.Lk)("div",je,[(0,a.Lk)("div",Be,[(0,a.bF)(i,{class:"h-5 w-5 text-gray-500","aria-hidden":"true"})]),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"placeholder-gray-500 focus:outline-none p-3 text-xs w-full bg-white bg-opacity-0 dark:text-white w-[600px] max-w-full",placeholder:e.$t("nftSearch"),"onUpdate:modelValue":t[0]||(t[0]=t=>e.search=t)},null,8,Ge),[[u.Jo,e.search]])]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.sendSelectedNFTs&&e.sendSelectedNFTs(...t)),class:(0,l.C4)(["rounded-xl py-3 shadow-sm text-center text-xs text-white pl-4 pr-2",e.isAnyNFTSelected?"bg-primary hover:bg-opacity-90":"bg-gray-400"]),disabled:!e.isAnyNFTSelected},[(0,a.Lk)("div",ze,[(0,a.Lk)("span",De,(0,l.v_)(e.$t("sendSelectedNFTs")),1),(0,a.bF)(c,{icon:e.mdiSend,size:20},null,8,["icon"])])],10,Ve)]),(0,a.Lk)("div",Ke,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.groupedByPolicyNFTs,((s,n)=>((0,a.uX)(),(0,a.CE)("div",{key:n,class:"flex flex-col mb-5"},[(0,a.Lk)("div",Re,[(0,a.Lk)("div",Ue,[qe,(0,a.Lk)("span",He,(0,l.v_)(n),1)]),(0,a.Lk)("button",{onClick:t=>e.toggleCollectionSelection(n),class:(0,l.C4)(["rounded-lg py-2 shadow-sm text-center text-xs",e.selectedCollections[n]?"bg-primary text-white hover:bg-opacity-90":"border border-primary text-primary hover:bg-white dark:hover:bg-dark-2"])},[(0,a.Lk)("div",Oe,[(0,a.Lk)("span",Je,(0,l.v_)(e.$t("selectCollection")),1),(0,a.bF)(c,{icon:e.selectIcon,size:20},null,8,["icon"])])],10,Pe)]),(0,a.Lk)("div",Qe,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(s,(s=>((0,a.uX)(),(0,a.CE)("div",{key:s.assetId,class:(0,l.C4)(["flex flex-col items-start p-2 rounded-md rounded-lg bg-primary-4 dark:bg-dark-3 dark:border-none",e.selectedNFTs[s.assetId]?"border-2 border-primary-50":""])},[(0,a.Lk)("div",{class:"self-center w-48 h-48 relative flex justify-center text-xs cursor-pointer",onClick:()=>e.openViewNFTModal(e.getImageUrl(s))},["base64"==e.nftMetadata[e.$filters.getAssetId(s)].imageType?((0,a.uX)(),(0,a.CE)("img",{key:0,class:"h-full w-auto",src:e.nftMetadata[e.$filters.getAssetId(s)].image,alt:e.$t("imageNotAvailable"),onerror:e=>{e.target.style["padding-top"]="80px"}},null,8,Ze)):"ipfs"==e.nftMetadata[e.$filters.getAssetId(s)].imageType?((0,a.uX)(),(0,a.CE)("img",{key:1,class:"h-full w-auto",src:"https://image-optimizer.jpgstoreapis.com/"+e.nftMetadata[e.$filters.getAssetId(s)].image,alt:e.$t("imageNotAvailable"),onerror:t=>{t.target.src=`https://cloudflare-ipfs.com/ipfs/${e.nftMetadata[e.$filters.getAssetId(s)].image}`}},null,8,et)):(0,a.Q3)("",!0),(0,a.Lk)("div",{onClick:t[2]||(t[2]=(0,u.D$)((()=>{}),["stop"]))},[(0,a.Lk)("a",{target:"_blank",href:`${e.$env.explorer}token/${s.assetId}`,class:"absolute top-1 right-1 h-6 w-6 flex rounded justify-center items-center bg-primary hover:bg-opacity-90"},[(0,a.bF)(c,{icon:e.expandIcon,size:18,class:"text-white"},null,8,["icon"])],8,tt)])],8,Ye),(0,a.Lk)("div",st,[(0,a.bo)(((0,a.uX)(),(0,a.CE)("span",at,[(0,a.eW)((0,l.v_)(e.getNftName(s)),1)])),[[m,23],[k,{content:e.getNftName(s)}]])]),lt,(0,a.Lk)("div",nt,[(0,a.Lk)("div",ot,[(0,a.bF)(p,{class:"max-w-lg"},{button:(0,a.k6)((()=>[(0,a.Lk)("button",rt,[(0,a.Lk)("span",ct,(0,l.v_)(e.$t("more")),1),(0,a.bF)(c,{icon:e.mdiMenuDown,size:20},null,8,["icon"])])])),popup:(0,a.k6)((()=>[(0,a.bF)(d,{token:s,description:e.getNftDescription(s)},null,8,["token","description"])])),_:2},1024)]),(0,a.Lk)("div",it,[(0,a.Lk)("button",{onClick:t=>e.toggleSelection(s),class:(0,l.C4)(["w-full rounded py-1.5 shadow-sm text-center text-xs flex items-center justify-between pl-2.5 pr-1 rounded-md",e.selectedNFTs[s.assetId]?"bg-primary text-white hover:bg-opacity-90":"border border-primary text-primary hover:bg-white dark:hover:bg-dark-2"])},[(0,a.Lk)("span",ut,(0,l.v_)(e.$t("select")),1),(0,a.bF)(c,{icon:e.selectIcon,size:20},null,8,["icon"])],10,dt)])])],2)))),128))])])))),128))])]))}const mt={class:"h-full flex items-center justify-center"},kt=["src","alt","onerror"];function gt(e,t,s,l,n,o){return(0,a.uX)(),(0,a.CE)("div",mt,[(0,a.Lk)("img",{src:e.imageUrl,style:{height:"600px",width:"800px"},class:"object-contain",alt:e.$t("imageNotAvailable"),onerror:e=>{e.target.style["padding-top"]="80px"}},null,8,kt)])}var vt=(0,a.pM)({props:{imageUrl:String}});const ft=(0,Ae.A)(vt,[["render",gt]]);var xt=ft,bt=s(2543),yt=s.n(bt);const ht=()=>{const e=(0,P.rd)(),t=(0,O.G)(),s=(0,a.EW)((()=>t.activeAccount)),l=(0,U.KR)(""),n=(0,U.KR)(20),o=(0,U.KR)(0),r=(0,U.KR)(0),c=(0,a.EW)((()=>s.value.tokenRegistry)),i=(0,a.EW)((()=>s.value.nftMetadata)),d=(0,a.EW)((()=>s.value.tokenBalance.map((e=>({...e,assetId:(0,q.Gc)(e)}))))),u=(0,a.EW)((function(){const e=d.value.filter((e=>void 0!==i.value[(0,q.Gc)(e)]&&e.amount.eq(1)));return e.filter((e=>e.policyId.includes(l.value)||(0,q.Gc)(e).includes(l.value)||(0,q.ei)(e).includes(l.value)||(0,q.$m)(e.assetName).toLowerCase().includes(l.value.toLowerCase())||e.assetName.toLowerCase().includes(l.value.toLowerCase())))})),p=(0,U.KR)([]);(0,a.wB)(u,((e,t)=>{yt().isEqual(e,t)||(o.value=1,m())}));const m=()=>{1==o.value&&(p.value=[]);const e=(o.value-1)*n.value,t=u.value.slice(e,e+n.value);p.value.push(...t)},k=()=>{p.value.length!=u.value.length&&(o.value++,m())},g=t=>{e.push({path:"/wallet",query:{action:"addToken",assetId:(0,q.Gc)(t)}})},v=e=>{Q._g.openDialog({component:xt,size:Q.sD.maxContent,style:"margin: 0px; padding: 0px;",titleStyle:"margin: 0px;",props:{imageUrl:e}})},f=e=>{const t=i.value[(0,q.Gc)(e)];return"base64"==t.imageType?t.image:"https://image-optimizer.jpgstoreapis.com/"+t.image},x=e=>{const t=i.value[(0,q.Gc)(e)];return t.name?t.name:""},b=e=>{const t=i.value[(0,q.Gc)(e)];return t.description?t.description:""};return{addToken:g,getImageUrl:f,getNftName:x,openViewNFTModal:v,getNftDescription:b,tokenRegistryMetadata:c,nftMetadata:i,tokens:d,filteredTokens:u,paginatedTokens:p,expandIcon:H.gs2,circleIcon:H.h$D,squareIcon:H.MkY,search:l,limit:n,pageNo:o,count:r,loadNextPage:k}};var wt=(0,a.pM)({name:"TokensTab",components:{TokenDetails:K.A,AppPopover:R.A,SearchIcon:D},setup(){const{t:e}=(0,Fe.s9)(),{loadNextPage:t,paginatedTokens:s,...l}=ht(),n=(0,U.KR)({}),o=(0,U.KR)({}),r=(0,a.EW)((()=>{const e=Object.values(n.value);return e.some((e=>!!e))})),c=(0,a.EW)((()=>yt().groupBy(s.value,(e=>e.policyId)))),i=()=>{const e=document.querySelector("#lc");e&&(e.scrollHeight>e.clientHeight||(t(),d()))},d=yt().debounce(i,500),u=()=>{const e=document.querySelector("#lc");e&&e.scrollTop+e.clientHeight>=e.scrollHeight-100&&t()},p=yt().debounce(u,100);(0,a.hi)((()=>{document.getElementById("lc")?.removeEventListener("scroll",p,!0)})),(0,a.sV)((()=>{document.getElementById("lc")?.addEventListener("scroll",p,!0),t(),t(),d()}));const m=e=>{n.value[e.assetId]?n.value[e.assetId]=!1:n.value[e.assetId]=!0},k=e=>{o.value[e]?(o.value[e]=!1,c.value[e].forEach((e=>{n.value[e.assetId]=!1}))):(o.value[e]=!0,c.value[e].forEach((e=>{n.value[e.assetId]=!0})))},g=()=>{const t=s.value.filter((e=>!!n.value[e.assetId]));Q._g.openDialog({title:e("transaction"),component:Ee,size:Q.sD.lg,props:{nfts:t}})};return{paginatedTokens:s,...l,groupedByPolicyNFTs:c,selectIcon:H.rvk,mdiMenuDown:H._Sc,selectedNFTs:n,toggleSelection:m,selectedCollections:o,toggleCollectionSelection:k,sendSelectedNFTs:g,isAnyNFTSelected:r,mdiSend:H.hI8}}});const Lt=(0,Ae.A)(wt,[["render",pt]]);var Ct=Lt,Tt=(0,a.pM)({name:"Tokens List",components:{TokensTab:Se,NFTsTab:Ct},setup(){const e=(0,U.KR)("nft"),{t:t}=(0,Fe.s9)(),s=(0,O.G)(),l=(0,a.EW)((()=>s.activeAccount?.nftMetadata??{}));function n(t){e.value=t}const o=(0,a.EW)((()=>(s.activeAccount?.tokenBalance??[]).map((e=>({...e,assetId:(0,q.Gc)(e)}))))),r=(0,a.EW)((()=>{const e=o.value.filter((e=>void 0===l.value[(0,q.Gc)(e)]||e.amount.gt(1))).length,s=o.value.filter((e=>void 0!==l.value[(0,q.Gc)(e)]&&e.amount.eq(1))).length;return[{name:t("nfts"),value:"nft",count:s},{name:t("tokens"),value:"tokens",count:e}]}));return{tabs:r,currentTab:e,changeTab:n}}});const At=(0,Ae.A)(Tt,[["render",d]]);var It=At}}]);