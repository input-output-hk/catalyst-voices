"use strict";(this["webpackChunktyphon"]=this["webpackChunktyphon"]||[]).push([[378],{83686:function(e,t,a){a.r(t),a.d(t,{default:function(){return Da}});var s=a(20641),l=a(90033);const n={class:"card flex flex-col w-full"},o={class:"ml-2 page-title labelColor3"},i={key:0,class:"text-sm mt-5 p-10 flex flex-col border border-primary-8 dark:border-dark-3 rounded-lg w-full max-w-screen-lg space-y-5 text-center"},r={key:1,class:"mt-5 pt-10 px-5 pb-5 flex flex-col border border-primary-8 dark:border-dark-3 rounded-lg w-full max-w-screen-lg space-y-5"},c={class:"flex flex-col space-y-2"},d={key:0,class:"flex items-center space-x-3 p-3 text-red-500 dark:text-red-700 bg-red-100 dark:bg-dark rounded-md"},u={class:"text-xs"},p={key:1,class:"flex items-center space-x-3 p-3 text-red-500 dark:text-red-700 bg-red-100 dark:bg-dark rounded-md"},m={class:"text-xs"};function v(e,t,a,v,f,g){const k=(0,s.g2)("font-awesome-icon"),x=(0,s.g2)("catalystDetails");return(0,s.uX)(),(0,s.CE)("div",n,[(0,s.Lk)("div",o,(0,l.v_)(e.$t("votingRegistration")),1),"KEYSTONE"===e.activeAccount.walletType?((0,s.uX)(),(0,s.CE)("div",i," Voting registration is currently not available for Keystone Wallet. ")):((0,s.uX)(),(0,s.CE)("div",r,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(e.activeComponent),{totalSteps:e.totalSteps,onChangeStep:e.changeComponent},null,40,["totalSteps","onChangeStep"])),(0,s.Lk)("div",c,[e.isEnoughAdaForVoting?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",d,[(0,s.bF)(k,{icon:"info-circle",class:"w-3.5 h-3.5 mr-0"}),(0,s.Lk)("p",u,(0,l.v_)(e.$t("minAdaForVotingMessage2",{amount:e.$filters.formatADA(e.minAdaForVoting)})),1)])),e.showDelegateAdaMessage?((0,s.uX)(),(0,s.CE)("div",p,[(0,s.bF)(k,{icon:"info-circle",class:"w-3.5 h-3.5 mr-0"}),(0,s.Lk)("p",m,(0,l.v_)(e.$t("delegateADA")),1)])):(0,s.Q3)("",!0)]),(0,s.bF)(x)]))])}var f=a(50953),g=a(60346);const k={class:"space-y-3"},x={class:"font-medium labelColor3"},b={class:"labelColor2 text-sm"},y={class:"flex flex-col sm:flex-row justify-end gap-x-2 md:gap-x-8 lg:gap-x-16 gap-y-8"},h={class:"flex flex-col items-center space-y-5"},w={class:"border dark:border-dark-3 p-4 rounded-lg shadow-sm"},L=(0,s.Lk)("a",{href:"https://apps.apple.com/in/app/catalyst-voting/id1517473397",target:"_blank",class:"w-full max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm"},[(0,s.Lk)("img",{src:"/assets/app-store-download.svg",alt:"app store download icon",class:"w-full"})],-1),C={class:"flex flex-col items-center space-y-5"},A={class:"border dark:border-dark-3 p-4 rounded-lg shadow-sm"},S=(0,s.Lk)("a",{href:"https://play.google.com/store/apps/details?id=io.iohk.vitvoting",target:"_blank",class:"w-full max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm"},[(0,s.Lk)("img",{src:"/assets/play-store-download.svg",alt:"play store download icon",class:"w-full"})],-1),_={class:"flex space-x-2"},E={class:"text-xs p-2 pr-3 flex space-x-2 btn btn-primary-outline items-center",disabled:""},$={class:"capitalize"},F=["disabled"];function R(e,t,a,n,o,i){const r=(0,s.g2)("qrcode-vue"),c=(0,s.g2)("font-awesome-icon"),d=(0,s.g2)("voting-step");return(0,s.uX)(),(0,s.Wv)(d,{activeStep:1,totalSteps:5},{stepInfo:(0,s.k6)((()=>[(0,s.Lk)("div",k,[(0,s.Lk)("div",x,(0,l.v_)(e.$t("downloadCatalystApp")),1),(0,s.Lk)("div",b,(0,l.v_)(e.$t("installApp")),1)])])),body:(0,s.k6)((()=>[(0,s.Lk)("div",y,[(0,s.Lk)("div",h,[(0,s.Lk)("div",w,[(0,s.bF)(r,{size:140,class:"border dark:border-white",value:"https://apps.apple.com/in/app/catalyst-voting/id1517473397"})]),L]),(0,s.Lk)("div",C,[(0,s.Lk)("div",A,[(0,s.bF)(r,{size:140,class:"border dark:border-white",value:"https://play.google.com/store/apps/details?id=io.iohk.vitvoting"})]),S])])])),actions:(0,s.k6)((()=>[(0,s.Lk)("div",_,[(0,s.Lk)("button",E,[(0,s.bF)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,s.Lk)("span",$,(0,l.v_)(e.$t("goBack")),1)]),(0,s.Lk)("button",{class:"p-2 pl-3 text-xs flex items-center space-x-2 btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=()=>e.$emit("changeStep",2)),disabled:!e.isEnoughAdaForVoting||!e.isDelegated},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("continue")),1),(0,s.bF)(c,{icon:"angle-right",class:"w-3 h-3"})],8,F)])])),_:1})}const V={class:"flex flex-col md:grid md:grid-cols-8 md:gap-16 p-2"},T={class:"md:col-span-3 flex flex-col mb-5 md:mb-0"},D={class:"text-primary"},I={class:"mt-5"},B={class:"md:col-span-5 flex flex-col space-y-10"},W={class:"w-full max-w-full"},M={class:"flex flex-col sm:flex-row items-center justify-between gap-5"},K={class:"flex items-center","aria-label":"Progress"},P={role:"list",class:"flex items-center space-x-4"},X={key:0,class:"block w-2.5 h-2.5 bg-primary rounded-full hover:bg-primary"},N={key:1,class:"relative flex items-center justify-center"},Q=(0,s.Lk)("span",{class:"absolute w-5 h-5 p-px flex","aria-hidden":"true"},[(0,s.Lk)("span",{class:"w-full h-full rounded-full bg-primary-10 dark:bg-dark-3"})],-1),z=(0,s.Lk)("span",{class:"relative block w-2.5 h-2.5 bg-primary rounded-full","aria-hidden":"true"},null,-1),j=[Q,z],G={key:2,class:"block w-2.5 h-2.5 bg-gray-200 dark:bg-dark-3 rounded-full"};function O(e,t,a,n,o,i){return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",T,[(0,s.Lk)("div",D,"STEP 0"+(0,l.v_)(e.activeStep),1),(0,s.Lk)("div",I,[(0,s.RG)(e.$slots,"stepInfo")])]),(0,s.Lk)("div",B,[(0,s.Lk)("div",W,[(0,s.RG)(e.$slots,"body")]),(0,s.Lk)("div",M,[(0,s.Lk)("div",null,[(0,s.Lk)("nav",K,[(0,s.Lk)("ol",P,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(Array(e.totalSteps),((t,a)=>((0,s.uX)(),(0,s.CE)("li",{key:a},[e.activeStep-1>a?((0,s.uX)(),(0,s.CE)("div",X)):e.activeStep-1===a?((0,s.uX)(),(0,s.CE)("div",N,j)):((0,s.uX)(),(0,s.CE)("div",G))])))),128))])])]),(0,s.Lk)("div",null,[(0,s.RG)(e.$slots,"actions")])])])])}var q=(0,s.pM)({props:{activeStep:Number,totalSteps:Number}}),J=a(66262);const U=(0,J.A)(q,[["render",O]]);var H=U,Y=a(67944),Z=a(15376),ee=(0,s.pM)({components:{VotingStep:H,QrcodeVue:Y.A},emits:["changeStep"],setup(){const e=(0,Z.G)(),t=(0,s.EW)((()=>e.activeAccount)),a=(0,s.EW)((()=>{const e=new g.A("500000000"),a=t.value.balance;return a.gte(e)})),l=(0,s.EW)((()=>!!t.value.poolInfo?.poolId));return{isEnoughAdaForVoting:a,activeAccount:t,isDelegated:l}}});const te=(0,J.A)(ee,[["render",R]]);var ae=te;const se={class:"mb-14 flex flex-col items-end"},le={class:"flex space-x-5"},ne=(0,s.Lk)("div",{class:"text-xs mt-1"},"​",-1),oe={class:"space-y-3"},ie={class:"font-medium labelColor3"},re={class:"labelColor2 text-sm"},ce={class:"flex space-x-2"},de={class:"capitalize"},ue=["disabled"];function pe(e,t,a,n,o,i){const r=(0,s.g2)("single-digit-input-field"),c=(0,s.g2)("font-awesome-icon"),d=(0,s.g2)("VotingStep");return(0,s.uX)(),(0,s.Wv)(d,{activeStep:2,totalSteps:e.totalSteps},{body:(0,s.k6)((()=>[(0,s.Lk)("div",se,[(0,s.Lk)("div",le,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,((t,a)=>(0,s.bF)(r,{key:a,onSetRef:t=>{t&&(e.inputRefs[a]=t)},onFocusPrevious:()=>{e.changeFocus(a-1)},onInput:t=>{e.pinArray[a]=t,t&&e.changeFocus(a+1)},value:e.pinArray[a]?e.pinArray[a]:"",autofocus:0==a},null,8,["onSetRef","onFocusPrevious","onInput","value","autofocus"]))),64))]),ne])])),stepInfo:(0,s.k6)((()=>[(0,s.Lk)("div",oe,[(0,s.Lk)("div",ie,(0,l.v_)(e.$t("createPIN")),1),(0,s.Lk)("div",re,(0,l.v_)(e.$t("pinDescription")),1)])])),actions:(0,s.k6)((()=>[(0,s.Lk)("div",ce,[(0,s.Lk)("button",{class:"text-xs p-2 pr-3 flex space-x-2 btn btn-primary-outline items-center focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=()=>e.$emit("changeStep",1))},[(0,s.bF)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,s.Lk)("span",de,(0,l.v_)(e.$t("goBack")),1)]),(0,s.Lk)("button",{class:"p-2 pl-3 text-xs btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2 flex items-center space-x-2",onClick:t[1]||(t[1]=()=>e.submit()),disabled:4!==e.pinArray.join("").length},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("continue")),1),(0,s.bF)(c,{icon:"angle-right",class:"w-3 h-3"})],8,ue)])])),_:1},8,["totalSteps"])}var me=a(53751);const ve=["autofocus"];function fe(e,t,a,l,n,o){return(0,s.bo)(((0,s.uX)(),(0,s.CE)("input",{class:"sm:w-20 w-14 p-2 sm:p-4 rounded-md text-xl sm:text-3xl font-medium text-center border border-primary-8 dark:border-dark shadow-sm input-text dark:bg-dark-3 labelColor3",type:"password",maxlength:"1",autofocus:e.autofocus,"onUpdate:modelValue":t[0]||(t[0]=t=>e.currentValue=t),ref:t=>{e.$emit("setRef",t)},onKeydown:[t[1]||(t[1]=(0,me.jR)(((...t)=>e.onEnter&&e.onEnter(...t)),["enter"])),t[2]||(t[2]=(0,me.jR)(((...t)=>e.onTab&&e.onTab(...t)),["tab"])),t[3]||(t[3]=(0,me.jR)(((...t)=>e.onBackspace&&e.onBackspace(...t)),["delete"]))]},null,40,ve)),[[me.Jo,e.currentValue]])}var ge=(0,s.pM)({name:"SingleWordField",emits:["input","setRef","focusPrevious"],props:{value:{required:!0,type:String},autofocus:{type:Boolean}},data:function(){return{currentValue:this.$props.value}},watch:{currentValue(e){const t=new RegExp("^[0-9]+$");t.test(e)?this.$emit("input",e):(this.currentValue="",this.$emit("input",""))}},methods:{onBackspace(e){this.$props.value&&0!=this.$props.value.length||(this.$emit("focusPrevious"),e.preventDefault())}}});const ke=(0,J.A)(ge,[["render",fe]]);var xe=ke,be=a(5014),ye=(0,s.pM)({components:{VotingStep:H,SingleDigitInputField:xe},props:{totalSteps:{type:Number}},emits:["changeStep"],setup(e,{emit:t}){const a=(0,be.m)(),l=(0,f.KR)([]),n=(0,f.KR)([]);(0,s.sV)((()=>{l.value[0].focus()}));const o=e=>{if(e===l.value.length||e<0)return;const t=l.value[e];t.focus()},i=()=>{4===n.value.length&&(a.$patch({votingKeyPin:n.value.map((e=>Number(e)))}),t("changeStep",3))};return{changeFocus:o,pinArray:n,inputRefs:l,submit:i}}});const he=(0,J.A)(ye,[["render",pe]]);var we=he;const Le={class:"mb-14 flex flex-col items-end"},Ce={class:"flex space-x-5"},Ae={class:"space-y-3"},Se={class:"font-medium labelColor3"},_e={class:"labelColor2 text-sm"},Ee={class:"flex space-x-2"},$e=["disabled"],Fe={class:"capitalize"},Re={class:"flex items-center space-x-2"};function Ve(e,t,a,n,o,i){const r=(0,s.g2)("single-digit-input-field"),c=(0,s.g2)("font-awesome-icon"),d=(0,s.g2)("AppButtonVue"),u=(0,s.g2)("VotingStep");return(0,s.uX)(),(0,s.Wv)(u,{activeStep:3,totalSteps:e.totalSteps},{body:(0,s.k6)((()=>[(0,s.Lk)("div",Le,[(0,s.Lk)("div",Ce,[((0,s.uX)(),(0,s.CE)(s.FK,null,(0,s.pI)(4,((t,a)=>(0,s.bF)(r,{key:a,onSetRef:t=>{t&&(e.inputRefs[a]=t)},onFocusPrevious:()=>{e.changeFocus(a-1)},onInput:t=>{e.confirmPinArray[a]=t,t&&e.changeFocus(a+1)},value:e.confirmPinArray[a]?e.confirmPinArray[a]:"",autofocus:0==a},null,8,["onSetRef","onFocusPrevious","onInput","value","autofocus"]))),64))]),(0,s.Lk)("div",{class:(0,l.C4)(["text-center text-xs mt-1 text-red-500",[e.invalidPinMessage.length?"opacity-100":"opacity-0"]])}," ​"+(0,l.v_)(e.invalidPinMessage),3)])])),stepInfo:(0,s.k6)((()=>[(0,s.Lk)("div",Ae,[(0,s.Lk)("div",Se,(0,l.v_)(e.$t("confirmPIN")),1),(0,s.Lk)("div",_e,(0,l.v_)(e.$t("pinDescription")),1)])])),actions:(0,s.k6)((()=>[(0,s.Lk)("div",Ee,[(0,s.Lk)("button",{class:"text-xs p-2 pr-3 flex space-x-2 items-center btn btn-primary-outline focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[0]||(t[0]=t=>e.$emit("changeStep",2)),disabled:e.isTransactionBuilding},[(0,s.bF)(c,{icon:"angle-left",class:"w-3 h-3"}),(0,s.Lk)("span",Fe,(0,l.v_)(e.$t("goBack")),1)],8,$e),(0,s.bF)(d,{class:"text-xs p-2 pl-3 btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:e.nextStep,disabled:e.isTransactionBuilding||4!==e.confirmPinArray.join("").length,isLoading:e.isTransactionBuilding},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Re,[(0,s.Lk)("span",null,(0,l.v_)(e.$t("continue")),1),(0,s.bF)(c,{icon:"angle-right",class:"w-3 h-3"})])])),_:1},8,["onClick","disabled","isLoading"])])])),_:1},8,["totalSteps"])}var Te=a(18731),De=a(48156),Ie=a(99962),Be=(0,s.pM)({components:{AppButtonVue:Te.A,VotingStep:H,SingleDigitInputField:xe},emits:["changeStep"],props:{totalSteps:{type:Number}},setup(e,{emit:t}){const{t:a}=(0,De.s9)(),l=(0,Z.G)(),n=(0,be.m)(),o=(0,s.EW)((()=>l.activeAccount)),i=(0,s.EW)((()=>n.votingKeyPin)),r=(0,f.KR)([]),c=(0,f.KR)(""),d=(0,f.KR)(!1),u=(0,f.KR)([]);(0,s.sV)((()=>{u.value[0].focus()}));const p=e=>{if(e===u.value.length||e<0)return;const t=u.value[e];t.focus()};async function m(){if(r.value.join("")!==i.value.join(""))c.value=a("pinMismatch");else{d.value=!0,n.computeVotingMetadata();const e={type:"GenericTransaction",auxiliaryData:{metadata:n.metadataList}},a=await(0,Ie.d9)(o.value,e);if("ERROR"===a.status)throw new Error("something went wrong");n.$patch({votingTx:a.unsignedTx}),d.value=!1,t("changeStep",4)}}return(0,s.wB)((()=>c.value),(e=>{e.length&&setTimeout((()=>{c.value=""}),5e3)})),{confirmPinArray:r,inputRefs:u,invalidPinMessage:c,isTransactionBuilding:d,nextStep:m,changeFocus:p}}});const We=(0,J.A)(Be,[["render",Ve]]);var Me=We;const Ke={class:"space-y-3"},Pe={class:"font-medium labelColor3"},Xe={class:"labelColor2 text-sm"},Ne={class:"flex flex-col max-w-full w-full"},Qe={class:"text-xs labelColor2"},ze={class:"mt-1 p-2 card2 break-all tracking-wide text-sm labelColor3 font-mono"},je={class:"mt-3 flex space-x-4"},Ge={class:"w-1/2"},Oe={class:"text-xs labelColor2"},qe={class:"mt-1 p-2 card2 break-all tracking-wide flex text-sm font-mono items-center labelColor3"},Je={class:"w-1/2"},Ue={class:"text-xs labelColor2"},He={class:"mt-1 p-2 card2 break-all tracking-wide text-sm font-mono flex items-center labelColor3"},Ye={class:"mt-3 flex flex-col w-full max-w-full"},Ze={class:"text-xs labelColor2"},et={class:"mt-1"},tt={class:"flex space-x-2 w-full"},at={class:"p-2 w-1/4 card2 flex items-center"},st={class:"labelColor2 text-xs"},lt={class:"truncate font-mono text-left break-all text-xs labelColor3"},nt={key:0,class:"w-full"},ot={class:"space-y-5 mt-2"},it={key:0,class:"mt-3"},rt={class:"p-2 card2 flex justify-between items-center w-full"},ct={class:"flex-grow text-xs labelColor3"},dt={class:"card2 p-2 mt-1"},ut={class:"flex space-x-5"},pt=["disabled"],mt={class:"capitalize"};function vt(e,t,a,n,o,i){const r=(0,s.g2)("ada"),c=(0,s.g2)("ChevronRightIcon"),d=(0,s.g2)("DisclosureButton"),u=(0,s.g2)("prism-editor"),p=(0,s.g2)("DisclosurePanel"),m=(0,s.g2)("Disclosure"),v=(0,s.g2)("font-awesome-icon"),f=(0,s.g2)("TransactionDetailsVue"),g=(0,s.g2)("AppExpandVue"),k=(0,s.g2)("AppButtonVue"),x=(0,s.g2)("voting-step-vue");return(0,s.uX)(),(0,s.Wv)(x,{activeStep:4,totalSteps:5},{stepInfo:(0,s.k6)((()=>[(0,s.Lk)("div",Ke,[(0,s.Lk)("div",Pe,(0,l.v_)(e.$t("confirmTransaction")),1),(0,s.Lk)("div",Xe,(0,l.v_)(e.$t("minAdaForVotingMessage1")),1)])])),body:(0,s.k6)((()=>[(0,s.Lk)("div",Ne,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Qe,(0,l.v_)(e.$t("rewardAddress")),1),(0,s.Lk)("div",ze,(0,l.v_)(e.rewardAddress),1)]),(0,s.Lk)("div",je,[(0,s.Lk)("div",Ge,[(0,s.Lk)("div",Oe,(0,l.v_)(e.$t("trxAmount")),1),(0,s.Lk)("div",qe,[(0,s.eW)((0,l.v_)(e.$filters.formatADA("0"))+" ",1),(0,s.bF)(r,{class:"h-3 w-3 ml-2"})])]),(0,s.Lk)("div",Je,[(0,s.Lk)("div",Ue,(0,l.v_)(e.$t("fees")),1),(0,s.Lk)("div",He,[(0,s.eW)((0,l.v_)(e.$filters.formatADA(e.transaction?.getFee().toString()??"0"))+" ",1),(0,s.bF)(r,{class:"h-3 w-3 ml-2"})])])]),(0,s.Lk)("div",Ye,[(0,s.Lk)("div",Ze,(0,l.v_)(e.$t("metadata")),1),(0,s.Lk)("div",et,[(0,s.bF)(m,{as:"template"},{default:(0,s.k6)((({open:a})=>[(0,s.Lk)("div",tt,[(0,s.Lk)("div",at,[(0,s.Lk)("span",st,(0,l.v_)(e.votingMetadata?.label),1)]),(0,s.bF)(d,{class:"w-3/4 p-2 card2 flex w-full items-center justify-between focus:outline-none"},{default:(0,s.k6)((()=>[(0,s.Lk)("span",lt,(0,l.v_)(e.votingMetadata?.data),1),(0,s.bF)(c,{class:(0,l.C4)(["w-3 h-3 mr-0",{"transform rotate-90":a}])},null,8,["class"])])),_:2},1024)]),e.votingMetadata?((0,s.uX)(),(0,s.CE)("div",nt,[(0,s.bF)(me.eB,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform h-0 opacity-50","enter-to-class":"transform h-full opacity-100","leave-active-class":"transition duration-75 ease-out","leave-from-class":"transform h-full opacity-100","leave-to-class":"transform h-0 opacity-0"},{default:(0,s.k6)((()=>[(0,s.bF)(p,null,{default:(0,s.k6)((()=>[(0,s.Lk)("div",ot,[(0,s.bF)(u,{readonly:"",ignoreTabKey:"",class:"p-2 bg-gray-100 text-sm leading-5 font-mono",modelValue:e.votingMetadata.data,"onUpdate:modelValue":t[0]||(t[0]=t=>e.votingMetadata.data=t),"line-numbers":"",lines:"3",language:"json",highlight:e.highlighter},null,8,["modelValue","highlight"])])])),_:1})])),_:1})])):(0,s.Q3)("",!0)])),_:1})])]),e.transaction?((0,s.uX)(),(0,s.CE)("div",it,[(0,s.bF)(g,null,{primary:(0,s.k6)((({open:t})=>[(0,s.Lk)("div",rt,[(0,s.Lk)("span",ct,(0,l.v_)(e.$t("moreDetails")),1),(0,s.bF)(v,{icon:"chevron-right",class:(0,l.C4)(["w-4 h-4 labelColor3",{"transform rotate-90":t}])},null,8,["class"])])])),secondary:(0,s.k6)((()=>[(0,s.Lk)("div",dt,[(0,s.bF)(f,{transaction:e.transaction},null,8,["transaction"])])])),_:1})])):(0,s.Q3)("",!0)])])),actions:(0,s.k6)((()=>[(0,s.Lk)("div",ut,[(0,s.Lk)("button",{class:"text-xs p-2 pl-3 flex space-x-2 items-center btn btn-primary-outline focus:ring-2 focus:ring-offset-white focus:ring-offset-2",onClick:t[1]||(t[1]=t=>e.$emit("changeStep",3)),disabled:e.isTransactionSubmitting},[(0,s.bF)(v,{icon:"angle-left",class:"w-3 h-3"}),(0,s.Lk)("span",mt,(0,l.v_)(e.$t("goBack")),1)],8,pt),(0,s.bF)(k,{class:"text-xs py-2 px-4 flex space-x-2 items-center btn btn-primary focus:ring-2 focus:ring-offset-white focus:ring-offset-2 capitalize",onClick:e.confirm,disabled:e.isTxBuilding||e.isTransactionSubmitting,isLoading:e.isTransactionSubmitting},{default:(0,s.k6)((()=>[(0,s.eW)((0,l.v_)(e.$t("confirm")),1)])),_:1},8,["onClick","disabled","isLoading"])])])),_:1})}var ft=a(73111),gt=a(96219),kt=a(4037),xt=a(86251),bt=a(80207),yt=a(52741),ht=a(71983),wt=(a(75624),a(72514),a(25426)),Lt=a(89318),Ct=a(14784),At=a(14615),St=(0,s.pM)({components:{AppButtonVue:Te.A,VotingStepVue:H,AppExpandVue:gt.A,TransactionDetailsVue:ft.A,Disclosure:xt.EN,DisclosurePanel:xt.kS,DisclosureButton:xt._q,ChevronRightIcon:bt.A,PrismEditor:yt.N},props:{totalSteps:{type:Number}},emits:["changeStep"],setup(e,{emit:t}){const a=(0,f.KR)(!1),l=(0,be.m)(),n=(0,Z.G)(),o=(0,At.f)(),i=(0,f.KR)(!0),r=(0,s.EW)((()=>n.activeAccount)),c=(0,f.KR)(),d=(0,s.EW)((()=>l.metadataList)),u=(0,s.EW)((()=>r.value.receiveAddress)),p=(0,s.EW)((()=>{const e=d.value[0],t={};for(const[a,s]of e.data)t[a]="number"===typeof s?s:s.toString("hex");return{...e,data:JSON.stringify(t,null,"\t")}}));async function m(){const e=await l.computeVotingMetadata(),t={type:"GenericTransaction",auxiliaryData:{metadata:e}},a=await(0,Ie.d9)(r.value,t);if("OK"!==a.status)throw"Voting transaction build failed";c.value=a.unsignedTx,i.value=!1}async function v(e){let s;try{a.value=!0;const t=await o.signAndSubmitTx(c.value,!0,e);if(!t.status)throw a.value=!1,new Error("tx failed");s=!0}catch(l){return t("changeStep",1),kt.v.error(l)}finally{a.value=!1}t("changeStep",s?5:1)}async function g(){wt.A.value.IS_EXTENSION&&"MNEMONIC"===r.value.walletType?Lt.v3.openDialog({component:Ct.A,size:Lt.sD["maxContent"],props:{onConfirmPassword:e=>{Lt.v3.closeDialog(),v(e)}}}):v(void 0)}m();const k=e=>(0,ht.highlight)(e,ht.languages.json);return{confirm:g,transaction:c,isTransactionSubmitting:a,rewardAddress:u,metadataList:d,votingMetadata:p,highlighter:k,isTxBuilding:i}}});const _t=(0,J.A)(St,[["render",vt]]);var Et=_t;const $t={class:"mb-2 px-3 py-2 text-xs flex items-center gap-3 rounded-md border border-red-300 text-sm text-red-400 bg-red-100"},Ft={class:"flex flex-col md:flex-row p-2 md:space-x-20 xl:space-x-40"},Rt={class:"flex flex-col md:flex-none space-y-3 mb-5 md:mb-0 md:w-1/4 md:mr-5"},Vt={key:0,class:"space-y-2"},Tt={class:"flex items-center space-x-2"},Dt={class:"font-medium labelColor3"},It=(0,s.Lk)("svg",{class:"animate-spin w-4 mx-auto py-px text-primary",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[(0,s.Lk)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),(0,s.Lk)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Bt={class:"labelColor2 text-sm"},Wt=(0,s.Lk)("br",null,null,-1),Mt={class:"font-medium labelColor3"},Kt={class:"labelColor2 text-sm"},Pt={class:"flex flex-col space-y-5 max-w-full"},Xt={key:0,class:"space-y-4"},Nt={class:"mx-auto max-w-max border dark:border-dark-3 p-4 rounded-lg shadow-sm",ref:"qrcodeRef"},Qt={class:"flex gap-2 mx-auto max-w-max"},zt={class:"flex text-xs items-center"},jt={key:1,class:"space-y-10"},Gt={class:"font-medium labelColor3"},Ot={class:"labelColor2 text-sm"};function qt(e,t,a,n,o,i){const r=(0,s.g2)("font-awesome-icon"),c=(0,s.g2)("qrcode-vue"),d=(0,s.g2)("AppButton");return e.encryptedVotingKey?.length?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",$t,[(0,s.bF)(r,{icon:"info-circle",class:"w-4 h-4"}),(0,s.Lk)("span",null,(0,l.v_)(e.$t("downloadQR")),1)]),(0,s.Lk)("div",Ft,[(0,s.Lk)("div",Rt,[e.votingTransaction?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("div",Mt,(0,l.v_)(e.$t("registrationSuccess")),1),(0,s.Lk)("div",Kt,(0,l.v_)(e.$t("useQRCode")),1)],64)):((0,s.uX)(),(0,s.CE)("div",Vt,[(0,s.Lk)("div",Tt,[(0,s.Lk)("div",Dt,(0,l.v_)(e.$t("pendingRegistration")),1),It]),(0,s.Lk)("div",Bt,[(0,s.eW)((0,l.v_)(e.$t("votingTrxSubmitted")),1),Wt,(0,s.eW)((0,l.v_)(e.$t("waitForPendingTrx")),1)])]))]),(0,s.Lk)("div",Pt,[e.encryptedVotingKey.length?((0,s.uX)(),(0,s.CE)("div",Xt,[(0,s.Lk)("div",Nt,[(0,s.bF)(c,{class:"border dark:border-white",size:210,value:e.encryptedVotingKey},null,8,["value"])],512)])):(0,s.Q3)("",!0),(0,s.Lk)("div",Qt,[(0,s.Lk)("button",{class:"flex space-x-2 btn btn-primary-outline text-xs items-center px-2",onClick:t[0]||(t[0]=t=>e.$emit("changeStep",1))},[(0,s.bF)(r,{icon:"arrow-left",class:"w-4 h-4"}),(0,s.Lk)("span",null,(0,l.v_)(e.$t("backToRegistration")),1)]),(0,s.bF)(d,{class:"btn btn-primary px-2.5 py-2",onClick:e.downloadQrCode,isLoading:e.isQrDownloading},{default:(0,s.k6)((()=>[(0,s.Lk)("div",zt,[(0,s.Lk)("span",null,(0,l.v_)(e.$t("download")),1)])])),_:1},8,["onClick","isLoading"])])])])],64)):((0,s.uX)(),(0,s.CE)("div",jt,[(0,s.Lk)("div",null,[(0,s.Lk)("div",Gt,(0,l.v_)(e.$t("alreadyRegistered")),1),(0,s.Lk)("div",Ot,(0,l.v_)(e.$t("QRCodeLost")),1)]),(0,s.Lk)("button",{class:"btn btn-md btn-primary",onClick:t[1]||(t[1]=()=>e.$emit("changeStep",1))},[(0,s.Lk)("span",null,(0,l.v_)(e.$t("register")),1)])]))}var Jt=a(20354),Ut=a.n(Jt),Ht=(0,s.pM)({components:{QrcodeVue:Y.A,AppButton:Te.A},props:{totalSteps:{type:Number}},data(){return{isQrDownloading:!1}},emits:["changeStep"],setup(){const e=(0,be.m)(),t=(0,Z.G)(),a=(0,s.EW)((()=>e.encryptedPrivateKey)),l=(0,s.EW)((()=>t.activeAccount)),n=(0,s.EW)((()=>l.value.operations.some((e=>e.types.includes("VOTING_REGISTRATION")))));return{votingTransaction:n,encryptedVotingKey:a}},methods:{async downloadQrCode(){this.isQrDownloading=!0;const e=this.$refs.qrcodeRef;try{const t=await Ut()(e),a=document.createElement("a");a.setAttribute("download","catalyst-voting-qrcode.png"),a.setAttribute("href",t.toDataURL("image/png").replace("image/png","image/octet-stream")),a.click()}catch(t){kt.v.error(t)}this.isQrDownloading=!1}}});const Yt=(0,J.A)(Ht,[["render",qt]]);var Zt=Yt;const ea={key:0,class:"sm:flex sm:flex-wrap border border-primary-8 w-full rounded-md bg-primary-2 dark:bg-dark-1 dark:border-none shadow-sm text-sm"},ta={class:"flex-grow sm:border-r divideBorderColor"},aa={class:"text-left px-3 pt-5 pb-4"},sa={class:"font-bold tracking-wide labelColor3"},la={class:"mt-1 text-xs labelColor2"},na={class:"px-3 py-1 my-1 border-b divideBorderColor"},oa={class:"capitalize labelColor2 text-xs"},ia={class:"mt-1 labelColor3 font-medium"},ra={class:"px-3 py-1 my-1 border-b divideBorderColor"},ca={class:"gap-x-6"},da={class:"capitalize labelColor2 text-xs"},ua={class:"mt-1 labelColor3 font-medium"},pa={class:"px-3 py-1 my-1 border-b divideBorderColor"},ma={class:"capitalize labelColor2 text-xs"},va={class:"mt-1 labelColor3 font-medium"},fa={class:"px-3 py-1 my-1"},ga={class:"capitalize labelColor2 text-xs"},ka={class:"mt-1 labelColor3 font-medium flex items-baseline"},xa={class:"min-w-max sm:mx-4"},ba={class:"text-left px-3 pt-5 pb-4"},ya={class:"text-lg font-bold tracking-wide labelColor3 capitalize"},ha=["href"],wa={class:"flex"};function La(e,t,a,n,o,i){const r=(0,s.g2)("ada"),c=(0,s.g2)("ExternalLinkIcon");return e.fundDetails&&e.isMainnet?((0,s.uX)(),(0,s.CE)("div",ea,[(0,s.Lk)("div",ta,[(0,s.Lk)("div",aa,[(0,s.Lk)("div",sa,(0,l.v_)(e.fundDetails.name),1),(0,s.Lk)("span",la,(0,l.v_)(e.fundDetails.goal),1)]),(0,s.Lk)("div",na,[(0,s.Lk)("div",null,[(0,s.Lk)("div",oa,(0,l.v_)(e.$t("snapshotTime")),1),(0,s.Lk)("div",ia,(0,l.v_)(e.fundDetails.snapshotTime),1)])]),(0,s.Lk)("div",ra,[(0,s.Lk)("div",ca,[(0,s.Lk)("div",da,(0,l.v_)(e.$t("registrationStart")),1),(0,s.Lk)("div",ua,(0,l.v_)(e.fundDetails.startTime),1)])]),(0,s.Lk)("div",pa,[(0,s.Lk)("div",null,[(0,s.Lk)("div",ma,(0,l.v_)(e.$t("registrationEnd")),1),(0,s.Lk)("div",va,(0,l.v_)(e.fundDetails.endTime),1)])]),(0,s.Lk)("div",fa,[(0,s.Lk)("span",ga,(0,l.v_)(e.$t("minAda")),1),(0,s.Lk)("div",ka,[(0,s.eW)((0,l.v_)(e.$filters.formatADA(e.minAdaForVoting))+" ",1),(0,s.bF)(r,{class:"h-3 w-3 ml-2"})])])]),(0,s.Lk)("div",xa,[(0,s.Lk)("div",ba,[(0,s.Lk)("div",ya,(0,l.v_)(e.$t("usefulLinks")),1)]),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.catalystLinks,(e=>((0,s.uX)(),(0,s.CE)("a",{class:"block px-3 py-1 my-1 labelColor3 hover:text-blue-500 dark:hover:text-primary",target:"_blank",href:e.link,key:e.link},[(0,s.Lk)("div",wa,[(0,s.Lk)("p",null,(0,l.v_)(e.title),1),(0,s.bF)(c,{class:"w-4 ml-1"})])],8,ha)))),128))])])):(0,s.Q3)("",!0)}var Ca=a(36643),Aa=a(67991),Sa=a(24550),_a=(0,s.pM)({components:{ExternalLinkIcon:Aa.A},setup(){const e=(0,Sa.C)(),t=(0,s.EW)((()=>e.fundDetails)),a=wt.A.value.NETWORK===Ca.types.NetworkId.MAINNET,l=new g.A("500000000"),n=[{title:"Newsletter",link:"https://iohk.us20.list-manage.com/subscribe?u=26d3b656ecc43aa6f3063eaed&id=2451b43b07"},{title:"Announcements Channel",link:"https://t.me/cardanocatalyst"},{title:"Community Chat",link:"https://t.me/ProjectCatalystChat"},{title:"Weekly Town Hall Recordings",link:"https://www.youtube.com/playlist?list=PLnPTB0CuBOByRhpTUdALq4J89m_h7QqLk"},{title:"Browse Proposals",link:"https://cardano.ideascale.com/"}];return{fundDetails:t,isMainnet:a,minAdaForVoting:l,catalystLinks:n}}});const Ea=(0,J.A)(_a,[["render",La]]);var $a=Ea,Fa=a(9165);const Ra=[ae,we,Me,Et,Zt];var Va=(0,s.pM)({components:{catalystDetails:$a},setup(){const e=(0,Z.G)(),t=(0,f.KR)(5),a=(0,f.KR)(new g.A("500000000")),l=(0,s.EW)((()=>e.activeAccount)),n=(0,s.EW)((()=>[...l.value.pendingOperations,...l.value.operations].some((e=>e.types.includes("VOTING_REGISTRATION"))))),o=n.value?(0,f.IJ)(Zt):(0,f.IJ)(ae);function i(e){o.value=Ra[e-1]}(0,s.wB)(n,((e,t)=>{!t&&e&&(o.value=Ra[4])}));const r=(0,s.EW)((()=>{const e=a.value,t=l.value.balance;return t.gte(e)})),c=(0,s.EW)((()=>!(l.value.poolInfo&&l.value.poolInfo.poolId)));return{showDelegateAdaMessage:c,totalSteps:t,activeComponent:o,changeComponent:i,isEnoughAdaForVoting:r,activeAccount:l,minAdaForVoting:a,mdiBullhorn:Fa.V$e}}});const Ta=(0,J.A)(Va,[["render",v]]);var Da=Ta}}]);