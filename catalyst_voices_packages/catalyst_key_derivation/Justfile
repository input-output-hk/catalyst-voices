# use with https://github.com/casey/just
#
# Catalyst Key Derivation developers' convenience functions.

# Install `flutter_rust_bridge`
# Use incase `flutter_rust_bridge` is not installed yet.
install-flutter-rust-bridge:
    cargo install flutter_rust_bridge_codegen

# Generated necessary files for running Flutter web locally.
code-gen-web:
    # Generate auto generated files
    flutter_rust_bridge_codegen generate
    flutter_rust_bridge_codegen build-web
    # Copy a necessary files for running web
    cp -rf ./web/pkg ./example/web/

# Run local Flutter web.
run-web: code-gen-web
    cd example
    flutter run --web-header=Cross-Origin-Opener-Policy=same-origin --web-header=Cross-Origin-Embedder-Policy=require-corp -d chrome
