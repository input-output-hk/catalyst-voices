"use strict";(this["webpackChunktyphon"]=this["webpackChunktyphon"]||[]).push([[485],{8276:function(e,t,a){a.r(t),a.d(t,{default:function(){return ka}});var s=a(20641),n=a(90033);const l={key:0,class:"card"},o={class:"flex flex-col"},i=(0,s.Lk)("h1",{class:"font-medium labelColor3"},"Warp Transactions",-1),r={class:"mt-1 text-xs labelColor2"},c={class:"bg-[#273659] p-5 rounded-2xl mt-6"},d={class:"grid md:grid-cols-2 gap-x-5 gap-y-5"},u={class:"xl:w-[90%]"},p={class:"flex gap-x-3 items-center"},m=(0,s.Lk)("div",{class:"w-7 h-7 bg-white rounded-full flex justify-center items-center"},[(0,s.Lk)("span",{class:"text-sm font-semibold"},"1")],-1),v={class:"text-white text-base"},x={class:"border border-dashed h-44 w-full rounded-lg mt-4 border-gray-400 p-2 relative"},k={key:0,class:"flex justify-center items-center h-full"},f={class:"xl:w-64"},g={class:"text-white flex text-center xl:text-left text-xs font-light"},b={key:1,class:"flex items-start flex-wrap gap-x-2 gap-y-1 overflow-auto"},y={class:"max-w-max text-[10px] text-white bg-[#1b263d] p-0.5 pl-2 rounded-md text-center flex items-center gap-x-3"},h={class:"tracking-wide"},C={class:"bg-[#55617a] max-w-max px-2 h-5 rounded-md flex items-center justify-center text-xs"},w=["onClick"],A={class:"mt-2 bg-white w-8 h-8 justify-center items-center flex rounded-full"},L={class:"xl:w-[90%]"},T=(0,s.Lk)("div",{class:"flex gap-x-2 items-center"},[(0,s.Lk)("div",{class:"w-7 h-7 bg-white rounded-full flex justify-center items-center"},[(0,s.Lk)("span",{class:"text-sm font-semibold"},"2")]),(0,s.Lk)("div",null,[(0,s.Lk)("span",{class:"text-white text-base"},"Receiver")])],-1),E={class:"border border-dashed md:h-44 w-full rounded-lg mt-4 border-gray-400 relative py-4 px-5"},D={key:0,class:"h-full"},_={class:"h-full flex flex-col justify-between bg-[#57637e] p-2 rounded-md"},R={class:"break-all tracking-wide text-sm font-mono text-white"},S={key:1,class:"flex justify-center items-center h-full"},W=(0,s.Lk)("div",{class:"xl:w-64"},[(0,s.Lk)("span",{class:"text-white flex text-center xl:text-left text-xs font-light"}," Enter receiver address, adahandle or select from contacts. ")],-1),F={class:"flex flex-col items-center mt-10 xl:w-[95%] w-full"},I={class:"h-10 flex items-center justify-center"},M={class:"text-red-500 text-xs"},$=(0,s.Lk)("span",{class:"ml-5"}," WARP ",-1),X={class:"mt-10"},j={key:1};function B(e,t,a,B,N,H){const K=(0,s.g2)("md-icon"),z=(0,s.g2)("font-awesome-icon"),O=(0,s.g2)("WarpIcon"),P=(0,s.g2)("TransactionsVue"),Q=(0,s.g2)("WarpDisabledCard");return e.isWarpEnabled?((0,s.uX)(),(0,s.CE)("div",l,[(0,s.Lk)("div",o,[i,(0,s.Lk)("h3",r,(0,n.v_)(e.$t("warpTransactionDescription")),1)]),(0,s.Lk)("div",c,[(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("div",p,[m,(0,s.Lk)("div",null,[(0,s.Lk)("span",v,(0,n.v_)(e.$t("addTokens")),1)])]),(0,s.Lk)("div",x,[e.addedTokens.length?((0,s.uX)(),(0,s.CE)("div",b,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.addedTokens,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{key:t.policyId,class:"flex gap-x-1 items-center"},[(0,s.Lk)("div",y,[(0,s.Lk)("span",h,(0,n.v_)(e.decodeTokenName(t.assetName)),1),(0,s.Lk)("div",C,(0,n.v_)(e.getAssetWithDecimals(t)),1)]),(0,s.Lk)("button",{onClick:t=>e.deleteToken(a),class:"bg-red-500 w-5 h-5 rounded-full font bold flex justify-center items-center text-white hover:opacity-90"},[(0,s.bF)(z,{class:"w-3 h-3 font-bold",icon:"minus"})],8,w)])))),128))])):((0,s.uX)(),(0,s.CE)("div",k,[(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.openAddTokensModal&&e.openAddTokensModal(...t)),class:"bg-[#57637e] rounded-xl p-4 mx-10 flex items-center w-full justify-center gap-x-6 gap-y-2 hover:opacity-90"},[(0,s.Lk)("div",null,[(0,s.bF)(K,{icon:e.circleIcon,size:60,class:"text-white"},null,8,["icon"])]),(0,s.Lk)("div",f,[(0,s.Lk)("span",g,(0,n.v_)(e.$t("clickToAddTokens")),1)])])])),e.addedTokens.length>0?((0,s.uX)(),(0,s.CE)("button",{key:2,onClick:t[1]||(t[1]=(...t)=>e.openAddTokensModal&&e.openAddTokensModal(...t)),class:"absolute bottom-3 right-3 w-full flex justify-end hover:opacity-90"},[(0,s.Lk)("div",A,[(0,s.bF)(z,{class:"w-5 h-5 font-bold",icon:"plus"})])])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",L,[T,(0,s.Lk)("div",E,[e.isAddressField?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.Lk)("div",_,[(0,s.Lk)("span",R,(0,n.v_)(e.receivingAddress),1),(0,s.Lk)("button",{onClick:t[2]||(t[2]=(...t)=>e.openReceiverAddress&&e.openReceiverAddress(...t)),class:"mt-3 md:mt-0 text-xs py-2 btn bg-white dark:bg-white hover:bg-opacity-90 dark:hover:bg-opacity-80 border border-primary-10 w-full uppercase text-primary font-medium"}," EDIT ADDRESS ")])])):((0,s.uX)(),(0,s.CE)("div",S,[(0,s.Lk)("button",{onClick:t[3]||(t[3]=(...t)=>e.openReceiverAddress&&e.openReceiverAddress(...t)),class:"bg-[#57637e] rounded-xl p-5 flex w-full items-center justify-center gap-x-6 gap-y-2 hover:opacity-90 mx-10"},[(0,s.Lk)("div",null,[(0,s.bF)(z,{class:"text-white w-10 h-10",icon:"user"})]),W])]))])])]),(0,s.Lk)("div",F,[(0,s.Lk)("div",I,[(0,s.Lk)("span",M,(0,n.v_)(e.transactionError),1)]),(0,s.Lk)("button",{onClick:t[4]||(t[4]=(...t)=>e.createTransaction&&e.createTransaction(...t)),class:"tracking-[0.3rem] font-medium bg-white rounded-lg flex justify-center items-center hover:opacity-90 py-3 pl-14 pr-16"},[(0,s.bF)(O,{class:"h-7 w-7"}),$])])]),(0,s.Lk)("div",X,[(0,s.bF)(P)])])):((0,s.uX)(),(0,s.CE)("div",j,[(0,s.bF)(Q)]))}a(44114);var N=a(50953),H=a(89318),K=a(7283),z=a(27066),O=a(15376);const P={class:"flex flex-col"},Q={class:"pl-2 mb-1"},Y={class:"text-xs labelColor2"},q={class:"text-xs my-3"},V=["innerHTML"],G={class:"flex mt-5"};function U(e,t,a,l,o,i){const r=(0,s.g2)("address-field"),c=(0,s.g2)("AppButton");return(0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("div",Q,[(0,s.Lk)("span",Y,(0,n.v_)(e.$t("enterAddress")),1)]),(0,s.bF)(r,{address:e.receivingAddress,"onUpdate:address":t[0]||(t[0]=t=>e.receivingAddress=t),adaHandle:e.adaHandle,showLoader:e.isAdahandleResolving,rows:3},null,8,["address","adaHandle","showLoader"]),(0,s.Lk)("div",q,[(0,s.Lk)("span",{class:(0,n.C4)(["rounded-full px-4 py-1 text-white",[e.errorMeta?`bg-red-400 ${e.errorMeta.styleClass}`:"",e.errorMeta?.onClick?"cursor-pointer":""]]),onClick:t[1]||(t[1]=(...t)=>e.errorMeta?.onClick&&e.errorMeta?.onClick(...t)),innerHTML:e.errorMeta?.message??"â€‹"},null,10,V)]),(0,s.Lk)("div",G,[(0,s.bF)(c,{isLoading:e.isProcessing,disabled:e.isProcessing,class:"btn btn-md btn-primary flex-grow",onClick:e.updateReceivingAddress},{default:(0,s.k6)((()=>[(0,s.Lk)("span",null,(0,n.v_)(e.$t("continue")),1)])),_:1},8,["isLoading","disabled","onClick"])])])}var Z=a(36327),J=a(14615),ee=a(99962),te=a(36643),ae=a(60346),se=a(2543);function ne(e){const t=["0","1","2","3"],a=e.substring(0,2),s=e.substring(2);return t.includes(a[0]),s.substring(56)}var le=a(70989),oe=a(18731),ie=a(4037),re=(0,s.pM)({components:{AddressField:Z.A,AppButton:oe.A},props:{onSetStakeKey:{type:Function,required:!0}},setup(e){const t=(0,J.f)(),a=(0,N.KR)(""),n=(0,N.KR)(!1),l=(0,N.KR)(""),o=(0,N.KR)(!1),i=(0,N.KR)(!1),r=(0,O.G)(),c=(0,s.EW)((()=>r.activeAccount));async function d(){if(e.onSetStakeKey&&m.value){n.value=!0;try{const t=await(0,le.Ds)(m.value);e.onSetStakeKey(a.value,t),H._g.closeDialog()}catch(t){ie.v.error(t)}finally{n.value=!0}}}const u=async e=>{o.value=!0,i.value=!1,await t.resolveAndSetAdahandle([e]),t.addressAdahandleBidirectionalMap[e]?(a.value=t.addressAdahandleBidirectionalMap[e],l.value=e):i.value=!0,o.value=!1};let p;(0,s.wB)(a,(()=>{if(""==a.value&&(l.value=""),a.value.startsWith("$")){clearTimeout(p);const e=a.value;p=setTimeout((()=>{u(e)}),1e3)}}));const m=(0,s.EW)((()=>{let e;try{e=te.utils.getAddressFromString(a.value);const t=ne(e.getHex());if(null==t)throw"Invalid address";return t}catch(t){return""}})),v=(0,s.EW)((()=>{if(""==a.value)return;if(a.value.startsWith("$"))return i.value?{message:"Invalid adahandle",styleClass:"",onClick:()=>({})}:void 0;const e=(0,ee.Vh)(a.value,c.value.currency.networkId);return e?""==m.value?{message:"Invalid address",styleClass:"",onClick:()=>({})}:void 0:{message:"Invalid address",styleClass:"",onClick:()=>({})}}));return{adaHandle:l,receivingAddress:a,isAdahandleResolving:o,updateReceivingAddress:d,errorMeta:v,isProcessing:n}}}),ce=a(66262);const de=(0,ce.A)(re,[["render",U]]);var ue=de;const pe=(0,s.Lk)("div",null,[(0,s.Lk)("span",{class:"font-medium labelColor3"},"Pending Warp Transactions")],-1),me={class:"overflow-x-auto mt-4 space-y-2"},ve={key:0,class:"w-full px-5 py-6 card2 flex justify-center"},xe={class:"text-sm text-gray-600"},ke={class:"flex items-center justify-between flex-wrap gap-y-2"},fe={class:"flex flex-col gap-y-1"},ge={class:"flex gap-x-2 items-center"},be={class:"break-all labelColor3 font-mono font-medium text-sm"},ye={class:"flex items-center mt-1"},he={class:"ml-1 text-xs text-primary-80"},Ce={class:"ml-2 text-xs labelColor2"},we={key:0,class:"flex items-center"},Ae={class:"text-gray-500 dark:text-gray-300 mr-2"},Le={class:"mr-1"},Te=["onClick"],Ee=["onClick"],De={key:0},_e={key:1},Re={key:1,class:"flex items-center"},Se={class:"bg-red-400 text-white text-xs rounded-md px-3 py-1"},We={key:0,class:"w-full border-t border-primary-8 dark:border-gray-600 border-dashed my-3"},Fe={key:1,class:"ml-1 flex flex-wrap gap-x-1 gap-y-1"},Ie={class:"max-w-max text-sm text-white bg-[#273659] dark:bg-black py-1 pr-1 pl-2 rounded-md text-center flex items-center gap-x-2"},Me={class:"tracking-wide text-[10px]"},$e={class:"bg-[#55617a] dark:bg-gray-600 max-w-max px-1.5 rounded-md flex items-center justify-center text-[10px]"};function Xe(e,t,a,l,o,i){const r=(0,s.g2)("md-icon"),c=(0,s.g2)("ada"),d=(0,s.g2)("TokenDetails"),u=(0,s.g2)("AppPopover"),p=(0,s.gN)("tippy");return(0,s.uX)(),(0,s.CE)("div",null,[pe,(0,s.Lk)("div",me,[0==e.transactions.length?((0,s.uX)(),(0,s.CE)("div",ve,[(0,s.Lk)("span",xe,(0,n.v_)(e.$t("noTransactions")),1)])):((0,s.uX)(!0),(0,s.CE)(s.FK,{key:1},(0,s.pI)(e.transactions,(t=>((0,s.uX)(),(0,s.CE)("div",{key:t.transactionId,class:"w-full px-5 py-3 card2"},[(0,s.Lk)("div",ke,[(0,s.Lk)("div",fe,[(0,s.Lk)("div",ge,[(0,s.Lk)("span",be,(0,n.v_)(t.transactionId),1)]),(0,s.Lk)("div",ye,[(0,s.bF)(r,{icon:e.timeIcon,size:14,class:"text-primary-80"},null,8,["icon"]),(0,s.Lk)("span",he,(0,n.v_)(e.$t("expires")),1),(0,s.Lk)("span",Ce,(0,n.v_)(t.formattedTTL)+" ("+(0,n.v_)(t.expiresIn)+") ",1)])]),t.rejected?((0,s.uX)(),(0,s.CE)("div",Re,[(0,s.Lk)("div",Se,[(0,s.Lk)("span",null,(0,n.v_)(e.$t("rejected")),1)])])):((0,s.uX)(),(0,s.CE)("div",we,[(0,s.bo)(((0,s.uX)(),(0,s.CE)("div",{class:(0,n.C4)(["flex items-center text-xs mr-3",[t.showFeesAsSpent?"text-red-600":"text-gray-500 dark:text-gray-300"]])},[(0,s.Lk)("span",Ae,(0,n.v_)(e.$t("fee")),1),(0,s.Lk)("span",Le,(0,n.v_)(e.$filters.formatADA(t.fees)),1),(0,s.bF)(c,{class:"h-2.5 w-2.5 mb-0.5"})],2)),[[p,{content:e.$t("feePaidBySender")}]]),t.showSignButton?((0,s.uX)(),(0,s.CE)("button",{key:0,onClick:a=>e.signTransaction(t.transactionInstance),class:"mr-1 bg-primary border border-primary text-white text-xs rounded-md hover:opacity-90 px-3 py-1"},(0,n.v_)(e.$t("accept")),9,Te)):(0,s.Q3)("",!0),(0,s.Lk)("button",{onClick:()=>{t.transactionInstance&&e.rejectTransaction(t.transactionInstance)},class:"bg-red-500 border border-red-500 text-white text-xs rounded-md hover:opacity-90 px-3 py-1"},[t.showSignButton?((0,s.uX)(),(0,s.CE)("span",De,(0,n.v_)(e.$t("reject")),1)):((0,s.uX)(),(0,s.CE)("span",_e,(0,n.v_)(e.$t("cancel")),1))],8,Ee)]))]),t.rejected?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",We)),t.rejected?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Fe,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.tokens,((t,a)=>((0,s.uX)(),(0,s.CE)("div",{key:a},[(0,s.bF)(u,{class:"max-w-md",placement:""},{button:(0,s.k6)((()=>[(0,s.Lk)("div",Ie,[(0,s.Lk)("span",Me,(0,n.v_)(e.decodeTokenName(t.assetName)),1),(0,s.Lk)("div",$e,(0,n.v_)(e.getAssetWithDecimals(t)),1)])])),popup:(0,s.k6)((()=>[(0,s.bF)(d,{token:t},null,8,["token"])])),_:2},1024)])))),128))]))])))),128))])])}var je=a(20096),Be=a(9165),Ne=a(74946);const He={class:"text-sm"},Ke={key:0},ze={class:"space-y-3"},Oe={class:"flex flex-col space-y-1 card2 py-2 px-3"},Pe={class:"text-xs font-semibold labelColor2"},Qe={key:0,class:"flex flex-col space-y-2"},Ye={class:"text-xs max-w-max break-all"},qe={class:"max-w-max break-all labelColor2 font-mono"},Ve={key:1,class:"text-sm max-w-max break-all labelColor3 font-mono"},Ge={key:0,class:"flex space-x-10 card2 py-2 px-3"},Ue={class:"flex flex-col"},Ze={class:"text-xs font-semibold labelColor2"},Je={class:"mt-1 flex items-baseline space-x-2 labelColor3"},et={class:"flex flex-col"},tt={class:"text-xs font-semibold labelColor2"},at={class:"mt-1 flex items-baseline space-x-2 labelColor3"},st={key:1,class:"card2 py-2 px-3"},nt={class:"text-xs font-semibold labelColor2"},lt={key:0},ot={key:1},it={class:"mt-2 flex flex-wrap gap-x-2 gap-y-1"},rt={key:2,class:"card2 py-2 px-3"},ct={class:"text-xs font-semibold labelColor2"},dt={key:0},ut={key:1},pt={class:"mt-1 flex items-baseline space-x-2 labelColor3"},mt={key:1,class:"card2 px-3 py-2 my-5"},vt={class:"flex items-center w-full labelColor2"},xt={class:"flex-grow text-xs font-semibold"},kt={class:"flex-initial"},ft={class:"flex w-full space-x-5 justify-center"};function gt(e,t,a,l,o,i){const r=(0,s.g2)("ScamAddressWarningVue"),c=(0,s.g2)("ContactAndAdahandleLabel"),d=(0,s.g2)("DecimalNumberVue"),u=(0,s.g2)("ada"),p=(0,s.g2)("TokenBadge"),m=(0,s.g2)("font-awesome-icon"),v=(0,s.g2)("TransactionDetails"),x=(0,s.g2)("AppExpand"),k=(0,s.g2)("AppButton");return(0,s.uX)(),(0,s.CE)("div",He,[(0,s.Lk)("div",null,[e.isPossibleScam?((0,s.uX)(),(0,s.CE)("div",Ke,[(0,s.bF)(r,{class:"mb-2"})])):(0,s.Q3)("",!0),(0,s.Lk)("div",ze,[(0,s.Lk)("div",Oe,[(0,s.Lk)("span",Pe,(0,n.v_)(e.$t("address")),1),e.adaHandle||e.contactName?((0,s.uX)(),(0,s.CE)("div",Qe,[(0,s.bF)(c,{adaHandle:e.adaHandle,contactName:e.contactName},null,8,["adaHandle","contactName"]),(0,s.Lk)("p",Ye,[(0,s.Lk)("span",qe,(0,n.v_)(e.sendAddr),1)])])):((0,s.uX)(),(0,s.CE)("span",Ve,(0,n.v_)(e.sendAddr),1))]),e.isReceiver?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Ge,[(0,s.Lk)("div",Ue,[(0,s.Lk)("span",Ze,(0,n.v_)(e.$t("amount")),1),(0,s.Lk)("div",Je,[(0,s.bF)(d,{value:e.$filters.formatADA(e.calculatedSendAmount),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,s.bF)(u,{class:"h-3.5 w-3.5"})])]),(0,s.Lk)("div",et,[(0,s.Lk)("span",tt,(0,n.v_)(e.$t("fees")),1),(0,s.Lk)("div",at,[(0,s.bF)(d,{value:e.$filters.formatADA(e.transactionFee),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,s.bF)(u,{class:"h-3.5 w-3.5"})])])])),e.tokens.length?((0,s.uX)(),(0,s.CE)("div",st,[(0,s.Lk)("div",nt,[e.isReceiver?((0,s.uX)(),(0,s.CE)("span",lt,(0,n.v_)(e.$t("tokensToBeReceived")),1)):((0,s.uX)(),(0,s.CE)("span",ot,(0,n.v_)(e.$t("tokens")),1))]),(0,s.Lk)("div",it,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.tokens,((e,t)=>((0,s.uX)(),(0,s.Wv)(p,{key:t,token:e},null,8,["token"])))),128))])])):(0,s.Q3)("",!0),e.isHdToSingleAddressTransaction?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",rt,[(0,s.Lk)("div",ct,[e.isReceiver?((0,s.uX)(),(0,s.CE)("span",dt,(0,n.v_)(e.$t("totalAdaToBeReceived")),1)):((0,s.uX)(),(0,s.CE)("span",ut,(0,n.v_)(e.$t("totalAdaToBeSpent")),1))]),(0,s.Lk)("div",pt,[(0,s.bF)(d,{value:e.$filters.formatADA(e.totalTransactionAmount),integralClasses:"text-lg font-semibold"},null,8,["value"]),(0,s.bF)(u,{class:"h-3.5 w-3.5"})])]))]),e.transaction?((0,s.uX)(),(0,s.CE)("div",mt,[(0,s.bF)(x,null,{primary:(0,s.k6)((({open:t})=>[(0,s.Lk)("div",vt,[(0,s.Lk)("div",xt,(0,n.v_)(e.$t("moreDetails")),1),(0,s.Lk)("div",kt,[(0,s.bF)(m,{icon:"chevron-right",class:(0,n.C4)(["w-4 h-4 mr-0",{"transform rotate-90":t}])},null,8,["class"])])])])),secondary:(0,s.k6)((()=>[(0,s.bF)(v,{transaction:e.transaction},null,8,["transaction"])])),_:1})])):(0,s.Q3)("",!0),(0,s.Lk)("div",ft,[(0,s.bF)(k,{isLoading:!1,disabled:e.isTransactionSubmitting,class:"btn btn-md btn-primary-outline flex-grow",onClick:e.close},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("cancel")),1)])),_:1},8,["disabled","onClick"]),(0,s.bF)(k,{isLoading:e.isTransactionSubmitting,disabled:e.isTransactionSubmitting,class:"btn btn-md btn-primary capitalize flex-grow",onClick:e.confirm},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("confirm")),1)])),_:1},8,["isLoading","disabled","onClick"])])])])}var bt=a(83761),yt=a(83031),ht=a(24045),Ct=a(55361),wt=a(42738),At=a(97484),Lt=a(25426),Tt=a(48156),Et=a(14784),Dt=a(73111),_t=a(96219),Rt=a(4214),St=a(49667),Wt=(0,s.pM)({name:"ConfirmTransactionModal",components:{TokenBadge:bt.A,DecimalNumberVue:ht.A,ScamAddressWarningVue:Ct.A,ContactAndAdahandleLabel:wt.A,TransactionDetails:Dt.A,AppButton:oe.A,AppExpand:_t.A},props:{transaction:{type:[te.Transaction,je.z],required:!0},callback:{type:Function,required:!0},isReceiver:{type:Boolean,required:!0}},setup(e){const{t:t}=(0,Tt.s9)(),a=(0,N.KR)(!1),n=(0,O.G)(),l=(0,J.f)(),o=(0,N.KR)([]),i=(0,J.f)(),r=n.activeAccount;(0,s.sV)((()=>{c()}));const c=async()=>{const e=await(0,At.kK)();o.value=e.filter((e=>e.network==Lt.A.value.NETWORK))},d=e.transaction.getOutputs(),u=d[0].address.getBech32(),p=(0,s.EW)((()=>i.addressAdahandleBidirectionalMap[u])),m=[],v=!1,x=(0,Rt.Oh)(e.transaction,(0,se.keyBy)([...r.externalCredentials,...r.internalCredentials],(e=>e.hash))),k=x.tokens,f=(0,s.EW)((()=>o.value.find((e=>e.address===u))?.name)),g=e.transaction.getFee(),b=x.ada.multipliedBy(-1),y=b,h=b.minus(g),C=(0,s.EW)((()=>i.possibleScamAddressesMap[u])),w=()=>{H._g.openDialog({component:yt.A,props:{title:e.isReceiver?t("warpTransactionComplete"):t("warpTransactionCreated"),description:e.isReceiver?t("warpTransactionCompleteDescription"):t("warpTransactionCreatedDescription"),alertType:Ne.vT.INFO},size:H.sD.lg})},A=()=>{H._g.openDialog({component:yt.A,props:{title:t("failedToSubmitTrx"),description:t("somethingWentWrong"),alertType:Ne.vT.ERROR},size:H.sD.lg})};function L(){H._g.closeDialog()}async function T(t){a.value=!0;try{if(e.isReceiver){const a=await l.signAndSubmitTx(e.transaction,!1,t);a.status?(w(),e.callback()):A()}else{const a=(0,St.n)(),s=await l.getSignedTx(e.transaction,!1,t??a.mnemonic);await(0,le.qr)(s),w(),e.callback()}}catch(s){ie.v.error(s),A()}finally{a.value=!1}}async function E(){Lt.A.value.IS_EXTENSION&&"MNEMONIC"===n.activeAccount?.walletType?H.v3.openDialog({component:Et.A,size:H.sD["maxContent"],props:{onConfirmPassword:e=>{H.v3.closeDialog(),T(e)}}}):T()}return{transactionFee:g,isPossibleScam:C,contactName:f,tokens:k,isTransactionSubmitting:a,adaHandle:p,sendAddr:u,calculatedSendAmount:h,metadataList:m,isHdToSingleAddressTransaction:v,totalTransactionAmount:y,confirm:E,close:L}}});const Ft=(0,ce.A)(Wt,[["render",gt]]);var It=Ft,Mt=a(85278),$t=a(28686);const Xt={class:"max-w-lg"},jt={class:"sm:flex sm:items-start"},Bt={class:"mx-auto flex-shrink-0 flex items-center justify-center h-10 sm:mx-0 w-10 sm:h-10 rounded-full bg-primary-10"},Nt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Ht={class:"mt-2"},Kt=["innerHTML"],zt={class:"mt-5 flex justify-end items-center space-x-3"};function Ot(e,t,a,l,o,i){const r=(0,s.g2)("font-awesome-icon"),c=(0,s.g2)("DialogTitle"),d=(0,s.g2)("AppButton");return(0,s.uX)(),(0,s.CE)("div",Xt,[(0,s.Lk)("div",jt,[(0,s.Lk)("div",Bt,[(0,s.bF)(r,{icon:"info",class:"h-6 w-6 text-primary","aria-hidden":"true"})]),(0,s.Lk)("div",Nt,[(0,s.bF)(c,{as:"h3",class:"text-lg leading-6 font-medium labelColor3"},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.title),1)])),_:1}),(0,s.Lk)("div",Ht,[(0,s.Lk)("p",{class:"text-xs text-gray-500 break-word",innerHTML:e.description},null,8,Kt)])])]),(0,s.Lk)("div",zt,[(0,s.Lk)("button",{type:"button",class:"btn bg-gray-300 text-xs w-full sm:w-20 uppercase px-4 py-2 hover:bg-opacity-80",onClick:t[0]||(t[0]=(...t)=>e.onNo&&e.onNo(...t))},(0,n.v_)(e.$t("no")),1),(0,s.bF)(d,{isLoading:e.isProcessing,disabled:e.isProcessing,class:"btn bg-primary text-xs w-full sm:w-20 uppercase px-4 py-2 font-medium text-white hover:bg-opacity-80",onClick:e.onYes},{default:(0,s.k6)((()=>[(0,s.eW)((0,n.v_)(e.$t("yes")),1)])),_:1},8,["isLoading","disabled","onClick"])])])}var Pt=a(97049),Qt=(0,s.pM)({name:"ConfirmDialog",props:{onConfirm:{type:Function,required:!0},onCancel:{type:Function},title:{type:String,required:!0},description:{type:String,required:!0}},components:{DialogTitle:Pt.L3,AppButton:oe.A},setup(e){const t=(0,N.KR)(!1);async function a(){t.value=!0,e.onConfirm&&await e.onConfirm(),t.value=!1,n()}async function s(){n(),e.onCancel&&e.onCancel(!1)}async function n(){H._g.closeDialog()}return{onYes:a,onNo:s,closeDialog:n,isProcessing:t}}});const Yt=(0,ce.A)(Qt,[["render",Ot]]);var qt=Yt,Vt=a(74353),Gt=a.n(Vt),Ut=a(48287)["Buffer"],Zt=(0,s.pM)({components:{TokenDetails:Mt.A,AppPopover:$t.A},setup(){const e=(0,O.G)(),t=(0,s.EW)((()=>e.activeAccount)),{t:a}=(0,Tt.s9)(),n=(0,s.EW)((()=>t.value.blockedUtxos.map((e=>({trx:`${e.txId}#${e.index}`,address:e.address,amount:e.amount.toString(),paymentCredential:{key:e.paymentCredential.hash},tokens:e.tokens}))))),l=(0,s.EW)((()=>[...t.value.externalCredentials,...t.value.internalCredentials,t.value.stakeCredential].map((e=>{const t={bipPath:e.path.toObject(),key:e.hash};return t})))),o=(0,s.EW)((()=>t.value.warpTxs.map((e=>{const a=Gt()(e.ttl).diff(Gt()(Date.now()),"minutes",!0),s=parseInt((a/60).toString()),o=Gt()().minute(a).minute();if(!e.cborHex)return{rejected:!0,transactionId:e.hash,formattedTTL:Gt()(new Date(e.ttl)).format("MMMM D, YYYY h:mm A"),fees:"",tokens:[],transactionInstance:null,showSignButton:!1,showFeesAsSpent:!1,expiresIn:`${s} Hours ${o} Mins`};const i=new je.z(Ut.from(e.cborHex,"hex"),n.value,l.value,t.value.stakeCredential.path.toObject()),r=(0,Rt.Oh)(i,(0,se.keyBy)([...t.value.externalCredentials,...t.value.internalCredentials],(e=>e.hash))),c={rejected:!1,transactionId:i.getTransactionHash().toString("hex"),fees:i.getFee(),tokens:r.tokens,transactionInstance:i,showSignButton:(0,Rt.iz)(t.value,i),showFeesAsSpent:!r.ada.isZero(),formattedTTL:Gt()(new Date(e.ttl)).format("MMMM D, YYYY h:mm A"),expiresIn:`${s} Hours ${o} Mins`};return c}))));async function i(e){H._g.openDialog({component:It,title:a("transactionConfirmModalTitle"),size:H.sD["2xl"],props:{transaction:e,isReceiver:!0,callback:()=>{d()}}})}async function r(e){H._g.openDialog({component:qt,props:{alertType:Ne.vT.ERROR,title:a("confirmWarpRejectTitle"),description:a("confirmWarpRejectDescription"),onConfirm:async function(){await c(e)}},size:H.sD["2xl"]})}async function c(e){try{await(0,le.KO)(e.getTransactionHash().toString("hex")),await d()}catch(t){H._g.openDialog({component:yt.A,props:{alertType:Ne.vT.ERROR,title:a("somethingWentWrong"),description:a("failedToRejectWarpTransaction")},size:H.sD.lg})}}async function d(){await e.syncAccountByIndex(t.value.index)}const u=(0,s.EW)((()=>t.value.tokenRegistry));function p(e){return(0,z.GM)(e,u.value)}return{transactions:o,dateIcon:Be.jNm,timeIcon:Be.NZC,signTransaction:i,decodeTokenName:z.$m,getAssetWithDecimals:p,rejectTransaction:r}}});const Jt=(0,ce.A)(Zt,[["render",Xe]]);var ea=Jt,ta=a(71682),aa=a(60008);const sa={class:"card"},na={class:"flex flex-col items-center py-10"},la=(0,s.Lk)("span",{class:"mt-10 labelColor3 text-xl font-medium"},"Warp Transactions",-1),oa={class:"mt-2 max-w-[500px] text-center"},ia={class:"text-sm labelColor2"},ra=(0,s.Lk)("a",{target:"_blank",href:"https://medium.com/@StricaHQ/introducing-warp-transactions-689d3e1339c7",class:"text-sm text-primary-90 hover:underline mt-3"},"https://medium.com/@StricaHQ/introducing-warp-transactions-689d3e1339c7",-1),ca=(0,s.Lk)("div",{class:"flex items-center mt-3"},[(0,s.Lk)("span",{class:"text-sm labelColor2"},"Here's a video explainer from NovaPool"),(0,s.Lk)("a",{target:"_blank",href:"https://youtu.be/IjUz8e7bOSI",class:"ml-2 text-sm text-primary-90 hover:underline"},"https://youtu.be/IjUz8e7bOSI")],-1);function da(e,t,a,l,o,i){const r=(0,s.g2)("WarpIcon");return(0,s.uX)(),(0,s.CE)("div",sa,[(0,s.Lk)("div",na,[(0,s.bF)(r,{class:"h-24 w-24 labelColor1"}),la,(0,s.Lk)("div",oa,[(0,s.Lk)("span",ia,(0,n.v_)(e.$t("enableWarpDescription")),1)]),ra,ca,(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.onEnable&&e.onEnable(...t)),class:"mt-10 btn btn-primary btn-md"},(0,n.v_)(e.$t("enable")),1)])])}var ua=(0,s.pM)({components:{WarpIcon:ta.A},setup(){const e=(0,aa.C)(),t=(0,O.G)();async function a(){e.enableWarp(),t.syncAccountByIndex(t.activeAccount.index)}return{onEnable:a}}});const pa=(0,ce.A)(ua,[["render",da]]);var ma=pa,va=(0,s.pM)({components:{TransactionsVue:ea,WarpIcon:ta.A,WarpDisabledCard:ma},setup(){const{t:e}=(0,Tt.s9)(),t=(0,N.KR)(""),a=(0,N.KR)([]),n=(0,N.KR)([]),l=(0,N.KR)(),o=(0,N.KR)(""),i=(0,O.G)(),r=(0,s.EW)((()=>i.activeAccount)),c=(0,N.KR)(!1),d=(0,aa.C)(),u=(0,s.EW)((()=>d.isWarpEnabled)),p=e=>{n.value.push(e)},m=(0,s.EW)((()=>r.value.tokenRegistry));function v(e){return(0,z.GM)(e,m.value)}function x(){H._g.openDialog({title:"Add Tokens",component:K.A,size:H.sD["2xl"],props:{addToken:p,tokenBalance:r.value.tokenBalance,getAddedTokens:()=>n.value}})}function k(e){n.value.splice(e,1)}function f(){H._g.openDialog({title:"Receiver Address",component:ue,size:H.sD["lg"],props:{onSetStakeKey:(e,s)=>{t.value=e,a.value=s,c.value=!0}}})}async function g(){if(!t.value||0==n.value.length)return;const s={type:"WarpTransaction",recipient:t.value,recipientUtxos:a.value.map((e=>{const[t,a]=e.trx.split("#");return{address:e.address,txId:t,index:parseInt(a),amount:new ae.A(e.amount),stakeCredential:e.stakeCredential?{hash:e.stakeCredential.key,type:"ADDRESS"}:void 0,paymentCredential:{hash:e.paymentCredential.key,type:"ADDRESS"},tokens:e.tokens.map((e=>({assetName:e.assetName,policyId:e.policyId,amount:new ae.A(e.amount)})))}})),tokens:n.value.map((e=>({...e,amount:e.amount.toString()})))};let i;try{i=await(0,ee.d9)(r.value,s),"OK"===i.status?(l.value=i.unsignedTx,o.value="",H._g.openDialog({component:It,title:e("transactionConfirmModalTitle"),size:H.sD["2xl"],props:{transaction:l.value,isReceiver:!1,callback:()=>{l.value=void 0,t.value="",a.value=[],n.value=[],c.value=!1,b()}}})):(l.value=void 0,o.value=e("somethingWentWrong"))}catch(d){throw o.value=e("receiverNotHaveEnoughADA"),d}}async function b(){i.syncAccountByIndex(r.value.index)}return{addedTokens:n,receivingAddress:t,isAddressField:c,openAddTokensModal:x,decodeTokenName:z.$m,getAssetWithDecimals:v,deleteToken:k,openReceiverAddress:f,circleIcon:Be.h$D,createTransaction:g,isWarpEnabled:u,transactionError:o}}});const xa=(0,ce.A)(va,[["render",B]]);var ka=xa}}]);