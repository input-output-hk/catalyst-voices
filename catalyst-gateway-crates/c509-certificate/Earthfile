VERSION 0.8

IMPORT ./../../../catalyst-ci/earthly/rust AS rust-ci

# builder : Set up our target toolchains, and copy our files.
builder:
    DO rust-ci+SETUP

    COPY --dir .cargo .config Cargo.* clippy.toml deny.toml rustfmt.toml src .


check:
    FROM +builder

    DO rust-ci+EXECUTE --cmd="/scripts/std_checks.py"

# build:
#     FROM +builder

#     RUN wasm-pack build --target web
#     # AS LOCAL is for local testing only, will be removed in the future
#     SAVE ARTIFACT ./pkg c509-certificate-binding

# # local-build: Build the service and save it locally
# local-build:
#     FROM +build
#     SAVE ARTIFACT c509-certificate-binding AS LOCAL ./pkg