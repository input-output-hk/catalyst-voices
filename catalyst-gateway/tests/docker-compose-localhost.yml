# This docker compose file is a temporary workaround for the devnet environment.
# It exposes the services on localhost due to a current limitation in how the
# Mithril aggregator serves snapshots.
# This file can be removed once the aggregator is updated, allowing services
# to communicate over the standard Docker network.

services:
  cat-devnet:
    network_mode: host

  event-db:
    network_mode: host
    profiles:
      - devnet

  event-db-v1-migrations:
    network_mode: host
    profiles:
      - devnet

  event-db-migrations:
    network_mode: host
    profiles:
      - devnet

  scylla-node:
    network_mode: host
    profiles:
      - devnet

  cat-gateway:
    depends_on:
      cat-devnet:
        condition: service_healthy
    network_mode: host
    profiles:
      - devnet

  schemathesis-runner:
    network_mode: host
    profiles:
      - devnet