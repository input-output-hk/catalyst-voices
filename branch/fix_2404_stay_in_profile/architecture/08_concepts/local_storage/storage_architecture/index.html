
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="The Project Catalyst Team">
      
      
        <link rel="canonical" href="https://input-output-hk.github.io/catalyst-docs/architecture/08_concepts/local_storage/storage_architecture/">
      
      
        <link rel="prev" href="../../key-derivation/derivation/">
      
      
        <link rel="next" href="../../voting_transaction/transaction/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Local Storage Architecture Specification - Fund 14 Requirements Focus - Project Catalyst - Catalyst Voices</title>
      
    
    

      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


  
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
    
    
      
    
    
  
  
  <style>.md-tag.md-tag--html{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m0 32 34.9 395.8L191.5 480l157.6-52.2L384 32zm308.2 127.9H124.4l4.1 49.4h175.6l-13.6 148.4-97.9 27v.3h-1.1l-98.7-27.3-6-75.8h47.7L138 320l53.5 14.5 53.7-14.5 6-62.2H84.3L71.5 112.2h241.1z"/></svg>');}.md-tag.md-tag--js{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 32v448h448V32zm243.8 349.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6"/></svg>');}.md-tag.md-tag--css{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m480 32-64 368-223.3 80L0 400l19.6-94.8h82l-8 40.6L210 390.2l134.1-44.4 18.8-97.1H29.5l16-82h333.7l10.5-52.7H56.3l16.3-82z"/></svg>');}.md-tag.md-tag--rust{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m23.835 11.703-1.008-.623-.028-.294.866-.807a.348.348 0 0 0-.116-.578l-1.106-.414a9 9 0 0 0-.087-.285l.69-.96a.346.346 0 0 0-.226-.544l-1.166-.19a9 9 0 0 0-.14-.261l.49-1.076a.34.34 0 0 0-.028-.336.35.35 0 0 0-.3-.154l-1.185.041a7 7 0 0 0-.188-.227l.273-1.153a.347.347 0 0 0-.417-.417l-1.153.273-.228-.188.041-1.184a.344.344 0 0 0-.49-.328l-1.076.49-.262-.14-.19-1.167a.348.348 0 0 0-.545-.226l-.96.69a9 9 0 0 0-.285-.086L14.597.453a.348.348 0 0 0-.578-.116l-.807.867a9 9 0 0 0-.294-.028L12.295.168a.346.346 0 0 0-.59 0l-.623 1.008-.294.028L9.98.337a.346.346 0 0 0-.578.116l-.414 1.106-.285.086-.959-.69a.348.348 0 0 0-.545.226l-.19 1.167a9 9 0 0 0-.262.14l-1.076-.49a.346.346 0 0 0-.49.328l.041 1.184a8 8 0 0 0-.228.187l-1.153-.272a.347.347 0 0 0-.417.417l.271 1.153-.186.227-1.184-.042a.346.346 0 0 0-.328.49l.49 1.077a9 9 0 0 0-.14.262l-1.166.19a.348.348 0 0 0-.226.544l.69.958-.087.286-1.106.414a.348.348 0 0 0-.116.578l.866.807a9 9 0 0 0-.028.294l-1.008.623a.344.344 0 0 0 0 .59l1.008.623q.012.147.028.294l-.866.807a.346.346 0 0 0 .116.578l1.106.415q.042.144.087.285l-.69.959a.345.345 0 0 0 .227.544l1.166.19q.069.132.14.262l-.49 1.076a.346.346 0 0 0 .328.49l1.183-.041q.093.115.187.227l-.27 1.154a.346.346 0 0 0 .416.417l1.153-.272q.113.096.228.187l-.041 1.184a.344.344 0 0 0 .49.327l1.076-.49q.13.073.262.14l.19 1.167a.348.348 0 0 0 .545.227l.959-.69a9 9 0 0 0 .285.086l.414 1.107a.345.345 0 0 0 .578.115l.808-.865.294.03.623 1.006a.347.347 0 0 0 .59 0l.623-1.007q.148-.013.294-.03l.807.866a.348.348 0 0 0 .578-.115l.414-1.107a9 9 0 0 0 .285-.087l.959.69a.345.345 0 0 0 .545-.226l.19-1.166.262-.14 1.076.49a.347.347 0 0 0 .49-.328l-.041-1.184a7 7 0 0 0 .227-.187l1.153.272a.347.347 0 0 0 .417-.416l-.272-1.155q.095-.112.187-.227l1.184.041a.344.344 0 0 0 .328-.49l-.49-1.076q.072-.13.141-.262l1.166-.19a.348.348 0 0 0 .226-.544l-.69-.959.087-.285 1.106-.414a.346.346 0 0 0 .116-.579l-.866-.807q.016-.147.028-.294l1.008-.624a.344.344 0 0 0 0-.589zm-6.742 8.355a.714.714 0 0 1 .299-1.396.714.714 0 1 1-.3 1.396zm-.342-2.314a.65.65 0 0 0-.771.5l-.358 1.669a8.7 8.7 0 0 1-3.619.78 8.7 8.7 0 0 1-3.695-.815L7.95 18.21a.65.65 0 0 0-.772-.5l-1.473.317a9 9 0 0 1-.761-.898h7.167c.081 0 .136-.014.136-.088v-2.536c0-.074-.054-.088-.136-.088h-2.096v-1.608h2.268c.206 0 1.106.059 1.393 1.209.09.353.288 1.504.424 1.873.134.413.683 1.238 1.268 1.238h3.572a1 1 0 0 0 .13-.013 9 9 0 0 1-.813.952zm-9.914 2.28a.714.714 0 1 1-.3-1.396.714.714 0 0 1 .3 1.396M4.117 8.997a.714.714 0 1 1-1.303.58.714.714 0 0 1 1.304-.58m-.834 1.981 1.534-.682a.65.65 0 0 0 .33-.858l-.316-.715h1.244v5.602H3.567a8.8 8.8 0 0 1-.284-3.348zm6.734-.543V8.784h2.96c.153 0 1.08.177 1.08.87 0 .574-.712.78-1.296.78zm10.757 1.486q0 .329-.024.651h-.9c-.09 0-.127.059-.127.148v.413c0 .973-.548 1.184-1.03 1.238-.457.052-.964-.191-1.027-.472-.27-1.518-.72-1.843-1.43-2.403.882-.56 1.799-1.386 1.799-2.492 0-1.193-.82-1.945-1.377-2.315-.783-.516-1.65-.62-1.883-.62H5.468a8.77 8.77 0 0 1 4.907-2.77l1.098 1.152a.65.65 0 0 0 .918.02l1.227-1.173a8.78 8.78 0 0 1 6.004 4.276l-.84 1.898a.65.65 0 0 0 .33.859l1.618.718q.042.43.042.872zm-9.3-9.6a.713.713 0 1 1 .984 1.032.714.714 0 0 1-.984-1.031m8.339 6.71a.71.71 0 0 1 .939-.362.714.714 0 1 1-.94.364z"/></svg>');}.md-tag.md-tag--flutter{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.314 0 2.3 12 6 15.7 21.684.013h-7.357zm.014 11.072L7.857 17.53l6.47 6.47H21.7l-6.46-6.468 6.46-6.46h-7.37z"/></svg>');}.md-tag.md-tag--dart{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4.105 4.105S9.158 1.58 11.684.316a3.1 3.1 0 0 1 1.481-.315c.766.047 1.677.788 1.677.788L24 9.948v9.789h-4.263V24H9.789l-9-9C.303 14.5 0 13.795 0 13.105c0-.319.18-.818.316-1.105zm.679.679v11.787c.002.543.021 1.024.498 1.508L10.204 23h8.533v-4.263zm12.055-.678c-.899-.896-1.809-1.78-2.74-2.643-.302-.267-.567-.468-1.07-.462-.37.014-.87.195-.87.195L6.341 4.105z"/></svg>');}.md-tag.md-tag--python{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.25.18.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"/></svg>');}.md-tag.md-tag--earthly{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 14h2v3h3v2h-3v3h-2v-3h-3v-2h3zm3-2c0-3.36-2.07-6.23-5-7.41V5c0 1.1-.9 2-2 2h-2v2c0 .55-.45 1-1 1H8v2h6c.5 0 .9.35 1 .81-1.8 1.04-3 2.98-3 5.19 0 1.5.54 2.85 1.44 3.9L12 22C6.5 22 2 17.5 2 12S6.5 2 12 2s10 4.5 10 10l-.1 1.44c-.56-.48-1.2-.85-1.9-1.1zm-9 7.93V18c-1.1 0-2-.9-2-2v-1l-4.79-4.79C4.08 10.78 4 11.38 4 12c0 4.08 3.06 7.44 7 7.93"/></svg>');}.md-tag.md-tag--github{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>');}.md-tag.md-tag--docker{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.983 11.078h2.119a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.119a.185.185 0 0 0-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 0 0 .186-.186V3.574a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.185m0 2.716h2.118a.187.187 0 0 0 .186-.186V6.29a.186.186 0 0 0-.186-.185h-2.118a.185.185 0 0 0-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 0 0 .184-.186V6.29a.185.185 0 0 0-.185-.185H8.1a.185.185 0 0 0-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 0 0 .185-.186V6.29a.185.185 0 0 0-.185-.185H5.136a.186.186 0 0 0-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 0 0 .186-.185V9.006a.186.186 0 0 0-.186-.186h-2.118a.185.185 0 0 0-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 0 0 .185-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.186.186 0 0 0-.186.186v1.887c0 .102.084.185.186.185m-2.92 0h2.12a.185.185 0 0 0 .184-.185V9.006a.185.185 0 0 0-.184-.186h-2.12a.185.185 0 0 0-.184.185v1.888c0 .102.082.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51q-.508.001-1.01.087c-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.75.75 0 0 0-.75.748 11.4 11.4 0 0 0 .692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137a15.7 15.7 0 0 0 2.93-.266 12.3 12.3 0 0 0 3.823-1.389 10.5 10.5 0 0 0 2.61-2.136c1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288Z"/></svg>');}.md-tag.md-tag--arc42{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.93l-3.75-3.75zm19.61 1.11-4.25 4.25-5.2-5.2 1.77-1.77 1 1 2.47-2.48 1.42 1.42L18.36 17l1.06 1 1.42-1.4zm-16-7.53L1.39 5.64l4.25-4.25L7.4 3.16 4.93 5.64 6 6.7l2.46-2.48 1.42 1.42-1.42 1.41 1 1zM20.71 7c.39-.39.39-1 0-1.41l-2.34-2.3c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75z"/></svg>');}.md-tag.md-tag--adr{--md-tag-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5H9l4-4 4 4h-3v4.43c-.75.46-1.42 1.03-2 1.69zm-1.6 10H8.5l-.7-2H4.6l-.7 2H2l3.2-9h2zm-3.05-3.35L6.2 8l-1.15 3.65zM23 11l-4-4v3a6.747 6.747 0 0 0-7 6.17A3.006 3.006 0 0 0 10.17 20 3.006 3.006 0 0 0 14 21.83 3.01 3.01 0 0 0 15.83 18c-.3-.86-.98-1.53-1.83-1.83.47-4 4.47-4.2 4.95-4.2v3z"/></svg>');}</style>

    
<link rel="stylesheet" href="../../../../stylesheets/adr.css">

    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/mkdocs_d2_plugin.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#local-storage-architecture-specification-fund-14-requirements-focus" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Project Catalyst - Catalyst Voices" class="md-header__button md-logo" aria-label="Project Catalyst - Catalyst Voices" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Project Catalyst - Catalyst Voices
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Local Storage Architecture Specification - Fund 14 Requirements Focus
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/input-output-hk/catalyst-voices" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    input-output-hk/catalyst-voices
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg>
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../getting-started/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 2h2v20H7zm12 7-8 5.6V3.4z"/></svg>
    
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../catalyst-standards/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 5h12a1 1 0 0 1 1 1 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1 1 1 0 0 1 1-1m15-3v2H3V2zm-6 6h2v14h-2zM7 8h2v14H7zm4 0h2v14h-2z"/></svg>
    
  
  Catalyst standards

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../api/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2m0 4H5V9h2m7-2h-4v10h2v-4h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2m0 4h-2V9h2m6 0v6h1v2h-4v-2h1V9h-1V7h4v2Z"/></svg>
    
  
  API

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.93l-3.75-3.75zm19.61 1.11-4.25 4.25-5.2-5.2 1.77-1.77 1 1 2.47-2.48 1.42 1.42L18.36 17l1.06 1 1.42-1.4zm-16-7.53L1.39 5.64l4.25-4.25L7.4 3.16 4.93 5.64 6 6.7l2.46-2.48 1.42 1.42-1.42 1.41 1 1zM20.71 7c.39-.39.39-1 0-1.41l-2.34-2.3c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75z"/></svg>
    
  
  Architecture

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../appendix/" class="md-tabs__link">
          
  
    
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23 18h-3v-3h-2v3h-3v2h3v3h2v-3h3M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.36-.62-.61-1.3-.73-2H6V4h7v5h5v4.08c.33-.05.67-.08 1-.08.34 0 .67.03 1 .08V8l-6-6M8 12v2h8v-2m-8 4v2h5v-2Z"/></svg>
    
  
  Appendix

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Project Catalyst - Catalyst Voices" class="md-nav__button md-logo" aria-label="Project Catalyst - Catalyst Voices" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Project Catalyst - Catalyst Voices
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/input-output-hk/catalyst-voices" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    input-output-hk/catalyst-voices
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3c5.5 0 10 3.58 10 8s-4.5 8-10 8c-1.24 0-2.43-.18-3.53-.5C5.55 21 2 21 2 21c2.33-2.33 2.7-3.9 2.75-4.5C3.05 15.07 2 13.13 2 11c0-4.42 4.5-8 10-8"/></svg>
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../getting-started/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 2h2v20H7zm12 7-8 5.6V3.4z"/></svg>
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/advanced/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 14.25 4.75 11H7c.25-5.61 2.39-10 5-10 2 0 3.77 2.64 4.55 6.45C20.36 8.23 23 10 23 12c0 1.83-2.17 3.43-5.4 4.3l.29-2.03C19.8 13.72 21 12.91 21 12c0-1.06-1.65-2-4.13-2.5.08.79.13 1.63.13 2.5 0 6.08-2.24 11-5 11-1.83 0-3.43-2.17-4.3-5.4l2.03.29C10.28 19.8 11.09 21 12 21c1.66 0 3-4.03 3-9q0-1.5-.15-2.85Q13.5 9 12 9l-1.86.06.29-2.01L12 7c.87 0 1.71.05 2.5.13C14 4.65 13.06 3 12 3c-1.54 0-2.82 3.5-3 8h2.25zM14.25 16 11 19.25V17c-5.61-.25-10-2.39-10-5 0-1.83 2.17-3.43 5.4-4.3l-.29 2.03C4.2 10.28 3 11.09 3 12c0 1.54 3.5 2.82 8 3v-2.25z"/></svg>
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/development/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m13.78 15.3 6 6 2.11-2.16-6-6zm3.72-5.2c-.39 0-.81-.05-1.14-.19L4.97 21.25l-2.11-2.11 7.41-7.4L8.5 9.96l-.72.7-1.45-1.41v2.86l-.7.7-3.52-3.56.7-.7h2.81l-1.4-1.41 3.56-3.56a2.976 2.976 0 0 1 4.22 0L9.89 5.74l1.41 1.4-.71.71 1.79 1.78 1.82-1.88c-.14-.33-.2-.75-.2-1.12a3.49 3.49 0 0 1 3.5-3.52c.59 0 1.11.14 1.58.42L16.41 6.2l1.5 1.5 2.67-2.67c.28.47.42.97.42 1.6 0 1.92-1.55 3.47-3.5 3.47"/></svg>
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../getting-started/quick-start/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23 8v8l-3 1-3.09-5.5c-.26-.46-.99-.23-.91.31L17 21 7 17l1.15-8.06A6.92 6.92 0 0 1 15 3h8l-1.58 2.37C22.36 5.88 23 6.86 23 8M4 5h3.58c.5-.76 1.12-1.43 1.83-2H4c-.55 0-1 .45-1 1s.45 1 1 1m1.84 6H2c-.55 0-1 .45-1 1s.45 1 1 1h3.55zM3 9h3.12l.05-.34c.08-.58.22-1.13.41-1.66H3c-.55 0-1 .45-1 1s.45 1 1 1"/></svg>
  
  <span class="md-ellipsis">
    Quick Start
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../catalyst-standards/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 5h12a1 1 0 0 1 1 1 1 1 0 0 1-1 1H6a1 1 0 0 1-1-1 1 1 0 0 1 1-1m15-3v2H3V2zm-6 6h2v14h-2zM7 8h2v14H7zm4 0h2v14h-2z"/></svg>
  
  <span class="md-ellipsis">
    Catalyst standards
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Catalyst standards
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../catalyst-standards/ballot/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 18v-5h5v5zm1-4v3h3v-3zm6-6.5h5v2h-5zM5 21a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v6.17c-.5-.11-1-.17-1.5-.17H19V5H5v14h8.17c.17.72.46 1.39.83 2zm6-15v5H6V6zm-1 4V7H7v3zm9 2v1.5a4 4 0 0 1 4 4c0 .82-.25 1.58-.67 2.21l-1.09-1.09c.17-.34.26-.72.26-1.12A2.5 2.5 0 0 0 19 15v1.5l-2.25-2.25zm0 11v-1.5a4 4 0 0 1-4-4c0-.82.25-1.58.67-2.21l1.09 1.09c-.17.34-.26.72-.26 1.12A2.5 2.5 0 0 0 19 20v-1.5l2.25 2.25z"/></svg>
  
  <span class="md-ellipsis">
    Ballot
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Ballot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/ballot/catalyst-v1/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 9.5h5v-2h-5zm0 7h5v-2h-5zm6 4.5H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2M6 11h5V6H6zm1-4h3v3H7zM6 18h5v-5H6zm1-4h3v3H7z"/></svg>
  
  <span class="md-ellipsis">
    Catalyst v1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/ballot/catalyst-v2/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 7.5h5v2h-5zm0 7h5v2h-5zM19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm0 16V5H5v14zM11 6v5H6V6zm-1 4V7H7v3zm1 3v5H6v-5zm-1 4v-3H7v3z"/></svg>
  
  <span class="md-ellipsis">
    Catalyst v2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Cbor tags
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Cbor tags
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/cbor_tags/blake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/cbor_tags/ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ULIDs for CBOR
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../catalyst-standards/draft-cips/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 6H2v14a2 2 0 0 0 2 2h14v-2H4zm14.7 1.35-1 1-2.05-2.05 1-1c.21-.22.56-.22.77 0l1.28 1.28c.22.21.22.56 0 .77M9 12.94l6.06-6.06 2.06 2.06L11.06 15H9zM20 4v12H8V4zm0-2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2"/></svg>
  
  <span class="md-ellipsis">
    Draft cips
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Draft cips
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_2" >
        
          
          <label class="md-nav__link" for="__nav_3_4_2" id="__nav_3_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C509 plutus restricted certificate
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_2">
            <span class="md-nav__icon md-icon"></span>
            C509 plutus restricted certificate
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/draft-cips/c509-plutus-restricted-certificate/cip-509C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restricted format for C509 compatibility with Plutus
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_3" >
        
          
          <label class="md-nav__link" for="__nav_3_4_3" id="__nav_3_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Project catalyst x509 role defintions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_3">
            <span class="md-nav__icon md-icon"></span>
            Project catalyst x509 role defintions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/draft-cips/project-catalyst-x509-role-defintions/cip-catalyst-roles/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.1 12.5 1.4 1.41-6.53 6.59L12.5 17l1.4-1.41 2.07 2.08zM10 17l3 3H3v-2c0-2.21 3.58-4 8-4l1.89.11zm1-13a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4"/></svg>
  
  <span class="md-ellipsis">
    Project Catalyst Role Registrations
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4_4" id="__nav_3_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    X509 envelope metadata
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_4">
            <span class="md-nav__icon md-icon"></span>
            X509 envelope metadata
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/draft-cips/x509-envelope-metadata/cip-509A/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.1 12.5 1.4 1.41-6.53 6.59L12.5 17l1.4-1.41 2.07 2.08zM10 17l3 3H3v-2c0-2.21 3.58-4 8-4l1.89.11zm1-13a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4"/></svg>
  
  <span class="md-ellipsis">
    x509 Replayability Protection Envelope
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_5" >
        
          
          <label class="md-nav__link" for="__nav_3_4_5" id="__nav_3_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    X509 rbac signing with cip30
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_5">
            <span class="md-nav__icon md-icon"></span>
            X509 rbac signing with cip30
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/draft-cips/x509-rbac-signing-with-cip30/cip-x509D/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m18 13 3 3v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4l3-3h.83l2 2H6.78L5 17h14l-1.77-2h-1.91l2-2zm1 7v-1H5v1zm-7.66-5-4.95-4.93a.996.996 0 0 1 0-1.41l6.37-6.37a.975.975 0 0 1 1.4.01l4.95 4.95c.39.39.39 1.02 0 1.41L12.75 15a.96.96 0 0 1-1.41 0m2.12-10.59L8.5 9.36l3.55 3.54L17 7.95z"/></svg>
  
  <span class="md-ellipsis">
    Preparing and Signing x509 Metadata with CIP-30
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4_6" >
        
          
          <label class="md-nav__link" for="__nav_3_4_6" id="__nav_3_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    X509 role registration metadata
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4_6">
            <span class="md-nav__icon md-icon"></span>
            X509 role registration metadata
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/draft-cips/x509-role-registration-metadata/cip-509B/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.7 13.35-1 1-2.05-2.05 1-1a.55.55 0 0 1 .77 0l1.28 1.28c.21.21.21.56 0 .77M12 18.94l6.06-6.06 2.05 2.05L14.06 21H12zM12 14c-4.42 0-8 1.79-8 4v2h6v-1.89l4-4c-.66-.08-1.33-.11-2-.11m0-10a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4"/></svg>
  
  <span class="md-ellipsis">
    x509 Role based Access Control Registration
  </span>
  
    
  
  
    <span class="md-status md-status--new"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Permissionless auth
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Permissionless auth
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../catalyst-standards/permissionless-auth/auth-header/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permission-less Authentication for Catalyst
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../api/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 7H5a2 2 0 0 0-2 2v8h2v-4h2v4h2V9a2 2 0 0 0-2-2m0 4H5V9h2m7-2h-4v10h2v-4h2a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2m0 4h-2V9h2m6 0v6h1v2h-4v-2h1V9h-1V7h4v2Z"/></svg>
  
  <span class="md-ellipsis">
    API
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../api/cat-gateway/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 6v5H7V7H5v4H3V9H1v12h2v-2h2v2h2v-2h2v2h2v-2h2v2h2v-2h2v2h2v-2h2v2h2V9h-2v2h-2V7h-2v4h-2V6h-2v5h-2V6zm-6 7h2v4H3zm4 0h2v4H7zm4 0h2v4h-2zm4 0h2v4h-2zm4 0h2v4h-2z"/></svg>
  
  <span class="md-ellipsis">
    Catalyst gateway
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Catalyst gateway
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/rust/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.9 11.7-.9-.5V11l.7-.7c.1-.1.1-.3 0-.4l-.1-.1-.9-.3c0-.1 0-.2-.1-.2l.6-.8c.1-.1.1-.3-.1-.4 0 0-.1 0-.1-.1l-1-.2c0-.1-.1-.1-.1-.2l.4-.9v-.3c-.1-.1-.2-.1-.3-.1h-1s0-.1-.1-.1l.2-1c0-.2-.1-.3-.2-.3h-.1l-1 .2c0-.1-.1-.1-.2-.2v-1q0-.3-.3-.3h-.1l-.9.4h-.1L16 3c0-.2-.2-.3-.3-.2h-.1l-.8.6c-.1 0-.2 0-.2-.1l-.3-.9c-.1-.1-.2-.2-.4-.2 0 0-.1 0-.1.1L13 3h-.2l-.5-.8c-.1-.2-.3-.2-.5-.2l-.1.1-.5.9H11l-.7-.7c-.1-.1-.3-.1-.4 0l-.1.1-.3.9c-.1 0-.2 0-.2.1l-.8-.6c-.2-.1-.4-.1-.5.1V3l-.2 1s-.1 0-.2.1l-.9-.4c-.1-.1-.3 0-.4.1v1.1c0 .1-.1.1-.1.2l-1-.2c-.2-.1-.3 0-.3.2v.1l.2 1c-.1 0-.1.1-.2.1h-1q-.3 0-.3.3v.1l.4.9v.2L3 8c-.2 0-.3.2-.3.3v.1l.6.8c0 .1 0 .2-.1.2l-.8.4c-.1.1-.2.2-.2.4 0 0 0 .1.1.1l.7.7v.2l-.8.5c-.2.1-.2.3-.2.4l.1.1.9.6v.2l-.7.7c-.1.1-.1.3 0 .4l.1.1.9.3c0 .1 0 .2.1.2l-.6.8c-.1.1-.1.3.1.4 0 0 .1 0 .1.1l1 .2c0 .1.1.1.1.2l-.4.9c-.1.1 0 .3.1.4h1.1c.1 0 .1.1.2.1l-.2 1c0 .2.1.3.2.3h.1l1-.2c0 .1.1.1.2.2v1q0 .3.3.3h.1l.9-.4h.1l.2 1c0 .2.2.3.3.2h.1l.8-.6c.1 0 .2 0 .2.1l.3.9c.1.1.2.2.4.2 0 0 .1 0 .1-.1l.8-.7h.2l.5.8c.1.1.3.2.4.1l.1-.1.5-.8h.2l.7.7c.1.1.3.1.4 0l.1-.1.3-.9c.1 0 .2 0 .2-.1l.8.6c.1.1.3.1.4-.1 0 0 0-.1.1-.1l.2-1c.1 0 .1-.1.2-.1l.9.4c.1.1.3 0 .4-.1v-1.1l.2-.2 1 .2c.2 0 .3-.1.3-.2v-.1l-.2-1 .2-.2h1q.3 0 .3-.3v-.1l-.4-.9c0-.1.1-.1.1-.2l1-.2c.2 0 .3-.2.2-.3v-.1l-.6-.8.1-.2.9-.3c.1-.1.2-.2.2-.4 0 0 0-.1-.1-.1L21 13v-.2l.8-.5c.2-.1.2-.3.1-.6q0 .15 0 0m-5.7 7c-.3-.1-.5-.4-.5-.7.1-.3.4-.5.7-.5.3.1.5.4.5.7 0 .4-.3.6-.7.5m-.2-1.9c-.3-.1-.6.1-.6.4l-.4 1.4q-1.35.6-3 .6c-1.1 0-2.1-.2-3.1-.7l-.3-1.4c-.1-.3-.3-.5-.6-.4l-1.2.3c-.2-.2-.4-.5-.6-.7h6c.1 0 .1 0 .1-.1v-2.1c0-.1 0-.1-.1-.1h-1.7v-1.3h1.9c.2 0 .9 0 1.2 1 .1.3.2 1.3.4 1.6.1.3.6 1 1.1 1h3.1c-.2.3-.4.5-.7.8zm-8.3 1.9c-.3.1-.6-.1-.7-.5-.1-.3.1-.6.5-.7s.6.1.7.5c0 .3-.2.6-.5.7M5.4 9.5c.1.3 0 .7-.3.8s-.7 0-.8-.3 0-.7.3-.8c.4-.1.7 0 .8.3m-.7 1.6 1.3-.5c.3-.1.4-.4.3-.7L6 9.3h1V14H5c-.3-1-.4-1.9-.3-2.9m5.6-.4V9.3h2.5c.1 0 .9.1.9.7 0 .5-.6.7-1.1.7zm9 1.2v.5h-.8c-.1 0-.1 0-.1.1v.3c0 .8-.5 1-.9 1s-.8-.2-.9-.4c-.2-1.3-.6-1.5-1.2-2 .7-.5 1.5-1.2 1.5-2.1 0-1-.7-1.6-1.1-1.9-.7-.4-1.4-.5-1.6-.5H6.6c1.1-1.2 2.5-2 4.1-2.3l.9 1c.2.2.5.2.8 0l1-1c2.1.4 3.9 1.7 5 3.6l-.7 1.6c-.1.3 0 .6.3.7l1.3.6zm-7.7-8c.2-.2.6-.2.8 0s.2.6 0 .8q-.45.45-.9 0c-.2-.2-.1-.5.1-.8m6.9 5.6c.1-.3.5-.4.8-.3s.4.5.3.8-.5.4-.8.3-.4-.5-.3-.8"/></svg>
  
  <span class="md-ellipsis">
    Catalyst Gateway Service - Rust Internal API Documentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/openapi-spec/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 22a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-6v7L9.5 7.5 7 9V2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2z"/></svg>
  
  <span class="md-ellipsis">
    OpenAPI - Specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/openapi-swagger/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    OpenAPI - SwaggerUI Viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/openapi-explorer/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    OpenAPI - OpenAPI Explorer Viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/openapi-scalar/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    OpenAPI - Scalar Viewer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../api/cat-gateway/openapi-stoplight-elements/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1m0 8h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1M9 5h1V3H9zm0 8h1v-2H9zm0 8h1v-2H9zM5 3v2h2V3zm0 8v2h2v-2zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    OpenAPI - Stoplight Elements Viewer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 17.25V21h3.75L17.81 9.93l-3.75-3.75zm19.61 1.11-4.25 4.25-5.2-5.2 1.77-1.77 1 1 2.47-2.48 1.42 1.42L18.36 17l1.06 1 1.42-1.4zm-16-7.53L1.39 5.64l4.25-4.25L7.4 3.16 4.93 5.64 6 6.7l2.46-2.48 1.42 1.42-1.42 1.41 1 1zM20.71 7c.39-.39.39-1 0-1.41l-2.34-2.3c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75z"/></svg>
  
  <span class="md-ellipsis">
    Architecture
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../01_introduction_and_goals/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.172 6.75h-1.861l-4.566 4.564a1.874 1.874 0 1 1-1.06-1.06l4.565-4.565V3.828a.94.94 0 0 1 .275-.664l1.73-1.73a.25.25 0 0 1 .25-.063c.089.026.155.1.173.191l.46 2.301 2.3.46c.09.018.164.084.19.173a.25.25 0 0 1-.062.249l-1.731 1.73a.94.94 0 0 1-.663.275"/><path d="M2.625 12A9.375 9.375 0 0 0 12 21.375 9.375 9.375 0 0 0 21.375 12c0-.898-.126-1.766-.361-2.587A.75.75 0 0 1 22.455 9c.274.954.42 1.96.42 3 0 6.006-4.869 10.875-10.875 10.875S1.125 18.006 1.125 12 5.994 1.125 12 1.125c1.015-.001 2.024.14 3 .419a.75.75 0 1 1-.413 1.442A9.4 9.4 0 0 0 12 2.625 9.375 9.375 0 0 0 2.625 12"/><path d="M7.125 12a4.874 4.874 0 1 0 9.717-.569.748.748 0 0 1 1.047-.798c.251.112.42.351.442.625a6.373 6.373 0 0 1-10.836 5.253 6.376 6.376 0 0 1 5.236-10.844.75.75 0 1 1-.17 1.49A4.876 4.876 0 0 0 7.125 12"/></svg>
  
  <span class="md-ellipsis">
    Introduction and Goals
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../02_architecture_constraints/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.24 6.76c-1.84-1.85-4.59-2.23-6.82-1.17l-.96-.96a.996.996 0 0 0-1.41 0l-.08.09C10.83 3.75 10 3 9 3c-1.1 0-2 .9-2 2 0 .09 0 .18.03.26C6.42 5.61 6 6.25 6 7c0 .46.16.87.42 1.21A.97.97 0 0 0 6 9v1.35c-2.33.82-4 3.04-4 5.65 0 3.31 2.69 6 6 6s6-2.69 6-6a5.99 5.99 0 0 0-4-5.65V9a.97.97 0 0 0-.42-.79c.26-.34.42-.75.42-1.21 0-.09 0-.18-.03-.26.18-.1.33-.24.46-.36C11.36 6.88 12 7.86 12 9v.08c.13.07.25.17.38.25.19-.42.45-.83.79-1.16a4.01 4.01 0 0 1 5.66 0 4.01 4.01 0 0 1 0 5.66c-.8.8-1.83 1.17-2.9 1.17.07.32.07.66.07 1s-.03.67-.07 1c1.57 0 3.12-.57 4.31-1.76a5.98 5.98 0 0 0 0-8.48M9 4c.55 0 1 .45 1 1 0 .33-.17.61-.42.79C9.22 5.31 8.65 5 8 5c0-.55.45-1 1-1M7.42 6.21c.36.48.93.79 1.58.79 0 .55-.45 1-1 1s-1-.45-1-1c0-.33.17-.61.42-.79M12 16c0 2.21-1.79 4-4 4s-4-1.79-4-4 1.79-4 4-4 4 1.79 4 4"/></svg>
  
  <span class="md-ellipsis">
    Architecture Constraints
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../03_system_scope_and_context/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m21.9 8.9-1.7 1-4-6.9 1.7-1zm-12.1-1 3 5.2 6.1-3.5-3-5.2zm1.6 4.8-2-3.5-4.3 2.5 2 3.5zm-9.3 1.9 1 1.7 2.6-1.5-1-1.7zm10-.6-.3-.4-4.3 2.5.3.4c.2.3.5.6.8.8L7 22h2l1.4-4.3h.1L12 22h2l-1.9-5.6c.5-.7.5-1.6 0-2.4"/></svg>
  
  <span class="md-ellipsis">
    System Scope and Context
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../04_solution_strategy/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m6.91 5.5 2.3 2.29-1.42 1.42-2.29-2.3-2.29 2.3-1.42-1.42 2.3-2.29-2.3-2.29 1.42-1.42 2.29 2.3 2.29-2.3 1.42 1.42m13 13-1.42-1.42-2.29 2.3-2.29-2.3-1.42 1.42 2.3 2.29-2.3 2.29 1.42 1.42 2.29-2.3 2.29 2.3 1.42-1.42-2.3-2.29m.49-11.67L17.18 11 15.6 9.73l1.17-1.5a9.08 9.08 0 0 0-6.66 5.62A4.5 4.5 0 1 1 7.5 13a4 4 0 0 1 .78.08 11.27 11.27 0 0 1 8.15-6.82L15 5.18l1.27-1.58M10 17.5A2.5 2.5 0 1 0 7.5 20a2.5 2.5 0 0 0 2.5-2.5"/></svg>
  
  <span class="md-ellipsis">
    Solution Strategy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../05_building_block_view/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6V5a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v1h-2V5a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v1H3v14h8.81A6.5 6.5 0 0 1 21 10.81V6m-.69 11.9a4.5 4.5 0 1 0-1.43 1.42L22 22.39 23.39 21m-6.89-3a2.5 2.5 0 1 1 2.5-2.5 2.5 2.5 0 0 1-2.5 2.5"/></svg>
  
  <span class="md-ellipsis">
    Building Block View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../06_runtime_view/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.5 5.5a2 2 0 0 0 2-2 2 2 0 0 0-2-2 2 2 0 0 0-2 2 2 2 0 0 0 2 2m-3.6 13.9 1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3A7.3 7.3 0 0 0 22 13v-2c-1.76.03-3.4-.89-4.3-2.4l-1-1.6c-.36-.6-1-1-1.7-1-.3 0-.5.1-.8.1L9 8.3V13h2V9.6l1.8-.7-1.6 8.1-4.9-1-.4 2zM4 9a1 1 0 0 1-1-1 1 1 0 0 1 1-1h3v2zm1-4a1 1 0 0 1-1-1 1 1 0 0 1 1-1h5v2zm-2 8a1 1 0 0 1-1-1 1 1 0 0 1 1-1h4v2z"/></svg>
  
  <span class="md-ellipsis">
    Runtime View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../07_deployment_view/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 19h1a1 1 0 0 1 1 1h7v2h-7a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1H2v-2h7a1 1 0 0 1 1-1h1v-2H4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-7zM4 3h16a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1m5 4h1V5H9zm0 8h1v-2H9zM5 5v2h2V5zm0 8v2h2v-2z"/></svg>
  
  <span class="md-ellipsis">
    Deployment View
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.5 19A1.5 1.5 0 0 1 5 20.5 1.5 1.5 0 0 1 3.5 22 1.5 1.5 0 0 1 2 20.5 1.5 1.5 0 0 1 3.5 19m5-3a2.5 2.5 0 0 1 2.5 2.5A2.5 2.5 0 0 1 8.5 21 2.5 2.5 0 0 1 6 18.5 2.5 2.5 0 0 1 8.5 16m6-1c-1.19 0-2.27-.5-3-1.35-.73.85-1.81 1.35-3 1.35-1.96 0-3.59-1.41-3.93-3.26A4.02 4.02 0 0 1 2 8a4 4 0 0 1 4-4c.26 0 .5.03.77.07C7.5 3.41 8.45 3 9.5 3c1.19 0 2.27.5 3 1.35.73-.85 1.81-1.35 3-1.35 1.96 0 3.59 1.41 3.93 3.26A4.02 4.02 0 0 1 22 10a4 4 0 0 1-4 4l-.77-.07c-.73.66-1.68 1.07-2.73 1.07"/></svg>
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_9" id="__nav_5_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_9">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../domain-models/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Domain Models
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_9_2" id="__nav_5_9_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_2">
            <span class="md-nav__icon md-icon"></span>
            Domain Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain-models/data-attributes/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.38 6h11.25L12 16zM3 4l9 16 9-16z"/></svg>
  
  <span class="md-ellipsis">
    Data Attributes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain-models/roles_actors/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4"/></svg>
  
  <span class="md-ellipsis">
    Roles/Actors
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_2_4" >
        
          
          <label class="md-nav__link" for="__nav_5_9_2_4" id="__nav_5_9_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Model Instances
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_9_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_2_4">
            <span class="md-nav__icon md-icon"></span>
            Model Instances
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain-models/instances/proposal/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17.63 5.84C17.27 5.33 16.67 5 16 5H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h11c.67 0 1.27-.34 1.63-.85L22 12z"/></svg>
  
  <span class="md-ellipsis">
    Entity Identity Card
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_2_5" >
        
          
          <label class="md-nav__link" for="__nav_5_9_2_5" id="__nav_5_9_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guidance
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_9_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_2_5">
            <span class="md-nav__icon md-icon"></span>
            Guidance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../domain-models/templates/guidance_entity_id_card/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guidance entity id card
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_3" >
        
          
          <label class="md-nav__link" for="__nav_5_9_3" id="__nav_5_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Event db
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_3">
            <span class="md-nav__icon md-icon"></span>
            Event db
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event_db/migrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrations (Version 2)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../event_db/schema/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 3C7.58 3 4 4.79 4 7s3.58 4 8 4 8-1.79 8-4-3.58-4-8-4M4 9v3c0 2.21 3.58 4 8 4s8-1.79 8-4V9c0 2.21-3.58 4-8 4s-8-1.79-8-4m0 5v3c0 2.21 3.58 4 8 4s8-1.79 8-4v-3c0 2.21-3.58 4-8 4s-8-1.79-8-4"/></svg>
  
  <span class="md-ellipsis">
    Schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_4" >
        
          
          <label class="md-nav__link" for="__nav_5_9_4" id="__nav_5_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gateway
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_4">
            <span class="md-nav__icon md-icon"></span>
            Gateway
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gateway/mechanics/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M15.73 12.81c-.97.52-1.81 1.26-2.44 2.15l-1.74-3.33-3.89 3.87L8 18l-1.05 1.06-1.77-3.19L2 14.11l1.06-1.06 2.48.35 3.89-3.9L2 5.62l1.41-1.41 9.2 2.12 3.89-3.89a1.49 1.49 0 0 1 2.12 0c.58.59.58 1.56 0 2.12l-3.89 3.89zm8.07 7.59c.1 0 .1.1 0 .2l-1 1.7c-.1.1-.2.1-.3.1l-1.2-.4c-.3.2-.5.3-.8.5l-.2 1.3c0 .1-.1.2-.2.2h-2c-.1 0-.2-.1-.3-.2l-.2-1.3c-.3-.1-.6-.3-.8-.5l-1.2.5c-.1 0-.2 0-.3-.1l-1-1.7c-.1-.1 0-.2.1-.3l1.1-.8v-1l-1.1-.8c-.1-.1-.1-.2-.1-.3l1-1.7c.1-.1.2-.1.3-.1l1.2.5c.3-.2.5-.3.8-.5l.2-1.3c0-.1.1-.2.3-.2h2c.1 0 .2.1.2.2l.2 1.3c.3.1.6.3.9.5l1.2-.5c.1 0 .3 0 .3.1l1 1.7c.1.1 0 .2-.1.3l-1.1.8v1zM20.5 19c0-.8-.7-1.5-1.5-1.5s-1.5.7-1.5 1.5.7 1.5 1.5 1.5 1.5-.7 1.5-1.5"/></svg>
  
  <span class="md-ellipsis">
    Mechanics
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_5" >
        
          
          <label class="md-nav__link" for="__nav_5_9_5" id="__nav_5_9_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Immutable Ledger
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_5">
            <span class="md-nav__icon md-icon"></span>
            Immutable Ledger
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../immutable_ledger/ledger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Immutable Ledger Design
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_6" >
        
          
          <label class="md-nav__link" for="__nav_5_9_6" id="__nav_5_9_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Key Derivation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_6">
            <span class="md-nav__icon md-icon"></span>
            Key Derivation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../key-derivation/derivation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Derivation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_7" checked>
        
          
          <label class="md-nav__link" for="__nav_5_9_7" id="__nav_5_9_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Local Storage
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_9_7">
            <span class="md-nav__icon md-icon"></span>
            Local Storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Local Storage Architecture Specification - Fund 14 Requirements Focus
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Local Storage Architecture Specification - Fund 14 Requirements Focus
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-summary" class="md-nav__link">
    <span class="md-ellipsis">
      1 Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-requirements-constraints" class="md-nav__link">
    <span class="md-ellipsis">
      2 Requirements &amp; Constraints
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 Requirements & Constraints">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-functional-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 Functional Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-non-functional-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 Non-Functional Requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23-constraints-assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 Constraints &amp; Assumptions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-system-overview" class="md-nav__link">
    <span class="md-ellipsis">
      3 System Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 System Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-key-features" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Key Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-core-components" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 Core Components
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-system-context-and-component-relationship" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 System Context and Component Relationship
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 System Context and Component Relationship">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#system-context-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      System Context Diagram
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#component-relationships" class="md-nav__link">
    <span class="md-ellipsis">
      Component Relationships
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-component-overview" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 Component Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 Component Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#341-high-level-system-separation" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.1 High-Level System Separation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#342-data-storage-tables" class="md-nav__link">
    <span class="md-ellipsis">
      3.4.2 Data Storage Tables
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-technology-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      4 Technology Evaluation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Technology Evaluation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-evaluation-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Evaluation Criteria
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-comparative-analysis-of-storage-solutions" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Comparative Analysis of Storage Solutions
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-database-design" class="md-nav__link">
    <span class="md-ellipsis">
      5 Database Design
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 Database Design">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-er-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 ER Diagram
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 ER Diagram">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-documents-table" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.1 Documents Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-documentmetadata-table" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.2 DocumentMetadata Table
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-drafts-table" class="md-nav__link">
    <span class="md-ellipsis">
      5.1.3 Drafts Table
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-uuid" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 UUID
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.2 UUID">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-blob-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Option 1: BLOB Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-text-storage" class="md-nav__link">
    <span class="md-ellipsis">
      Option 2: TEXT Storage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-3-int8-pair-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      Option 3: INT8 Pair (Recommended)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      6 Implementation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 Implementation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-json-document-handling" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 JSON Document Handling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 JSON Document Handling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#611-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.1 Indexes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#612-dynamic-field-indexing-for-lookups" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.2 Dynamic Field Indexing for Lookups
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#613-process-and-flow" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.3 Process and Flow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#614-enabling-foreign-keys-in-sqlite" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.4 Enabling Foreign Keys in SQLite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#615-example-drift-definition-with-foreign-reference-and-indexes" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.5 Example Drift definition with foreign reference and indexes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#616-example-search-over-category" class="md-nav__link">
    <span class="md-ellipsis">
      6.1.6 Example search over category
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-uuid-conversion-to-iohi-idlo" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 UUID Conversion to IOHI / IDLO
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 UUID Conversion to IOHI / IDLO">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#621-uuidv7-example-handler-timestamp-extraction" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.1 UUIDv7 Example Handler &amp; Timestamp Extraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#622-uuidv7-time-range-query-optimisation" class="md-nav__link">
    <span class="md-ellipsis">
      6.2.2 UUIDv7 Time-Range Query Optimisation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-draft-document-management" class="md-nav__link">
    <span class="md-ellipsis">
      7 Draft Document Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 Draft Document Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-storage-options" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Storage Options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-draft-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Draft Workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-draft-database-design" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Draft Database Design
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-offline-synchronization-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      8 Offline &amp; Synchronization Strategy
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8 Offline & Synchronization Strategy">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#81-local-first-operations" class="md-nav__link">
    <span class="md-ellipsis">
      8.1 Local-First Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#82-document-retrieval-workflow" class="md-nav__link">
    <span class="md-ellipsis">
      8.2 Document Retrieval Workflow
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#83-index-api-usage" class="md-nav__link">
    <span class="md-ellipsis">
      8.3 Index API Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#84-draft-management" class="md-nav__link">
    <span class="md-ellipsis">
      8.4 Draft Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#85-version-management" class="md-nav__link">
    <span class="md-ellipsis">
      8.5 Version Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#86-conflict-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      8.6 Conflict Resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#87-offline-mode" class="md-nav__link">
    <span class="md-ellipsis">
      8.7 Offline Mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#88-client-metadata-bootstrap" class="md-nav__link">
    <span class="md-ellipsis">
      8.8 Client metadata bootstrap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#89-background-synchronisation-optional" class="md-nav__link">
    <span class="md-ellipsis">
      8.9 Background Synchronisation (Optional)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#810-performance-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      8.10 Performance Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-api-integration-details" class="md-nav__link">
    <span class="md-ellipsis">
      9 API Integration Details
    </span>
  </a>
  
    <nav class="md-nav" aria-label="9 API Integration Details">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#91-latest-api-specification" class="md-nav__link">
    <span class="md-ellipsis">
      9.1 Latest API Specification
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-out-of-scope" class="md-nav__link">
    <span class="md-ellipsis">
      10 Out of Scope
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#11-known-limitations" class="md-nav__link">
    <span class="md-ellipsis">
      11 Known Limitations
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#12-references" class="md-nav__link">
    <span class="md-ellipsis">
      12 References
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#13-document-version-changes" class="md-nav__link">
    <span class="md-ellipsis">
      13 Document Version Changes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="13 Document Version Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#v11-changes" class="md-nav__link">
    <span class="md-ellipsis">
      V1.1 Changes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_9_8" >
        
          
          <label class="md-nav__link" for="__nav_5_9_8" id="__nav_5_9_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Voting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_9_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_9_8">
            <span class="md-nav__icon md-icon"></span>
            Voting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../voting_transaction/transaction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transaction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../voting_transaction/crypto/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crypto
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../09_architecture_decisions/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 5H9l4-4 4 4h-3v4.43c-.75.46-1.42 1.03-2 1.69zm-1.6 10H8.5l-.7-2H4.6l-.7 2H2l3.2-9h2zm-3.05-3.35L6.2 8l-1.15 3.65zM23 11l-4-4v3a6.747 6.747 0 0 0-7 6.17A3.006 3.006 0 0 0 10.17 20 3.006 3.006 0 0 0 14 21.83 3.01 3.01 0 0 0 15.83 18c-.3-.86-.98-1.53-1.83-1.83.47-4 4.47-4.2 4.95-4.2v3z"/></svg>
  
  <span class="md-ellipsis">
    Architecture Decisions
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_10">
            <span class="md-nav__icon md-icon"></span>
            Architecture Decisions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0001-arch-std/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0001 Architecture Documentation Standard
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0002-adr/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0002 Architecture Decision Records
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0003-flutter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0003 Flutter for Catalyst Voting Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0004-webp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0004 Store/Display images in WebP format.
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0005-flutter-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0005 Catalyst Voices Frontend App Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0006-cursor-pegination-cat-data-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0006 Cursor-based pagination for Catalyst Data Service
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0007-api-versions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0007 Api Versions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0008-structured-logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0008 Structured Logging
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../09_architecture_decisions/0009-uuid7-vs-ulid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    0009 UUIDv7 vs ULID
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../10_quality/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.5 19A1.5 1.5 0 0 1 5 20.5 1.5 1.5 0 0 1 3.5 22 1.5 1.5 0 0 1 2 20.5 1.5 1.5 0 0 1 3.5 19m5-3a2.5 2.5 0 0 1 2.5 2.5A2.5 2.5 0 0 1 8.5 21 2.5 2.5 0 0 1 6 18.5 2.5 2.5 0 0 1 8.5 16m6-1c-1.19 0-2.27-.5-3-1.35-.73.85-1.81 1.35-3 1.35-1.96 0-3.59-1.41-3.93-3.26A4.02 4.02 0 0 1 2 8a4 4 0 0 1 4-4c.26 0 .5.03.77.07C7.5 3.41 8.45 3 9.5 3c1.19 0 2.27.5 3 1.35.73-.85 1.81-1.35 3-1.35 1.96 0 3.59 1.41 3.93 3.26A4.02 4.02 0 0 1 22 10a4 4 0 0 1-4 4l-.77-.07c-.73.66-1.68 1.07-2.73 1.07"/></svg>
  
  <span class="md-ellipsis">
    Quality
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            Quality
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10_quality/quality_requirements/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.5 13.5h2v-3h-2M18 14a1 1 0 0 1-1 1h-.75v1.5h-1.5V15H14a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1m-7 5H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11m8-5H5c-1.11 0-2 .89-2 2v12a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2"/></svg>
  
  <span class="md-ellipsis">
    Quality Requirements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10_quality/test_reports/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test reports
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_11_4" >
        
          
          <label class="md-nav__link" for="__nav_5_11_4" id="__nav_5_11_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Testplans
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_11_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11_4">
            <span class="md-nav__icon md-icon"></span>
            Testplans
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10_quality/testplans/flutter_cardano_integration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flutter cardano integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../10_quality/testplans/template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Template
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../11_technical_risks/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M173.2 0c-1.8 0-3.5.7-4.8 2C138.5 32.3 120 74 120 120c0 26.2 6 50.9 16.6 73-22 2.4-43.8 9.1-64.2 20.5-34.5 19.3-59.1 48.9-72 82.5-.7 1.7-.5 3.7.5 5.2 2.2 3.7 7.4 4.3 10.6 1.3C64.2 254.3 158 245.1 205 324s-8.1 153.1-77.6 173.2c-4.2 1.2-6.3 5.9-4.1 9.6 1 1.6 2.6 2.7 4.5 3 36.5 5.9 75.2.1 109.7-19.2 20.4-11.4 37.4-26.5 50.5-43.8 13.1 17.3 30.1 32.4 50.5 43.8 34.5 19.3 73.3 25.2 109.7 19.2 1.9-.3 3.5-1.4 4.5-3 2.2-3.7.1-8.4-4.1-9.6C379.1 477.1 324 403 371 324s140.7-69.8 193.5-21.4c3.2 2.9 8.4 2.3 10.6-1.3 1-1.6 1.1-3.5.5-5.2-12.9-33.6-37.5-63.2-72.1-82.5a168.8 168.8 0 0 0-64.2-20.5C450 170.9 456 146.2 456 120c0-46-18.5-87.7-48.4-118-1.3-1.3-3-2-4.8-2-5 0-8.4 5.2-6.7 9.9C421.7 80.5 385.6 176 288 176S154.3 80.5 179.9 9.9c1.7-4.7-1.6-9.9-6.7-9.9M240 272a48 48 0 1 1 96 0 48 48 0 1 1-96 0m-58.3 145.6c6.3-11.8 9.8-25.1 8.6-39.8-19.5-18-34-41.4-41.2-67.8-12.5-8.1-26.2-11.8-40-12.4-9-.4-18.1.6-27.1 2.7 7.8 57.1 38.7 106.8 82.9 139.4 6.8-6.7 12.6-14.1 16.8-22.1M288 64c-28.8 0-56.3 5.9-81.2 16.5 2 8.3 5 16.2 9 23.5 6.8 12.4 16.7 23.1 30.1 30.3 13.3-4.1 27.5-6.3 42.2-6.3s28.8 2.2 42.2 6.3c13.4-7.2 23.3-17.9 30.1-30.3 4-7.3 7-15.2 9-23.5C344.3 69.9 316.8 64 288 64m138.9 246c-7.2 26.4-21.7 49.7-41.2 67.8-1.2 14.7 2.2 28.1 8.6 39.8 4.3 8 10 15.4 16.8 22.1 44.3-32.6 75.2-82.3 82.9-139.4-9-2.2-18.1-3.1-27.1-2.7-13.8.6-27.5 4.4-40 12.4"/></svg>
  
  <span class="md-ellipsis">
    Risks and Technical Debts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../12_glossary/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 14v3h-3v2h3v3h2v-3h3v-2h-3v-3m1-3v1.3c-.6-.2-1.3-.3-2-.3-1.2 0-2.4.4-3.3 1H7v-2zm-7.9 6H7v-2h5.8c-.3.6-.6 1.3-.7 2M7 7h13v2H7zM5 19h2v2H3V3h4v2H5z"/></svg>
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../appendix/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M23 18h-3v-3h-2v3h-3v2h3v3h2v-3h3M6 2a2 2 0 0 0-2 2v16c0 1.11.89 2 2 2h7.81c-.36-.62-.61-1.3-.73-2H6V4h7v5h5v4.08c.33-.05.67-.08 1-.08.34 0 .67.03 1 .08V8l-6-6M8 12v2h8v-2m-8 4v2h5v-2Z"/></svg>
  
  <span class="md-ellipsis">
    Appendix
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Appendix
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../appendix/tags/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m345 39.1 127.8 129.3c52.4 53 52.4 138.2 0 191.2l-112 113.3c-9.3 9.4-24.5 9.5-33.9.2s-9.5-24.5-.2-33.9l111.9-113.3c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6.2-33.9s24.6-9.2 33.9.2zM0 229.5V80c0-26.5 21.5-48 48-48h149.5c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5M144 144a32 32 0 1 0-64 0 32 32 0 1 0 64 0"/></svg>
  
  <span class="md-ellipsis">
    Tag Index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../appendix/important/" class="md-nav__link ">
              
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m23 12-2.44 2.78.34 3.68-3.61.82-1.89 3.18L12 21l-3.4 1.47-1.89-3.18-3.61-.82.34-3.69L1 12l2.44-2.79-.34-3.68 3.61-.81L8.6 1.54 12 3l3.4-1.46 1.89 3.18 3.61.82-.34 3.68zm-2.67 0L18.5 9.89l.24-2.79L16 6.5l-1.42-2.43L12 5.18 9.42 4.07 8 6.5l-2.74.59.24 2.79L3.67 12l1.83 2.1-.24 2.8 2.74.6 1.42 2.43L12 18.81l2.58 1.11L16 17.5l2.74-.61-.24-2.79zM11 15h2v2h-2zm0-8h2v6h-2z"/></svg>
  
  <span class="md-ellipsis">
    Important
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_3">
            <span class="md-nav__icon md-icon"></span>
            Important
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../appendix/important/contributing/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.7 7c-.3.4-.7.7-.7 1s.3.6.6 1c.5.5 1 .9.9 1.4 0 .5-.5 1-1 1.5L16.4 16 15 14.7l4.2-4.2-1-1-1.4 1.4L13 7.1l4-3.8c.4-.4 1-.4 1.4 0l2.3 2.3c.4.4.4 1.1 0 1.4M3 17.2l9.6-9.6 3.7 3.8L6.8 21H3zM7 2v3h3v2H7v3H5V7H2V5h3V2z"/></svg>
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../appendix/important/coc/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19.7 12.9 14 18.6h-2.3v-2.3l5.7-5.7zm3.4-.8c0 .3-.3.6-.6.9L20 15.5l-.9-.9 2.6-2.6-.6-.6-.7.7-2.3-2.3 2.2-2.1c.2-.2.6-.2.9 0l1.4 1.4c.2.2.2.6 0 .9-.2.2-.4.4-.4.6s.2.4.4.6c.3.3.6.6.5.9M3 20V4h7v5h5v1.5l2-2V8l-6-6H3c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2zm8-2.9c-.2 0-.4.1-.5.1L10 15H8.5l-2.1 1.7L7 14H5.5l-1 5H6l2.9-2.6.6 2.3h1l.5-.1z"/></svg>
  
  <span class="md-ellipsis">
    Code of Conduct
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../appendix/important/security/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 12h7c-.53 4.11-3.28 7.78-7 8.92zH5V6.3l7-3.11M12 1 3 5v6c0 5.55 3.84 10.73 9 12 5.16-1.27 9-6.45 9-12V5z"/></svg>
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../appendix/important/license/" class="md-nav__link">
        
  
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 10a3.04 3.04 0 0 1 3-3 3.04 3.04 0 0 1 3 3 3.04 3.04 0 0 1-3 3 3.04 3.04 0 0 1-3-3m3 9 4 1v-3.08A7.54 7.54 0 0 1 12 18a7.54 7.54 0 0 1-4-1.08V20m4-16a5.78 5.78 0 0 0-4.24 1.74A5.78 5.78 0 0 0 6 10a5.78 5.78 0 0 0 1.76 4.23A5.78 5.78 0 0 0 12 16a5.78 5.78 0 0 0 4.24-1.77A5.78 5.78 0 0 0 18 10a5.78 5.78 0 0 0-1.76-4.26A5.78 5.78 0 0 0 12 4m8 6a8 8 0 0 1-.57 2.8A7.8 7.8 0 0 1 18 15.28V23l-6-2-6 2v-7.72A7.9 7.9 0 0 1 4 10a7.68 7.68 0 0 1 2.33-5.64A7.73 7.73 0 0 1 12 2a7.73 7.73 0 0 1 5.67 2.36A7.68 7.68 0 0 1 20 10"/></svg>
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

<nav class="md-tags" >
  
</nav>


  
  






<h1 id="local-storage-architecture-specification-fund-14-requirements-focus">Local Storage Architecture Specification - Fund 14 Requirements Focus<a class="headerlink" href="#local-storage-architecture-specification-fund-14-requirements-focus" title="Permanent link">&para;</a></h1>
<p>Version: 1.1 January 2025</p>
<hr />
<table>
<thead>
<tr>
<th>Version</th>
<th>Date</th>
<th>Author</th>
<th>Summary of Changes</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.0</td>
<td>2025-01-27</td>
<td>Neil McAuliffe</td>
<td>Initial draft</td>
<td></td>
</tr>
<tr>
<td>1.1</td>
<td>2025-01-31</td>
<td>Neil McAuliffe</td>
<td>Narrow focus for Fund 14</td>
<td>Clarified scope</td>
</tr>
</tbody>
</table>
<hr />
<div class="toc">
<ul>
<li><a href="#local-storage-architecture-specification-fund-14-requirements-focus">Local Storage Architecture Specification - Fund 14 Requirements Focus</a><ul>
<li><a href="#1-summary">1 Summary</a></li>
<li><a href="#2-requirements-constraints">2 Requirements &amp; Constraints</a><ul>
<li><a href="#21-functional-requirements">2.1 Functional Requirements</a></li>
<li><a href="#22-non-functional-requirements">2.2 Non-Functional Requirements</a></li>
<li><a href="#23-constraints-assumptions">2.3 Constraints &amp; Assumptions</a></li>
</ul>
</li>
<li><a href="#3-system-overview">3 System Overview</a><ul>
<li><a href="#31-key-features">3.1 Key Features</a></li>
<li><a href="#32-core-components">3.2 Core Components</a></li>
<li><a href="#33-system-context-and-component-relationship">3.3 System Context and Component Relationship</a><ul>
<li><a href="#system-context-diagram">System Context Diagram</a></li>
<li><a href="#component-relationships">Component Relationships</a></li>
</ul>
</li>
<li><a href="#34-component-overview">3.4 Component Overview</a><ul>
<li><a href="#341-high-level-system-separation">3.4.1 High-Level System Separation</a></li>
<li><a href="#342-data-storage-tables">3.4.2 Data Storage Tables</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4-technology-evaluation">4 Technology Evaluation</a><ul>
<li><a href="#41-evaluation-criteria">4.1 Evaluation Criteria</a></li>
<li><a href="#42-comparative-analysis-of-storage-solutions">4.2 Comparative Analysis of Storage Solutions</a></li>
</ul>
</li>
<li><a href="#5-database-design">5 Database Design</a><ul>
<li><a href="#51-er-diagram">5.1 ER Diagram</a><ul>
<li><a href="#511-documents-table">5.1.1 Documents Table</a></li>
<li><a href="#512-documentmetadata-table">5.1.2 DocumentMetadata Table</a></li>
<li><a href="#513-drafts-table">5.1.3 Drafts Table</a></li>
</ul>
</li>
<li><a href="#52-uuid">5.2 UUID</a><ul>
<li><a href="#option-1-blob-storage">Option 1: BLOB Storage</a></li>
<li><a href="#option-2-text-storage">Option 2: TEXT Storage</a></li>
<li><a href="#option-3-int8-pair-recommended">Option 3: INT8 Pair (Recommended)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6-implementation">6 Implementation</a><ul>
<li><a href="#61-json-document-handling">6.1 JSON Document Handling</a><ul>
<li><a href="#611-indexes">6.1.1 Indexes</a></li>
<li><a href="#612-dynamic-field-indexing-for-lookups">6.1.2 Dynamic Field Indexing for Lookups</a></li>
<li><a href="#613-process-and-flow">6.1.3 Process and Flow</a></li>
<li><a href="#614-enabling-foreign-keys-in-sqlite">6.1.4 Enabling Foreign Keys in SQLite</a></li>
<li><a href="#615-example-drift-definition-with-foreign-reference-and-indexes">6.1.5 Example Drift definition with foreign reference and indexes</a></li>
<li><a href="#616-example-search-over-category">6.1.6 Example search over category</a></li>
</ul>
</li>
<li><a href="#62-uuid-conversion-to-iohi-idlo">6.2 UUID Conversion to IOHI / IDLO</a><ul>
<li><a href="#621-uuidv7-example-handler-timestamp-extraction">6.2.1 UUIDv7 Example Handler &amp; Timestamp Extraction</a></li>
<li><a href="#622-uuidv7-time-range-query-optimisation">6.2.2 UUIDv7 Time-Range Query Optimisation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#7-draft-document-management">7 Draft Document Management</a><ul>
<li><a href="#71-storage-options">7.1 Storage Options</a></li>
<li><a href="#72-draft-workflow">7.2 Draft Workflow</a></li>
<li><a href="#73-draft-database-design">7.3 Draft Database Design</a></li>
</ul>
</li>
<li><a href="#8-offline-synchronization-strategy">8 Offline &amp; Synchronization Strategy</a><ul>
<li><a href="#81-local-first-operations">8.1 Local-First Operations</a></li>
<li><a href="#82-document-retrieval-workflow">8.2 Document Retrieval Workflow</a></li>
<li><a href="#83-index-api-usage">8.3 Index API Usage</a></li>
<li><a href="#84-draft-management">8.4 Draft Management</a></li>
<li><a href="#85-version-management">8.5 Version Management</a></li>
<li><a href="#86-conflict-resolution">8.6 Conflict Resolution</a></li>
<li><a href="#87-offline-mode">8.7 Offline Mode</a></li>
<li><a href="#88-client-metadata-bootstrap">8.8 Client metadata bootstrap</a></li>
<li><a href="#89-background-synchronisation-optional">8.9 Background Synchronisation (Optional)</a></li>
<li><a href="#810-performance-considerations">8.10 Performance Considerations</a></li>
</ul>
</li>
<li><a href="#9-api-integration-details">9 API Integration Details</a><ul>
<li><a href="#91-latest-api-specification">9.1 Latest API Specification</a></li>
</ul>
</li>
<li><a href="#10-out-of-scope">10 Out of Scope</a></li>
<li><a href="#11-known-limitations">11 Known Limitations</a></li>
<li><a href="#12-references">12 References</a></li>
<li><a href="#13-document-version-changes">13 Document Version Changes</a><ul>
<li><a href="#v11-changes">V1.1 Changes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id="1-summary">1 Summary<a class="headerlink" href="#1-summary" title="Permanent link">&para;</a></h2>
<p>This document defines the architecture for implementing a cross-platform local storage solution for Catalyst with specific focus on
the requirements for Fund 14 The primary objectives include managing JSON documents, supporting UI updates, ensuring data security,
managing local draft document creation and laying a foundation for scalable and future-proof storage practices.</p>
<p>The solution integrates SQLite with JSON support, encryption for sensitive draft data, and Drift for database management and
reactive streams.</p>
<h2 id="2-requirements-constraints">2 Requirements &amp; Constraints<a class="headerlink" href="#2-requirements-constraints" title="Permanent link">&para;</a></h2>
<h3 id="21-functional-requirements">2.1 Functional Requirements<a class="headerlink" href="#21-functional-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Cross-Platform Local Storage</strong></p>
</li>
<li>
<p>Must support Web, iOS, Android, macOS, Linux, and Windows within a single Flutter codebase.</p>
</li>
<li>
<p><strong>JSON Document Storage &amp; Querying</strong></p>
</li>
<li>
<p>Utilize SQLite’s JSON1/JSONB functions for efficient querying of JSON-structured documents.</p>
</li>
<li>
<p><strong>UUIDv7-Based Identification</strong></p>
</li>
<li>
<p>Enforce time-ordered identifiers for both documents and version management.</p>
</li>
<li>
<p><strong>External Document API Integration</strong></p>
</li>
<li>
<p>Retrieve, index, and post documents to Catalyst backend API however consideration is given to future implementations where
multiple storage options are available.</p>
</li>
<li>
<p><strong>Reactive UI Updates</strong></p>
</li>
<li>
<p>Rely on Drift ORM streams to automatically update the UI when local data changes.</p>
</li>
<li>
<p><strong>Offline Access &amp; Caching</strong></p>
</li>
<li>
<p>Provide offline read/write capabilities and cache documents/metadata locally.</p>
</li>
<li>
<p><strong>Document Versioning &amp; Metadata Indexing</strong></p>
</li>
<li>
<p>Track multiple versions of a document and maintain indexed metadata for fast lookups.</p>
</li>
</ul>
<h3 id="22-non-functional-requirements">2.2 Non-Functional Requirements<a class="headerlink" href="#22-non-functional-requirements" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Performance</strong></p>
</li>
<li>
<p>Ensure fast read/write operations with indexing for large datasets, local caching of documents is required to avoid requests
to the backend every time a new document is required.</p>
</li>
<li>
<p><strong>Scalability</strong></p>
</li>
<li>
<p>Design schema and data flows to accommodate future data models, addition of indexes and additional metadata will be enabled
with out significant re-work.</p>
</li>
<li>
<p><strong>Security &amp; Data Integrity</strong></p>
</li>
<li>
<p>Consider future requirements for encryption of sensitive documents to avoid significant refactoring of solution.</p>
</li>
<li>
<p><strong>Maintainability</strong></p>
</li>
<li>
<p>Use a service/repository pattern and dependency injection (DI) for clearer separation of concerns, follow best practices of
clean separation of concerns when defining the data layer implementation.</p>
</li>
<li>
<p>Allow future enhancements (e.g., advanced sync logic) without redefining core elements of the local storage.</p>
</li>
</ul>
<h3 id="23-constraints-assumptions">2.3 Constraints &amp; Assumptions<a class="headerlink" href="#23-constraints-assumptions" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>SQLite Version Requirement</strong></p>
</li>
<li>
<p>Requires SQLite 3.38.0+ for JSONB support (or 3.45.0+ for advanced JSON functions).</p>
</li>
<li>
<p><strong>Technology Stack</strong></p>
</li>
<li>
<p>Drift ORM is used for type-safe queries, reactive streams, and schema migrations.</p>
</li>
<li>
<p><strong>Out of Scope</strong></p>
</li>
<li>
<p>No built-in device synchronization or complex conflict resolution in this phase.</p>
</li>
<li>
<p>No advanced collaboration features (e.g., CRDTs) are required at this time.</p>
</li>
<li>Encryption of documents is currently out of scope.</li>
<li>
<p>Approach assumes the application is not used on shared devices and the account holder is responsible for the management
  of sensitive data, if the application is used on a shared device.</p>
</li>
<li>
<p><strong>Implementation Scope</strong></p>
</li>
<li>
<p>This phase covers only the architecture proposal and high-level design; no direct code implementation.</p>
</li>
<li>
<p><strong>Existing Flutter Architecture Integration</strong></p>
</li>
<li>
<p>Must integrate seamlessly with the current Flutter codebase and follow established design patterns.</p>
</li>
</ul>
<h2 id="3-system-overview">3 System Overview<a class="headerlink" href="#3-system-overview" title="Permanent link">&para;</a></h2>
<h3 id="31-key-features">3.1 Key Features<a class="headerlink" href="#31-key-features" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Document Storage</strong></p>
</li>
<li>
<p>JSON documents stored in SQLite with partial metadata extraction for indexing.</p>
</li>
<li>
<p>UUIDv7 ensures time-based ordering for documents and version tracking.</p>
</li>
<li>
<p>Consideration for future support of secure local document storage with version management.</p>
</li>
<li>
<p><strong>Query Performance</strong></p>
</li>
<li>
<p>Indexed JSON fields and reactive UI updates via Drift streams.</p>
</li>
<li>
<p><strong>Caching</strong></p>
</li>
<li>
<p>Local caching of frequently accessed data and metadata, supporting offline reads and writes.</p>
</li>
</ul>
<h3 id="32-core-components">3.2 Core Components<a class="headerlink" href="#32-core-components" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><strong>Data Layer</strong></p>
</li>
<li>
<p>Tables: <code>documents</code>, <code>drafts</code>, <code>metadata</code>.</p>
</li>
<li>
<p>Support for storing UUIDv7 as INT8 pairs (recommended), BLOB, or TEXT.</p>
</li>
<li>
<p><strong>Service Layer</strong></p>
</li>
<li>
<p>API management for document index retrieval and document actions.</p>
</li>
<li>
<p>Session management and encryption at the service layer is out of scope.</p>
</li>
<li>
<p><strong>UI Layer</strong></p>
</li>
<li>
<p>Drift ORM for type-safe queries and reactive streams.</p>
</li>
<li>
<p>Automatic UI updates when data changes (e.g., proposals, comments).</p>
</li>
</ul>
<h3 id="33-system-context-and-component-relationship">3.3 System Context and Component Relationship<a class="headerlink" href="#33-system-context-and-component-relationship" title="Permanent link">&para;</a></h3>
<h4 id="system-context-diagram"><em>System Context Diagram</em><a class="headerlink" href="#system-context-diagram" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TD

User[User] --&gt;|Enters Mnemonic| App[Flutter Application]
App --&gt;|Pulls Documents| API[Document API]
App --&gt;|Fetches Index Metadata| IndexService[Index API]
App --&gt;|Stores Locally| SQLite[SQLite Database]</code></pre>
<h4 id="component-relationships"><em>Component Relationships</em><a class="headerlink" href="#component-relationships" title="Permanent link">&para;</a></h4>
<pre class="mermaid"><code>graph TD
subgraph Flutter Application
UI[UI Layer] --&gt;|Streams| Service[Service Layer]
Service --&gt; Repository[Repository Layer]
Repository --&gt; SQLite[SQLite Database]
end
subgraph External Systems
API[Document API] --&gt; Repository
IndexService[Index API] --&gt; Repository
end</code></pre>
<h3 id="34-component-overview">3.4 Component Overview<a class="headerlink" href="#34-component-overview" title="Permanent link">&para;</a></h3>
<h4 id="341-high-level-system-separation">3.4.1 High-Level System Separation<a class="headerlink" href="#341-high-level-system-separation" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>Data Layer</strong>:</p>
</li>
<li>
<p>Tables: <code>documents</code>, <code>drafts</code>, <code>metadata</code>.</p>
</li>
<li>
<p><strong>Service Layer</strong>:</p>
</li>
<li>
<p>Repository pattern for database operations.</p>
</li>
<li>
<p>Dependency injection for modularity.</p>
</li>
<li>
<p><strong>UI Layer</strong>:</p>
</li>
<li>
<p>Reactive updates via Drift <code>Stream</code> integration.</p>
</li>
</ul>
<h4 id="342-data-storage-tables">3.4.2 Data Storage Tables<a class="headerlink" href="#342-data-storage-tables" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p><strong>Metadata Table</strong>:</p>
</li>
<li>
<p>Stores extracted fields for querying.</p>
</li>
<li>
<p>Enables UI elements like counts and categories.</p>
</li>
<li>
<p>Updates via index api frequently.</p>
</li>
<li>
<p><strong>Drafts Table</strong>:</p>
</li>
<li>
<p>Stores draft documents not yet submitted and signed by the account owner.</p>
</li>
<li>
<p><strong>Documents Table</strong>:</p>
</li>
<li>
<p>Stores the raw JSON documents pulled from the API.</p>
</li>
</ul>
<h2 id="4-technology-evaluation">4 Technology Evaluation<a class="headerlink" href="#4-technology-evaluation" title="Permanent link">&para;</a></h2>
<h3 id="41-evaluation-criteria">4.1 Evaluation Criteria<a class="headerlink" href="#41-evaluation-criteria" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Compatibility with web, mobile, and desktop platforms</p>
</li>
<li>
<p>Ease of integration with Flutter</p>
</li>
<li>
<p>Performance metrics (read/write speed, indexing)</p>
</li>
<li>
<p>Community support and long-term viability</p>
</li>
<li>
<p>Potential for encryption &amp; security features</p>
</li>
</ul>
<h3 id="42-comparative-analysis-of-storage-solutions">4.2 Comparative Analysis of Storage Solutions<a class="headerlink" href="#42-comparative-analysis-of-storage-solutions" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><strong>Criteria</strong></th>
<th><strong>SQLite + Drift</strong></th>
<th><strong>Hive</strong></th>
<th><strong>Sembast</strong></th>
<th><strong>ObjectBox</strong></th>
<th><strong>Floor</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>JSON Support</strong></td>
<td>✅ Native (JSON1/JSONB)</td>
<td>❌ Manual parsing</td>
<td>✅ Limited</td>
<td>❌ No</td>
<td>❌ Manual parsing</td>
</tr>
<tr>
<td><strong>Cross-Platform</strong></td>
<td>✅ All targets</td>
<td>✅ All targets</td>
<td>✅ All targets</td>
<td>✅ All targets</td>
<td>✅ All targets</td>
</tr>
<tr>
<td><strong>Query Flexibility</strong></td>
<td>✅ SQL + JSON Path</td>
<td>❌ Key-based</td>
<td>✅ Basic indexes</td>
<td>❌ Limited</td>
<td>✅ SQL (limited)</td>
</tr>
<tr>
<td><strong>Reactive Streams</strong></td>
<td>✅ Drift <code>.watch()</code></td>
<td>✅</td>
<td>✅</td>
<td>✅</td>
<td>❌</td>
</tr>
<tr>
<td><strong>Encryption</strong></td>
<td>✅ External libraries (Database level)</td>
<td>✅ Built-in</td>
<td>❌ External only</td>
<td>✅ Built-in</td>
<td>❌ External only</td>
</tr>
<tr>
<td><strong>Scalability</strong></td>
<td>✅ Proven at scale</td>
<td>❌ Small datasets</td>
<td>❌ Small datasets</td>
<td>✅ High perf.</td>
<td>❌ Moderate</td>
</tr>
</tbody>
</table>
<p><strong>Decision</strong>: SQLite with Drift is selected due to its:</p>
<ul>
<li>
<p><strong>JSON1/JSONB Support</strong>: Critical for querying dynamic document fields without rigid schemas.</p>
</li>
<li>
<p><strong>Cross-Platform</strong>: SQLite works seamlessly with Drift on all Flutter targets, including Web.</p>
</li>
<li>
<p><strong>Reactive UI</strong>: Drift streams enable real-time updates (e.g., <code>Stream&lt;List&lt;Document&gt;&gt;</code>).</p>
</li>
<li>
<p><strong>Future-Proof</strong>: Aligns with eventual IPFS integration by separating storage and indexing layers.</p>
</li>
</ul>
<h2 id="5-database-design">5 Database Design<a class="headerlink" href="#5-database-design" title="Permanent link">&para;</a></h2>
<h3 id="51-er-diagram">5.1 ER Diagram<a class="headerlink" href="#51-er-diagram" title="Permanent link">&para;</a></h3>
<pre class="mermaid"><code>
erDiagram

Documents {

Int idHi

Int idLo

Int verIdHi

Int verIdLo

Text documentType

Text content

Int createdAt

Text metadata

CompositeKey[] key PK "idHi, idLo, verIdHi, verIdLo"

%% Index: idx_unique_ver_id UNIQUE (verIdHi, verIdLo)

}



DocumentMetadata {

Int verIdHi

Int verIdLo

Text fieldKey

Text fieldValue

CompositeKey[] key PK "verIdHi, verIdLo, fieldKey"

%% Index: idx_doc_metadata_key_value (fieldKey, fieldValue)

}



Drafts {

Int idHi

Int idLo

Int verIdHi

Int verIdLo

Text type

Text content

Text title

CompositeKey[] key PK "idHi, idLo, verIdHi, verIdLo"

%% Index: idx_draft_type (type)

}



%% Relationships

Documents ||--o| DocumentMetadata : "verIdHi, verIdLo (FK)"

Documents ||--o| Drafts : "idHi, idLo, verIdHi, verIdLo (FK)"


</code></pre>
<h4 id="511-documents-table">5.1.1 <code>Documents</code> Table<a class="headerlink" href="#511-documents-table" title="Permanent link">&para;</a></h4>
<p>This table stores a record of each document (including its content and related metadata).</p>
<p>Each row represents a specific version of a document.</p>
<ul>
<li>
<p><strong>Primary Key (Composite):</strong> <code>(idHi, idLo, verIdHi, verIdLo)</code></p>
</li>
<li>
<p>These pairs (<code>idHi</code>, <code>idLo</code>) and (<code>verIdHi</code>, <code>verIdLo</code>) together uniquely identify a specific document version.</p>
</li>
<li>
<p><strong>Fields:</strong></p>
</li>
<li>
<p><code>documentType</code> (Text): Indicates the high-level type or category of the document defined by Catalyst.</p>
</li>
<li>
<p><code>content</code> (Text): The main JSON or raw text of the document itself.</p>
</li>
<li>
<p><code>createdAt</code> (Int): Timestamp or epoch to record when this document version was created.</p>
</li>
<li>
<p><code>metadata</code> (Text): Inline metadata (often JSON) that may be needed alongside the main content.</p>
</li>
<li>
<p><strong>Indexes:</strong></p>
</li>
<li>
<p><code>idx_unique_ver_id</code> (UNIQUE on <code>verIdHi, verIdLo</code>): Ensures the version ID pair is unique across the table.</p>
</li>
</ul>
<h4 id="512-documentmetadata-table">5.1.2 <code>DocumentMetadata</code> Table<a class="headerlink" href="#512-documentmetadata-table" title="Permanent link">&para;</a></h4>
<p>This table breaks out metadata into a key-value structure for each document version, enabling more granular or indexed queries</p>
<p>which are more efficient than querying the JSON content directly.</p>
<ul>
<li>
<p><strong>Primary Key (Composite):</strong> <code>(verIdHi, verIdLo, fieldKey)</code></p>
</li>
<li>
<p>Ties each metadata entry to a specific document version and a metadata key.</p>
</li>
<li>
<p><strong>Fields:</strong></p>
</li>
<li>
<p><code>fieldKey</code> (Text): The name/identifier of the metadata field (e.g., "author", "fund", "category").</p>
</li>
<li>
<p><code>fieldValue</code> (Text): The value corresponding to that field key.</p>
</li>
<li>
<p><strong>Indexes:</strong></p>
</li>
<li>
<p><code>idx_doc_metadata_key_value</code> on <code>(fieldKey, fieldValue)</code>: Speeds up lookups by metadata key/value pairs.</p>
</li>
</ul>
<h4 id="513-drafts-table">5.1.3 <code>Drafts</code> Table<a class="headerlink" href="#513-drafts-table" title="Permanent link">&para;</a></h4>
<p>This table holds in-progress (draft) versions of documents that are not yet been made public or submitted.</p>
<ul>
<li>
<p><strong>Primary Key (Composite):</strong> <code>(idHi, idLo, verIdHi, verIdLo)</code></p>
</li>
<li>
<p>Matches the document identifier plus the version identifier, similar to <code>Documents</code>.</p>
</li>
<li>
<p><strong>Fields:</strong></p>
</li>
<li>
<p><code>type</code> (Text): Designation of the draft’s type (e.g., "proposal", "comment").</p>
</li>
<li>
<p><code>content</code> (Text): Local saved draft content.</p>
</li>
<li>
<p><code>title</code> (Text): Human-readable title for quick reference in the UI.</p>
</li>
<li>
<p><strong>Indexes:</strong></p>
</li>
<li>
<p><code>idx_draft_type</code> on <code>(type)</code>: Allows filtering drafts by type.</p>
</li>
</ul>
<h3 id="52-uuid">5.2 UUID<a class="headerlink" href="#52-uuid" title="Permanent link">&para;</a></h3>
<p>SQLite does not have built-in support for UUIDs to use UUIDs we need to store them as either Blobs INT8's.
IDHI/IDLO, or plain text.
Regardless of approach the date time should be extracted from the UUIDv7 document id or version and store in separate column.</p>
<p>Note, UUIDv7 is time-ordered by design therefore ordering is still possible regardless of approach, performance will vary.</p>
<h4 id="option-1-blob-storage"><strong>Option 1: BLOB Storage</strong><a class="headerlink" href="#option-1-blob-storage" title="Permanent link">&para;</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">BLOB</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">);</span>
</span></code></pre></div>
<p><strong>Advantages</strong>:</p>
<ul>
<li>
<p>Direct binary storage (16 bytes).</p>
</li>
<li>
<p>No conversion overhead</p>
</li>
<li>
<p>Simpler implementation</p>
</li>
</ul>
<h4 id="option-2-text-storage"><strong>Option 2: TEXT Storage</strong><a class="headerlink" href="#option-2-text-storage" title="Permanent link">&para;</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">);</span>
</span></code></pre></div>
<p><strong>Advantages</strong>:</p>
<ul>
<li>
<p>Human-readable for debugging.</p>
</li>
<li>
<p>Direct string operations</p>
</li>
</ul>
<h4 id="option-3-int8-pair-recommended"><strong>Option 3: INT8 Pair (Recommended)</strong><a class="headerlink" href="#option-3-int8-pair-recommended" title="Permanent link">&para;</a></h4>
<div class="language-sql highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">documents</span><span class="w"> </span><span class="p">(</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">id_hi</span><span class="w"> </span><span class="nb">BIGINT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="c1">-- Upper 64 bits of UUIDv7</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="n">id_lo</span><span class="w"> </span><span class="nb">BIGINT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"> </span><span class="c1">-- Lower 64 bits</span>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">id_hi</span><span class="p">,</span><span class="w"> </span><span class="n">id_lo</span><span class="p">)</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="p">);</span>
</span></code></pre></div>
<p><strong>Advantages</strong>:</p>
<ul>
<li>
<p>Efficient range queries on timestamp (first 48 bits of <code>id_hi</code>).</p>
</li>
<li>
<p>Native integer operations</p>
</li>
<li>
<p>Smaller storage footprint</p>
</li>
<li>
<p>Better indexing performance</p>
</li>
</ul>
<p>The following approach should be taken for handling UUIDv7 Id and Version fields.
Both Id and Version fields should use <strong>two <code>INT8</code>
columns (IDHI and IDLO)</strong> rather than storing them as a BLOB or TEXT field, splitting them into two 64-bit integers (<code>INT8</code>) has
following advantages:</p>
<ul>
<li>
<p><strong>Better Indexing</strong></p>
</li>
<li>
<p>SQLite indexes <code>INT</code> columns efficiently.</p>
</li>
<li>
<p>Splitting UUIDs into two parts enables faster lookups.</p>
</li>
<li>
<p><strong>Range Queries</strong>:</p>
</li>
<li>
<p>With UUIDv7, the first 48 bits of the UUID represent a timestamp.</p>
</li>
<li>
<p>By storing the timestamp portion in one <code>INT8</code> column (<code>IDHI</code>), you can perform range-based searches.</p>
</li>
<li>
<p><strong>Structured Operations</strong>:</p>
</li>
<li>Separating the "time" and "random" portions of the UUID simplifies operations like sorting, filtering, and datetime extraction.</li>
</ul>
<p>UUIDv7 is structured as follows:</p>
<ul>
<li><strong>First 48 bits (Timestamp)</strong>: Milliseconds since Unix epoch.</li>
<li><strong>Next 16 bits (Version and Variant)</strong>: Metadata indicating UUID version and variant.</li>
<li><strong>Last 64 bits (Random/Entropy)</strong>: Randomly generated for uniqueness.</li>
</ul>
<p>Spliting the UUIDv7 will align with the following approach:</p>
<ul>
<li><code>IDHI</code>: Stores the first 64 bits (timestamp + version/variant).</li>
<li><code>IDLO</code>: Stores the last 64 bits (random/entropy).</li>
</ul>
<h2 id="6-implementation">6 Implementation<a class="headerlink" href="#6-implementation" title="Permanent link">&para;</a></h2>
<h3 id="61-json-document-handling">6.1 JSON Document Handling<a class="headerlink" href="#61-json-document-handling" title="Permanent link">&para;</a></h3>
<h4 id="611-indexes">6.1.1 Indexes<a class="headerlink" href="#611-indexes" title="Permanent link">&para;</a></h4>
<p>For front-end queries where fields are frequently used in a <code>WHERE</code> clause, it is recommended to create indexes to improve query
performance.
The overhead of creating these indexes should be evaluated over time based on the volume of data stored in the local
database.
Index creation is most beneficial for tables that store large amounts of data.
The specific fields to index should be
determined based on access patterns and usage, in alignment with UI/UX design.</p>
<p>Front-end engineers may decide to extract certain phrases from the JSON documents on insertion and store these fields in a metadata
table to be indexed, enabling quick lookups and document retrieval.</p>
<p>When using the Drift ORM, indexes are automatically created for certain columns and do not need to be defined manually.
This applies to:</p>
<ul>
<li>Primary keys</li>
<li>Unique columns</li>
<li>Target columns of a foreign key constraint</li>
</ul>
<p>Indexes can also be created declaratively in Drift.
For instance, the following code will make queries based on <code>documentType</code> more efficient:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Documents</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">documentType</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">createdAt</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">().</span><span class="n">nullable</span><span class="p">()();</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-3-12"><a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Column</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">primaryKey</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">idHi</span><span class="p">,</span><span class="w"> </span><span class="n">idLo</span><span class="p">};</span>
</span><span id="__span-3-13"><a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>
</span><span id="__span-3-14"><a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w"> </span><span class="nd">@override</span>
</span><span id="__span-3-15"><a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Index</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-3-16"><a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="w">   </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;document_type_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">documentType</span><span class="p">]),</span>
</span><span id="__span-3-17"><a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a><span class="w">   </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;idx_unique_ver_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="n">verIdLo</span><span class="p">],</span><span class="w"> </span><span class="nl">unique:</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span>
</span><span id="__span-3-18"><a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a><span class="w"> </span><span class="p">];</span>
</span><span id="__span-3-19"><a id="__codelineno-3-19" name="__codelineno-3-19" href="#__codelineno-3-19"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="612-dynamic-field-indexing-for-lookups">6.1.2 Dynamic Field Indexing for Lookups<a class="headerlink" href="#612-dynamic-field-indexing-for-lookups" title="Permanent link">&para;</a></h4>
<p>To ensure efficient look ups, dynamic indexes can be used to improve query performance.
The JSON document is stored in the primary
<code>documents</code> table, and a separate <code>document_metadata</code> table is used for quick look ups on specific fields.
This avoids parsing or
scanning the entire JSON document each time to filter or sort by a particular field.</p>
<h4 id="613-process-and-flow">6.1.3 Process and Flow<a class="headerlink" href="#613-process-and-flow" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>Insert Document</strong></p>
</li>
<li>
<p>Insert the entire JSON-based document into the main <code>documents</code> table (which contains a composite primary key,
   for example <code>(idHi, idLo)</code>).</p>
</li>
<li>
<p><strong>Parse JSON</strong></p>
</li>
<li>
<p>Extract the fields you want to index (e.g., <code>title</code>, <code>description</code>, <code>category</code>) immediately after insertion.</p>
</li>
<li>
<p>Use best practices to identify suitable candidates for indexing based on query optimization, UI/UX design, and requirements.</p>
</li>
<li>
<p><strong>Insert Metadata</strong></p>
</li>
<li>
<p>Store the extracted field-value pairs in a separate <code>document_metadata</code> table that references the <code>documents</code> table via a
   foreign key.</p>
</li>
<li>Each field is stored as a separate row, for example:<ul>
<li><code>(doc_id_hi, doc_id_lo, fieldKey='title', fieldValue='My Title')</code></li>
<li><code>(doc_id_hi, doc_id_lo, fieldKey='category', fieldValue='Tutorial')</code></li>
</ul>
</li>
<li>
<p>You can insert additional fields (like <code>description</code>, tags, etc.) as needed.</p>
</li>
<li>
<p><strong>Search and Query</strong></p>
</li>
<li>
<p>When a filter or search is required on a particular field (e.g., <code>category='Development'</code>), query the <code>document_metadata</code>
   table by <code>(fieldKey, fieldValue)</code> or use a join with <code>documents</code>.</p>
</li>
<li>This avoids having to search through raw JSON each time.</li>
</ol>
<p><strong>Flexible</strong>: You can dynamically extract any fields you find valuable for quick look ups or queries without constantly
modifying the schema.<br />
<strong>Performance</strong>: Frequent queries on a few fields do not require scanning large JSON documents, as the metadata can be indexed
more efficiently.</p>
<blockquote>
<p><strong>Note</strong><br />
In SQLite, foreign key references are not enabled by default.
They must be enabled with <code>PRAGMA foreign_keys = ON</code>.</p>
</blockquote>
<h4 id="614-enabling-foreign-keys-in-sqlite">6.1.4 Enabling Foreign Keys in SQLite<a class="headerlink" href="#614-enabling-foreign-keys-in-sqlite" title="Permanent link">&para;</a></h4>
<p>Don’t forget to enable foreign keys in SQLite, as they are not enabled by default:</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nd">@override</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">MigrationStrategy</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">migration</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">MigrationStrategy</span><span class="p">(</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">  </span><span class="nl">beforeOpen:</span><span class="w"> </span><span class="p">(</span><span class="n">details</span><span class="p">)</span><span class="w"> </span><span class="kd">async</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="kd">await</span><span class="w"> </span><span class="n">customStatement</span><span class="p">(</span><span class="s1">&#39;PRAGMA foreign_keys = ON&#39;</span><span class="p">);</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">  </span><span class="p">},</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">);</span>
</span></code></pre></div>
<h4 id="615-example-drift-definition-with-foreign-reference-and-indexes">6.1.5 Example Drift definition with foreign reference and indexes<a class="headerlink" href="#615-example-drift-definition-with-foreign-reference-and-indexes" title="Permanent link">&para;</a></h4>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Documents</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w"> </span><span class="c1">// Columns are unique together</span>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w"> </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">documentType</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w"> </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">createdAt</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w"> </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">metadata</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">().</span><span class="n">nullable</span><span class="p">()();</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w"> </span><span class="nd">@override</span><span class="w">    </span>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Column</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">primaryKey</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">idHi</span><span class="p">,</span><span class="w"> </span><span class="n">idLo</span><span class="p">,</span><span class="w"> </span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="n">verIdLo</span><span class="p">};</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w"> </span><span class="nd">@override</span>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Index</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">   </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;document_type_index&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">documentType</span><span class="p">]),</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">   </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;idx_unique_ver_id&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="n">verIdLo</span><span class="p">],</span><span class="w"> </span><span class="nl">unique:</span><span class="w"> </span><span class="kc">true</span><span class="p">),</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a><span class="p">}</span>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a>
</span><span id="__span-5-25"><a id="__codelineno-5-25" name="__codelineno-5-25" href="#__codelineno-5-25"></a><span class="kd">class</span><span class="w"> </span><span class="nc">DocumentMetadata</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-5-26"><a id="__codelineno-5-26" name="__codelineno-5-26" href="#__codelineno-5-26"></a><span class="w"> </span><span class="c1">// Composite key matching the Documents table over version not document fields</span>
</span><span id="__span-5-27"><a id="__codelineno-5-27" name="__codelineno-5-27" href="#__codelineno-5-27"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">().</span><span class="n">references</span><span class="p">(</span><span class="n">Documents</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="nl">onDelete:</span><span class="w"> </span><span class="n">KeyAction</span><span class="p">.</span><span class="n">cascade</span><span class="p">,</span><span class="w"> </span><span class="nl">onUpdate:</span><span class="w"> </span><span class="n">KeyAction</span><span class="p">.</span><span class="n">cascade</span><span class="p">)();</span>
</span><span id="__span-5-28"><a id="__codelineno-5-28" name="__codelineno-5-28" href="#__codelineno-5-28"></a><span class="w"> </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">().</span><span class="n">references</span><span class="p">(</span><span class="n">Documents</span><span class="p">,</span><span class="w"> </span><span class="err">#</span><span class="n">verIdLo</span><span class="p">,</span><span class="w"> </span><span class="nl">onDelete:</span><span class="w"> </span><span class="n">KeyAction</span><span class="p">.</span><span class="n">cascade</span><span class="p">,</span><span class="w"> </span><span class="nl">onUpdate:</span><span class="w"> </span><span class="n">KeyAction</span><span class="p">.</span><span class="n">cascade</span><span class="p">)();</span>
</span><span id="__span-5-29"><a id="__codelineno-5-29" name="__codelineno-5-29" href="#__codelineno-5-29"></a>
</span><span id="__span-5-30"><a id="__codelineno-5-30" name="__codelineno-5-30" href="#__codelineno-5-30"></a><span class="w"> </span><span class="c1">// e.g. &#39;category&#39;, &#39;title&#39;, &#39;description&#39;</span>
</span><span id="__span-5-31"><a id="__codelineno-5-31" name="__codelineno-5-31" href="#__codelineno-5-31"></a><span class="w"> </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">fieldKey</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-5-32"><a id="__codelineno-5-32" name="__codelineno-5-32" href="#__codelineno-5-32"></a>
</span><span id="__span-5-33"><a id="__codelineno-5-33" name="__codelineno-5-33" href="#__codelineno-5-33"></a><span class="w"> </span><span class="c1">// The actual value (for category, title, description, etc.)</span>
</span><span id="__span-5-34"><a id="__codelineno-5-34" name="__codelineno-5-34" href="#__codelineno-5-34"></a><span class="w"> </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">fieldValue</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-5-35"><a id="__codelineno-5-35" name="__codelineno-5-35" href="#__codelineno-5-35"></a>
</span><span id="__span-5-36"><a id="__codelineno-5-36" name="__codelineno-5-36" href="#__codelineno-5-36"></a><span class="w"> </span><span class="nd">@override</span>
</span><span id="__span-5-37"><a id="__codelineno-5-37" name="__codelineno-5-37" href="#__codelineno-5-37"></a><span class="w"> </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Column</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">primaryKey</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="n">verIdLo</span><span class="p">,</span><span class="w"> </span><span class="n">fieldKey</span><span class="p">};</span>
</span><span id="__span-5-38"><a id="__codelineno-5-38" name="__codelineno-5-38" href="#__codelineno-5-38"></a>
</span><span id="__span-5-39"><a id="__codelineno-5-39" name="__codelineno-5-39" href="#__codelineno-5-39"></a><span class="w"> </span><span class="nd">@override</span>
</span><span id="__span-5-40"><a id="__codelineno-5-40" name="__codelineno-5-40" href="#__codelineno-5-40"></a><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Index</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-5-41"><a id="__codelineno-5-41" name="__codelineno-5-41" href="#__codelineno-5-41"></a><span class="w">   </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;idx_doc_metadata_key_value&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">fieldKey</span><span class="p">,</span><span class="w"> </span><span class="n">fieldValue</span><span class="p">]),</span>
</span><span id="__span-5-42"><a id="__codelineno-5-42" name="__codelineno-5-42" href="#__codelineno-5-42"></a><span class="w"> </span><span class="p">];</span>
</span><span id="__span-5-43"><a id="__codelineno-5-43" name="__codelineno-5-43" href="#__codelineno-5-43"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="616-example-search-over-category">6.1.6 Example search over category<a class="headerlink" href="#616-example-search-over-category" title="Permanent link">&para;</a></h4>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Document</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">fetchDocumentsByCategory</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">documents</span><span class="p">)</span>
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">doc</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">existsQuery</span><span class="p">(</span>
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">      </span><span class="n">select</span><span class="p">(</span><span class="n">documentMetadata</span><span class="p">)</span>
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">        </span><span class="p">..</span><span class="n">where</span><span class="p">((</span><span class="n">m</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span>
</span><span id="__span-6-6"><a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">            </span><span class="n">m</span><span class="p">.</span><span class="n">docIdHi</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">idHi</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span>
</span><span id="__span-6-7"><a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">            </span><span class="n">m</span><span class="p">.</span><span class="n">docIdLo</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">doc</span><span class="p">.</span><span class="n">idLo</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span>
</span><span id="__span-6-8"><a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">            </span><span class="n">m</span><span class="p">.</span><span class="n">fieldKey</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="s1">&#39;category&#39;</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span>
</span><span id="__span-6-9"><a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">            </span><span class="n">m</span><span class="p">.</span><span class="n">fieldValue</span><span class="p">.</span><span class="n">equals</span><span class="p">(</span><span class="n">category</span><span class="p">))</span>
</span><span id="__span-6-10"><a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="p">))</span>
</span><span id="__span-6-11"><a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">  </span><span class="p">);</span>
</span><span id="__span-6-12"><a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>
</span><span id="__span-6-13"><a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">query</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
</span><span id="__span-6-14"><a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="p">}</span>
</span></code></pre></div>
<h3 id="62-uuid-conversion-to-iohi-idlo">6.2 UUID Conversion to IOHI / IDLO<a class="headerlink" href="#62-uuid-conversion-to-iohi-idlo" title="Permanent link">&para;</a></h3>
<p>To split a UUID into <code>IDHI</code> and <code>IDLO</code>:</p>
<ul>
<li>Convert the UUID into its raw binary representation (16 bytes).</li>
<li>Split the binary into two 8-byte chunks.</li>
<li>Convert each chunk into a 64-bit integer.</li>
</ul>
<h4 id="621-uuidv7-example-handler-timestamp-extraction">6.2.1 UUIDv7 Example Handler &amp; Timestamp Extraction<a class="headerlink" href="#621-uuidv7-example-handler-timestamp-extraction" title="Permanent link">&para;</a></h4>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">UuidV7Handler</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w"> </span><span class="c1">// Convert UUID to INT8 pairs</span>
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="n">uuidToInts</span><span class="p">(</span><span class="kt">String</span><span class="w"> </span><span class="n">uuid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hex</span><span class="p">.</span><span class="n">decode</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="n">replaceAll</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;&#39;</span><span class="p">));</span>
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">high</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ByteData</span><span class="p">.</span><span class="n">sublistView</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">).</span><span class="n">getInt64</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-7-6"><a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">low</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ByteData</span><span class="p">.</span><span class="n">sublistView</span><span class="p">(</span><span class="n">bytes</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">16</span><span class="p">).</span><span class="n">getInt64</span><span class="p">(</span><span class="m">0</span><span class="p">);</span>
</span><span id="__span-7-7"><a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">high</span><span class="p">,</span><span class="w"> </span><span class="n">low</span><span class="p">);</span>
</span><span id="__span-7-8"><a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w"> </span><span class="p">}</span>
</span><span id="__span-7-9"><a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a>
</span><span id="__span-7-10"><a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">extractTimestamp</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id_hi</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-7-11"><a id="__codelineno-7-11" name="__codelineno-7-11" href="#__codelineno-7-11"></a><span class="w">  </span><span class="kd">final</span><span class="w"> </span><span class="n">msTimestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id_hi</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="m">16</span><span class="p">;</span>
</span><span id="__span-7-12"><a id="__codelineno-7-12" name="__codelineno-7-12" href="#__codelineno-7-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">DateTime</span><span class="p">.</span><span class="n">fromMillisecondsSinceEpoch</span><span class="p">(</span><span class="n">msTimestamp</span><span class="p">);</span>
</span><span id="__span-7-13"><a id="__codelineno-7-13" name="__codelineno-7-13" href="#__codelineno-7-13"></a><span class="w"> </span><span class="p">}</span>
</span><span id="__span-7-14"><a id="__codelineno-7-14" name="__codelineno-7-14" href="#__codelineno-7-14"></a><span class="p">}</span>
</span></code></pre></div>
<h4 id="622-uuidv7-time-range-query-optimisation">6.2.2 UUIDv7 Time-Range Query Optimisation<a class="headerlink" href="#622-uuidv7-time-range-query-optimisation" title="Permanent link">&para;</a></h4>
<p>Query <code>IDHI</code> directly for range-based filtering in the <code>Document</code> table.</p>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1">// Time-range query using UUIDv7 high bits</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Document</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">getDocumentsInTimeRange</span><span class="p">(</span><span class="n">DateTime</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="n">DateTime</span><span class="w"> </span><span class="n">end</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">startHigh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">start</span><span class="p">.</span><span class="n">millisecondsSinceEpoch</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="m">16</span><span class="p">;</span>
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">endHigh</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">end</span><span class="p">.</span><span class="n">millisecondsSinceEpoch</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="m">16</span><span class="p">;</span>
</span><span id="__span-8-5"><a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">documents</span><span class="p">)..</span><span class="n">where</span><span class="p">((</span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">idHi</span><span class="p">.</span><span class="n">isBetween</span><span class="p">(</span><span class="n">startHigh</span><span class="p">,</span><span class="w"> </span><span class="n">endHigh</span><span class="p">)))</span>
</span><span id="__span-8-6"><a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">  </span><span class="p">.</span><span class="n">watch</span><span class="p">();</span>
</span><span id="__span-8-7"><a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="7-draft-document-management">7 Draft Document Management<a class="headerlink" href="#7-draft-document-management" title="Permanent link">&para;</a></h2>
<p>This section outlines a solution for managing <strong>local drafts</strong> covering requirements for fund 14.</p>
<p>Drafts are documents that are <strong>not yet published</strong> to an external public data store or API or signed by the owner, allowing users
to create and edit content locally.
These drafts are inherently <strong>mutable</strong> and can have numerous iterations in local storage, the number of versions stored should be
managed based on storage needs and requirements from a UX perspective.
Once published all documents are considered immutable, in the public domain and permanently available to others.</p>
<p>This requirement stems from several factors:</p>
<ol>
<li><strong>Offline Capability</strong>: Users should be able to work on drafts without the need to connect to a server.</li>
<li><strong>Performance</strong>: Local storage reduces latency compared to constant server interactions.</li>
<li><strong>Data Control</strong>: Users maintain control over their data until they choose to publish it.</li>
<li><strong>Future Synchronization</strong>: While out of scope at present, the solution will enable the potential for syncing data across
devices.</li>
</ol>
<h3 id="71-storage-options">7.1 Storage Options<a class="headerlink" href="#71-storage-options" title="Permanent link">&para;</a></h3>
<p>While consideration was given to various storage options for drafts, the overall storage solution decision was made in a wider
context and the approach defined here for drafts will align with the previous decision of using SQLite as the local data store with
Drift as the ORM.
Other solutions were considered for draft storage like Hive and IndexedDB however these lacked key features and
support defined at a system level.</p>
<h3 id="72-draft-workflow">7.2 Draft Workflow<a class="headerlink" href="#72-draft-workflow" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Draft Creation and Editing</strong>:</li>
<li>Draft content is kept in plaintext in memory while being edited.</li>
<li>When saving, metadata (e.g., title, status) is extracted and stored in specific columns in the drafts table or in the metadata
  table.</li>
<li>The main content is stored unencrypted in the drafts table.</li>
<li><strong>Accessing Drafts</strong>:</li>
<li>The app fetches content from <code>drafts</code> table using a combination of document id and version (iteration).</li>
<li><strong>Session &amp; Authentication</strong>:</li>
<li>All drafts are stored unencrypted in local storage and are not tied to a session therefore drafts will persist across sessions,
  and are not explicitly tied to the users keychain.</li>
</ul>
<h3 id="73-draft-database-design">7.3 Draft Database Design<a class="headerlink" href="#73-draft-database-design" title="Permanent link">&para;</a></h3>
<div class="language-dart highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="kd">class</span><span class="w"> </span><span class="nc">Drafts</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Table</span><span class="w"> </span><span class="p">{</span>
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="w">  </span><span class="c1">// Composite key for document identification</span>
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">idLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">  </span><span class="c1">// Unique version identifier for the draft</span>
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdHi</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-9-8"><a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">  </span><span class="n">IntColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">verIdLo</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">integer</span><span class="p">()();</span>
</span><span id="__span-9-9"><a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>
</span><span id="__span-9-10"><a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-9-11"><a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>
</span><span id="__span-9-12"><a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">content</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-9-13"><a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>
</span><span id="__span-9-14"><a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">  </span><span class="c1">// Public display name of the document</span>
</span><span id="__span-9-15"><a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="w">  </span><span class="n">TextColumn</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">text</span><span class="p">()();</span>
</span><span id="__span-9-16"><a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
</span><span id="__span-9-17"><a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-9-18"><a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a><span class="w">  </span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Column</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">primaryKey</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="n">idHi</span><span class="p">,</span><span class="w"> </span><span class="n">idLo</span><span class="p">,</span><span class="w"> </span><span class="n">verIdHi</span><span class="p">,</span><span class="w"> </span><span class="n">verIdLo</span><span class="p">};</span>
</span><span id="__span-9-19"><a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>
</span><span id="__span-9-20"><a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a><span class="w">  </span><span class="nd">@override</span>
</span><span id="__span-9-21"><a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a><span class="w">  </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Index</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">get</span><span class="w"> </span><span class="n">indexes</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="p">[</span>
</span><span id="__span-9-22"><a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a><span class="w">    </span><span class="n">Index</span><span class="p">(</span><span class="s1">&#39;idx_draft_type&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">[</span><span class="n">type</span><span class="p">]),</span>
</span><span id="__span-9-23"><a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a><span class="w">  </span><span class="p">];</span>
</span><span id="__span-9-24"><a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a><span class="p">}</span>
</span></code></pre></div>
<h2 id="8-offline-synchronization-strategy">8 Offline &amp; Synchronization Strategy<a class="headerlink" href="#8-offline-synchronization-strategy" title="Permanent link">&para;</a></h2>
<p>All operations that can be performed locally should be performed locally first.
This ensures low latency, offline functionality,
and better performance by reducing reliance on external APIs.
Synchronization with the server (index API and document API) is
performed intelligently to maintain data consistency without compromising offline usability.</p>
<h3 id="81-local-first-operations">8.1 Local-First Operations<a class="headerlink" href="#81-local-first-operations" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Key Principle:</strong> Any operation that can operate on local cached data should do so first.</li>
<li><strong>Operations That Should Be Supported Locally:</strong></li>
<li>Creating new drafts.</li>
<li>Editing existing drafts.</li>
<li>Viewing cached documents.</li>
<li>Querying local metadata for document lists or details.</li>
<li><strong>Fallback:</strong> For operations where the required data is not available locally, fetch the necessary document or index data from
  the API and update the local cache.</li>
</ul>
<h3 id="82-document-retrieval-workflow">8.2 Document Retrieval Workflow<a class="headerlink" href="#82-document-retrieval-workflow" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>When Requesting a Document (By ID or ID and Version):</strong></li>
<li><strong>Check Local Cache:</strong><ul>
<li>If the document request is available locally <strong>and the request includes a version</strong>, the document is returned from the
  local cache.</li>
</ul>
</li>
<li><strong>If Only an ID is Provided (No Document Version Specified):</strong><ul>
<li>If no version is specified in the request, there is no way to determine if any document version stored in the local cache
  is the latest version therefore a request to the api is required to get the documents metadata and list of versions.</li>
<li><strong>Query the Index API</strong> to fetch the full version history of the document.</li>
<li>Update the local metadata cache with the latest version info.</li>
<li>If the latest version is not cached locally:</li>
<li>Fetch the latest version from the document API.</li>
<li>Cache it locally for future access.</li>
<li>Return the latest version to the user.</li>
</ul>
</li>
<li><strong>If ID and Version Are Provided:</strong><ul>
<li>Check if the specified version exists locally.</li>
<li>If not found, fetch it from the document API and cache it locally.</li>
</ul>
</li>
</ul>
<h3 id="83-index-api-usage">8.3 Index API Usage<a class="headerlink" href="#83-index-api-usage" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Purpose:</strong> The index API is used to retrieve metadata about documents, such as available document IDs, versions, and other
  attributes.</li>
<li><strong>Triggers for Index API Calls:</strong></li>
<li>On application startup if the client is online: Perform an initial lightweight sync to ensure the required metadata is up to
    date.</li>
<li>(Optional with performance consideration) Periodically in the background: Configurable intervals ensure ongoing metadata
    synchronisation.</li>
<li>On user request: Explicit refreshes initiated by the user.</li>
<li>When a document is requested by ID only and the local cache cannot verify its latest version.</li>
<li><strong>Filtered Queries:</strong> The index API can return metadata for a subset of documents to minimize bandwidth and local storage usage.</li>
</ul>
<h3 id="84-draft-management">8.4 Draft Management<a class="headerlink" href="#84-draft-management" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Local-Only Drafts:</strong></li>
<li>Drafts are created and stored exclusively in the <strong>local drafts table</strong>.</li>
<li>Changes to drafts are not synced to the server until explicitly published as a final document.</li>
<li><strong>Draft Synchronization:</strong></li>
<li>On publication, the draft is sent to the document API.</li>
<li>If the publication succeeds:<ul>
<li>The draft can be stored in the regular documents table, as the document owner and the user of the client are the same new
versions of the document can be edited and stored in the draft table however the draft must be signed and published again
if it is to supersede a previous version.</li>
<li>Local metadata is updated with the published version info.</li>
</ul>
</li>
<li>If the publication fails:<ul>
<li>The draft remains in the drafts table.</li>
<li>Notify the user of the failure and allow retry upon regaining connectivity.</li>
</ul>
</li>
<li>If an older draft is edited locally and saved it will get a new version id, this will become the latest version in the local
    draft database, if this draft is published it will supersede the previously published version even if it does not contain all of
    the data from the previous public version, the responsibility for draft management and versioning is the responsibility of the
    document owner.</li>
</ul>
<h3 id="85-version-management">8.5 Version Management<a class="headerlink" href="#85-version-management" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>UUIDv7 for Versions:</strong></li>
<li>Document versions are identified using UUIDv7, which encodes a timestamp for chronological ordering.</li>
<li>This allows efficient sorting and comparison of document versions.</li>
<li><strong>Version Lookup:</strong></li>
<li>If a document is requested <strong>without specifying a version</strong>, the index API must be queried to retrieve the full version
    history of the document.</li>
<li>The latest version in the metadata is compared against the locally cached version:<ul>
<li>If the latest version is not cached locally, fetch it from the document API and update the cache.</li>
</ul>
</li>
<li><strong>Conflict Prevention:</strong></li>
<li>Always rely on the latest version metadata from the index API when there’s uncertainty about the latest version.</li>
</ul>
<h3 id="86-conflict-resolution">8.6 Conflict Resolution<a class="headerlink" href="#86-conflict-resolution" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Published Documents:</strong> Always defer to the latest version retrieved from the server.</li>
<li><strong>Drafts:</strong> A last-write-wins strategy (new version id) is applied locally, using timestamps from UUIDv7 to determine the most
  recent change, collaborative or cross device conflict resolution is out of scope at present.</li>
</ul>
<h3 id="87-offline-mode">8.7 Offline Mode<a class="headerlink" href="#87-offline-mode" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Offline Capability:</strong> All local operations, such as creating, editing drafts, and querying cached data, continue to function
  without network connectivity.</li>
<li><strong>Queuing Failed Requests:</strong></li>
<li>API requests (e.g., fetches, publications) that fail due to connectivity issues can be queued, however the queue should be
    limited in size and only used for requests relating to the operation of the client, for example requesting the latest
    <code>Category Parameters Document</code></li>
<li>Upon reconnecting to the network, queued requests are processed in order.</li>
<li><strong>Fallback Retrieval:</strong> If a document isn’t cached locally during offline mode, display an error or notify the user of the need
  to reconnect.</li>
</ul>
<h3 id="88-client-metadata-bootstrap">8.8 Client metadata bootstrap<a class="headerlink" href="#88-client-metadata-bootstrap" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Fixed document definitions</strong></li>
<li>Catalyst defines fixed document types and identifiers, these type ids will not change and can be used to identify the
    latest documents required to bootstrap a client.
    Examples include, the <code>Brand Parameters Document</code>,
    <code>Campaign Parameters Document</code>, <code>Category Parameters Document</code>.</li>
<li>The ids of these document types can be used to pull the latest documents from the API when boot strapping the client and
    performing initial local caching operations.</li>
<li>A list of document types and specifications can be
    found <a href="https://input-output-hk.github.io/catalyst-libs/architecture/08_concepts/signed_doc/types/">here</a></li>
</ul>
<h3 id="89-background-synchronisation-optional">8.9 Background Synchronisation (Optional)<a class="headerlink" href="#89-background-synchronisation-optional" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Consideration:</strong> Before implementing any background synchronisation consider if it is necessary and if the same result can be
  achieved using explicit requests when required.</li>
<li><strong>Purpose:</strong> Keep local metadata and document caches up to date while minimizing bandwidth and performance considerations.</li>
<li><strong>Sync Triggers:</strong></li>
<li>Periodic intervals (configurable by the user).</li>
<li>Application startup.</li>
<li>Explicit user action (manual refresh).</li>
<li><strong>Lightweight Syncing:</strong></li>
<li>Fetch only critical metadata updates (e.g., new document versions, added documents).</li>
<li>Avoid unnecessary retrieval of documents already cached and up-to-date locally.</li>
</ul>
<h3 id="810-performance-considerations">8.10 Performance Considerations<a class="headerlink" href="#810-performance-considerations" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Local Storage Limits:</strong></li>
<li>Local storage may be limited, and caching large document datasets may not be possible.</li>
<li>To mitigate this implement size limits on the local data base and eviction policies for documents and metadata.</li>
<li><strong>Offline Queue Management:</strong></li>
<li>Large queues of failed API requests in offline mode could lead to delays or failures upon reconnecting.</li>
<li>Limit the size of the offline queue and only allow critical requests as pending operations.</li>
<li><strong>Metadata Inflation:</strong></li>
<li>Regular updates to the metadata table could lead to bloating, especially with frequent version changes.</li>
<li>Periodically clean up old metadata entries or versions no longer relevant, a least recently used (LRU) policy can be
     implemented however it is out of scope to track access patterns in local storage.</li>
</ol>
<h2 id="9-api-integration-details">9 API Integration Details<a class="headerlink" href="#9-api-integration-details" title="Permanent link">&para;</a></h2>
<h3 id="91-latest-api-specification">9.1 Latest API Specification<a class="headerlink" href="#91-latest-api-specification" title="Permanent link">&para;</a></h3>
<p>For the latest and most detailed API specification, refer to the following location:<br />
<a href="https://input-output-hk.github.io/catalyst-voices/api/cat-gateway/openapi-swagger/">Updated API Specification</a></p>
<h2 id="10-out-of-scope">10 Out of Scope<a class="headerlink" href="#10-out-of-scope" title="Permanent link">&para;</a></h2>
<ul>
<li>Device Synchronization</li>
<li>Multi-device sync, conflict resolution, P2P.</li>
<li>Multiple Storage Providers</li>
<li>Alternative backends, cloud storage, distributed systems.</li>
<li>Advanced Collaboration</li>
<li>Real-time multi-user editing, differential sync, IPFS integration.</li>
<li>Index Synchronization</li>
<li>Remote or distributed index updates.</li>
<li>Cache Management</li>
<li>Purging of old metadata and document versions.</li>
<li>Encryption</li>
<li>Draft document will be stored in plain text in local storage.</li>
<li>User linked sessions</li>
<li>Session management tied to a user is out of scope.</li>
</ul>
<h2 id="11-known-limitations">11 Known Limitations<a class="headerlink" href="#11-known-limitations" title="Permanent link">&para;</a></h2>
<ul>
<li>JSON Storage</li>
<li>Complex queries may affect performance.</li>
<li>Drift lacks native JSONB; using TEXT with JSON1.</li>
<li>Large documents can cause high memory usage.</li>
</ul>
<h2 id="12-references">12 References<a class="headerlink" href="#12-references" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>SQLite</strong></li>
<li><a href="https://sqlite.org/index.html">SQLite Official Website</a></li>
<li><a href="https://sqlite.org/json1.html">SQLite JSON1 Extension</a></li>
<li><a href="https://www.ietf.org/archive/id/draft-ietf-uuidrev-rfc4122bis-00.html">SQLite UUIDv7 Proposal</a> (for UUIDv7-related details).</li>
<li><strong>Drift ORM</strong></li>
<li><a href="https://drift.simonbinder.eu/">Drift Documentation</a></li>
<li>A type-safe database library for Flutter that supports SQLite.</li>
<li><strong>Flutter</strong></li>
<li><a href="https://flutter.dev/docs">Flutter Official Documentation</a></li>
<li><a href="https://pub.dev/packages/sqlite3_flutter_libs">sqlite3_flutter_libs Plugin</a></li>
<li><strong>Dart</strong></li>
<li><a href="https://dart.dev/">Dart Official Documentation</a></li>
<li><strong>UUIDv7 Specification</strong></li>
<li><a href="https://datatracker.ietf.org/doc/draft-ietf-uuidrev-rfc4122bis/">UUID Revision Specification (IETF Draft)</a></li>
<li><strong>Catalyst Signed Document Types</strong></li>
<li>
<p><a href="https://input-output-hk.github.io/catalyst-libs/architecture/08_concepts/signed_doc/types/">Catalyst Document Types Reference</a></p>
</li>
<li>
<p><strong>Catalyst API</strong></p>
</li>
<li><a href="https://input-output-hk.github.io/catalyst-voices/api/cat-gateway/openapi-swagger/">Catalyst API Swagger Documentation</a></li>
<li><strong>CBOR Encoding</strong></li>
<li><a href="https://datatracker.ietf.org/doc/rfc8949/">CBOR Specification (RFC 8949)</a></li>
</ul>
<h2 id="13-document-version-changes">13 Document Version Changes<a class="headerlink" href="#13-document-version-changes" title="Permanent link">&para;</a></h2>
<h3 id="v11-changes">V1.1 Changes<a class="headerlink" href="#v11-changes" title="Permanent link">&para;</a></h3>
<p>Narrowing of scope for fund 14 to include the following items.</p>
<ul>
<li>Removal of encryption for local drafts, unpublished draft documents will be stored in plain text in the drafts table,
draft documents stored in memory until saved to draft table through action by the user.</li>
<li>Removed context to "Session-bound encryption for drafts using deterministic key derivation for both encryption and decryption."</li>
<li>Draft documents will not be associated with a cross device session until future versions.</li>
<li>Clarification on separate database for each account and removal lifecycle of drafts and documents once keychain is deleted.</li>
<li>Removed metadata inflation management in local storage.</li>
</ul>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      (c) 2023 Input Output Global Ltd.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  



  


<h4>Cookie consent</h4>
<p>
We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.instant", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.indexes", "toc.follow", "toc.integrate", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "tags": {"ADR": "adr", "CSS": "css", "Dart": "dart", "Docker": "docker", "Earthly": "earthly", "Flutter": "flutter", "Github": "github", "HTML5": "html", "JavaScript": "js", "Python": "python", "Rust": "rust", "arc42": "arc42"}, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../../javascript/massillia-graphviz.js"></script>
      
        <script src="../../../../javascript/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../../../search/main.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>